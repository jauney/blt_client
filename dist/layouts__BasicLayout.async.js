(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"/5VO":function(e,t,a){"use strict";a("g9YV");var n=a("wCAj"),r=(a("+L6B"),a("2/Rp")),o=(a("P2fV"),a("NJEC")),i=a("gWZ8"),c=a.n(i),l=(a("2qtc"),a("kLXV")),s=(a("5NDa"),a("5rEg")),d=a("p0pE"),u=a.n(d),p=a("2Taf"),m=a.n(p),h=a("vZ4D"),f=a.n(h),y=a("l4Ni"),b=a.n(y),g=a("ujKo"),w=a.n(g),v=a("MhPg"),x=a.n(v),_=(a("y8nQ"),a("Vl3Y")),S=a("Y/ft"),C=a.n(S),E=a("q1tI"),k=a.n(E),O=a("ckwQ"),A=a.n(O),L=k.a.createContext(),M=function(e){var t=e.form,a=(e.index,C()(e,["form","index"]));return k.a.createElement(L.Provider,{value:t},k.a.createElement("tr",a))},T=_["a"].create()(M),V=function(e){function t(){var e,a;m()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=b()(this,(e=w()(t)).call.apply(e,[this].concat(r))),a.state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.onRadioChange=function(e){console.log(e.target.value)},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields(function(t,a){console.log(a),t&&t[e.currentTarget.id]||r(u()({},n,a))})},a.renderCell=function(e){a.form=e;var t,n=a.props,r=n.children,o=n.dataIndex,i=n.record,c=n.title;a.state.editing;return console.log(o),t="mobile"==o?k.a.createElement(_["a"].Item,{style:{margin:0}},e.getFieldDecorator(o,{rules:[{required:!0,message:"".concat(c," is required.")}],initialValue:i[o]})(k.a.createElement(s["a"],{onBlur:a.save}))):r,t},a}return x()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=(e.editable,e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children,e.form,C()(e,["editable","dataIndex","title","record","index","handleSave","children","form"]));return k.a.createElement("td",t,k.a.createElement(L.Consumer,null,this.renderCell))}}]),t}(k.a.Component),D=function(e){function t(e){var a;m()(this,t),a=b()(this,w()(t).call(this,e)),a.notifyParantDataSource=function(e){var t=a.props.notifyDataSource;"function"==typeof t&&t(e)},a.handleDelete=function(e){var t=a.state,n=t.dataSource,r=void 0===n?[]:n,o=t.selectedRowKeys,i=void 0===o?[]:o;r=r.filter(function(t){return t.mobile_id!==e});var c=!1;r.forEach(function(e){1==e.mobile_type&&(c=!0)}),!c&&r.length>0&&(r[0].mobile_type=1,i=[r[0].mobile_id]),a.setState({dataSource:r,selectedRowKeys:i}),a.notifyParantDataSource(r)},a.handleAdd=function(){var e=a.state,t=e.count,n=e.dataSource,r=n.filter(function(e){return!e.mobile});if(r.length>0)l["a"].info({content:"\u8bf7\u586b\u5199\u65b0\u6dfb\u52a0\u7684\u624b\u673a\u53f7"});else{var o={mobile_id:"TMP-".concat((new Date).getTime()),mobile:"",mobile_type:0};a.setState({dataSource:[].concat(c()(n),[o]),count:t+1}),a.notifyParantDataSource([].concat(c()(n),[o]))}},a.handleSave=function(e){var t=c()(a.state.dataSource),n=t.findIndex(function(t){return e.mobile_id===t.mobile_id}),r=t[n];t.splice(n,1,u()({},r,e)),a.setState({dataSource:t}),a.notifyParantDataSource(t)},a.updateMobileType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=a.state.dataSource,n=void 0===t?[]:t;n.forEach(function(t){e.includes(t.mobile_id)?t.mobile_type=1:t.mobile_type=0}),a.setState({dataSource:n}),a.notifyParantDataSource(n)},a.rowRadioSelected=function(e){var t=a.state.selectedRowKeys;t.length?-1===t.indexOf(e["mobile_id"])&&t.splice(0,1,e["mobile_id"]):t.push(e["mobile_id"]),a.updateMobileType(t),a.setState({selectedRowKeys:t})},a.onSelectedRowKeysChange=function(e){a.updateMobileType(e),a.setState({selectedRowKeys:e})};var n=e.dataSource||[],r=[];return n.forEach(function(e){1==e.mobile_type&&r.push(e.mobile_id)}),a.state={dataSource:n,count:n.length,selectedRowKeys:r},a.columns=[{title:"\u624b\u673a\u53f7",dataIndex:"mobile",width:"65%",editable:!0},{title:"\u64cd\u4f5c",dataIndex:"mobile_id",render:function(e,t){var n=a.state.dataSource,r=void 0===n?[]:n;return r.length>=1?k.a.createElement(o["a"],{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:function(){return a.handleDelete(t.mobile_id)}},k.a.createElement("a",null,"\u5220\u9664")):null}}],a}return x()(t,e),f()(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.dataSource,o=t.selectedRowKeys,i={body:{row:T,cell:V}},c=this.columns.map(function(t){return t.editable?u()({},t,{onCell:function(a){return{record:a,editable:t.editable,dataIndex:t.dataIndex,title:t.title,handleSave:e.handleSave}}}):t}),l={selectedRowKeys:o,type:"radio",onChange:this.onSelectedRowKeysChange,columnTitle:"\u9ed8\u8ba4"};return this.notifyParantDataSource(a),k.a.createElement("div",null,k.a.createElement(n["a"],{components:i,rowClassName:function(){return"editable-row"},className:A.a.dataTable,bordered:!0,dataSource:a,columns:c,rowKey:"mobile_id",rowSelection:l,footer:function(){return k.a.createElement(r["a"],{onClick:e.handleAdd,type:"primary"},"\u6dfb\u52a0")}}))}}]),t}(k.a.Component);t["a"]=D},"/mOS":function(e,t,a){"use strict";a.d(t,"f",function(){return s}),a.d(t,"b",function(){return d}),a.d(t,"a",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"e",function(){return m}),a.d(t,"c",function(){return h});var n=a("wd/R"),r=a.n(n),o=a("EUZL"),i=a.n(o),c=a("B797"),l=window.require("electron").remote;function s(e){var t=e.selectedRows,a=void 0===t?[]:t,n=(e.type,e.lastCar),r=void 0===n?{}:n,o="",i=0,c=0,l=1;a=a.sort(function(e,t){return e.company_name.localeCompare(t.company_name)}),console.log(a),a.forEach(function(e){1==e.trans_type||e.trans_type,i+=Number(e.trans_discount||0),Number(e.order_amount||0),c+=Number(e.order_num||0),o+="<tr>\n        <td>".concat(e.company_name||"","</td>\n        <td>").concat(e.order_code||"","</td>\n        <td>").concat(e.getcustomer_name||"","</td>\n        <td>").concat(e.trans_discount||"","</td>\n        <td>").concat(e.order_name||"","</td>\n        </tr>"),l++});var s="\n    <style>\n    .order-box {text-align: center;}\n    .content .header {text-align: center; width: 100%;}\n    table {width: 100%; border-collapse: collapse; border-spacing: 0;}\n    table th { font-weight: bold; }\n    table th, table td {border: 1px solid #ccc; font-size: 12px; padding: 4px; text-align: left; line-height: 150%;}\n    .carinfo th {border: 0;}\n    </style>",d="";r.car_code&&(d='<table class="carinfo">\n    <tr>\n    <th style="width:50px;">\u8f66\u724c\u53f7\uff1a'.concat(r.driver_plate,'</th>\n    <th style="width:50px;">\u7535\u8bdd\uff1a').concat(r.driver_mobile,'</th>\n    <th style="width:50px;">\u59d3\u540d\uff1a').concat(r.driver_name,'</th>\n    <th style="width:50px;">\u8d27\u8f66\u8fd0\u8d39\uff1a').concat(r.car_fee,'</th>\n    <th style="width:50px;">\u8d27\u8f66\u7f16\u53f7\uff1a').concat(r.car_code,"</th>\n    </tr>\n  </table>"));var u='<div class="order-box">\n    <div class="header">\u9655\u897f\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41</div>\n    <div class="content">\n    '.concat(d,'\n    <table>\n      <tr>\n        <th style="width:15%;">\u5206\u516c\u53f8</th>\n        <th style="width:15%;">\u8d27\u5355\u53f7</th>\n        <th style="width:20%;">\u6536\u8d27\u5ba2\u6237</th>\n        <th style="width:15%;">\u8fd0\u8d39</th>\n        <th style="width:35%;">\u8d27\u7269\u540d\u79f0</th>\n      </tr>\n      ').concat(o,"\n    </table>\n    <table>\n      <tr><td>\u5408\u8ba1\u7968\u6570</td><td>").concat(l-1,"</td></tr>\n      <tr><td>\u5408\u8ba1\u4ef6\u6570</td><td>").concat(c,"</td></tr>\n      <tr><td>\u5408\u8ba1\u8fd0\u8d39</td><td>").concat(i,"</td></tr>\n      <tr><td>").concat((new Date).toLocaleDateString(),"</td><td>\u63a5\u8d27\u4eba\u7b7e\u5b57\uff1a</td></tr>\n    </table>\n    </div></div>\n    "),p=document.querySelector("#printOrderWebview");p.send("webview-print-render",{html:"".concat(s).concat(u)})}function d(e){var t=e.selectedRows,a=void 0===t?[]:t,n=e.type,r=void 0===n?"":n,o=e.lastCar,i=void 0===o?{}:o,c=e.silent,l=void 0===c||c,s="",d=0,u=0,p=1;a.forEach(function(e){var t="\u63d0\u4ed8";1==e.trans_type?t="\u73b0\u4ed8":2==e.trans_type&&(t="\u56de\u4ed8"),d+=Number(e.trans_discount||0),u+=Number(e.order_amount||0),s+="<tr>\n        <td>".concat(p,"</td>\n        <td>").concat(e.order_code||"","</td>\n        <td>").concat(e.getcustomer_name||"","</td>\n        <td>").concat(e.getcustomer_mobile||"","</td>\n        <td>").concat(e.order_amount||"","</td>\n        <td>").concat(e.trans_discount||"","</td>\n        <td>").concat(t||"","</td>\n        <td>").concat(e.order_advancepay_amount||"","</td>\n        <td>").concat(e.deliver_amount||"","</td>\n        <td>").concat(e.insurance_fee||"","</td>\n        <td>").concat(e.order_name||"","</td>\n        <td>").concat(e.remark||"","</td>\n        </tr>"),p++});var m="\n    <style>\n    .order-box {text-align: center;}\n    .content .header {text-align: center; width: 100%;}\n    table {width: 100%; border-collapse: collapse; border-spacing: 0;}\n    table th { font-weight: bold; }\n    table th, table td {border: 1px solid #ccc; font-size: 12px; padding: 4px; text-align: left; line-height: 150%;}\n    .carinfo th {border: 0;}\n    </style>",h="";i.car_code&&(h='<table class="carinfo">\n    <tr>\n    <th style="width:50px;">\u8f66\u724c\u53f7\uff1a'.concat(i.driver_plate,'</th>\n    <th style="width:50px;">\u7535\u8bdd\uff1a').concat(i.driver_mobile,'</th>\n    <th style="width:50px;">\u59d3\u540d\uff1a').concat(i.driver_name,'</th>\n    <th style="width:50px;">\u8d27\u8f66\u8fd0\u8d39\uff1a').concat(i.car_fee,'</th>\n    <th style="width:50px;">\u8d27\u8f66\u7f16\u53f7\uff1a').concat(i.car_code,"</th>\n    </tr>\n  </table>"));var f='<div class="order-box">\n    <div class="header">\u9655\u897f\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41</div>\n    <div class="content">\n    '.concat(h,'\n    <table>\n      <tr>\n        <th style="width:30px;">\u5e8f\u53f7</th>\n        <th style="width:50px;">\u8d27\u5355\u53f7</th>\n        <th style="width:40px;">\u6536\u8d27\u5ba2\u6237</th>\n        <th style="width:40px;">\u6536\u8d27\u7535\u8bdd</th>\n        <th style="width:50px;">\u5e94\u6536\u8d27\u6b3e</th>\n        <th style="width:40px;">\u6298\u540e\u8fd0\u8d39</th>\n        <th style="width:30px;">\u8fd0\u8d39\u65b9\u5f0f</th>\n        <th style="width:30px;">\u57ab\u4ed8</th>\n        <th style="width:30px;">\u9001\u8d27\u8d39</th>\n        <th style="width:30px;">\u4fdd\u4ef7\u8d39</th>\n        <th style="width:150px;">\u8d27\u7269\u540d\u79f0</th>\n        <th style="width:90px;">\u5907\u6ce8</th>\n      </tr>\n      ').concat(s,'\n      <tr><td colspan="11">\u5408\u8ba1\u8fd0\u8d39</td><td>').concat(d,'</td></tr>\n      <tr><td colspan="11">\u5408\u8ba1\u8d27\u6b3e</td><td>').concat(u,'</td></tr>\n      <tr><td colspan="11">\u65e5\u671f</td><td>').concat((new Date).toLocaleDateString(),"</td></tr>\n    </table>\n    </div></div>\n    "),y=document.querySelector("#printWebview");console.log("type: ",r),y.send("webview-print-render",{printHtml:"".concat(m).concat(f),type:r,silent:l})}function u(e){var t=e.getCustomer,a=void 0===t?{}:t,n=e.sendCustomer,o=void 0===n?{}:n,i=e.data,l=void 0===i?{}:i,s=e.printCompany,d=void 0===s?{}:s,u=e.siteList,p=void 0===u?[]:u,m=e.footer,h=void 0!==m&&m,f="";1==a.customer_type?f="V":9==a.customer_type&&(f="H");var y="";1==o.customer_type?y="V":9==o.customer_type&&(y="H");var b="\u63d0\u4ed8";1==l.trans_type?b="\u73b0\u4ed8":2==l.trans_type&&(b="\u56de\u4ed8");var g="";1==l.transfer_type?g="\u8f6c\u51fa":2==l.transfer_type&&(g="\u8f6c\u5165");var w={};p.forEach(function(e){e.site_name==l.site_name&&(w=e)});var v=Object(c["c"])([l],"init"),x=r()(l.create_date).format("YYYY-MM-DD"),_='\n    <div class="header">\u9655\u897f\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41</div>\n    <div class="content">\n    <table>\n      <tr>\n        <td class="col3 txt-bold">\u5230\u8d27\u7ad9:'.concat(l.company_name||"",'</td>\n        <td class="col3 txt-bold">\u53d1\u8d27\u7ad9:').concat(l.site_name||"",'</td>\n        <td class="col3 txt-bold">\u5355\u53f7:').concat(l.order_code||"",'</td>\n      </tr>\n      <tr>\n        <td class="txt-bold" colspan="3">\u65e5\u671f:').concat(x,'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col3-1">').concat(f,'</td>\n        <td class="col3-2 txt-bold">\u6536\u8d27\u4eba:').concat(l.getcustomer_name||"",'</td>\n        <td class="col3-2 txt-bold">\u7535\u8bdd:').concat(l.getcustomer_mobile||"",'</td>\n      </tr>\n      <tr>\n        <td class="col3-1">').concat(y,'</td>\n        <td class="col3-2">\u53d1\u8d27\u4eba:').concat(l.sendcustomer_name||"",'</td>\n        <td class="col3-2">\u7535\u8bdd:').concat(l.sendcustomer_mobile||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <th class="split"></th>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col4">\u8d27\u6b3e:').concat(l.order_amount||"",'</td>\n        <td class="col4">\u8fd0\u8d39:').concat(b,'</td>\n        <td class="col4">\u8fd0\u4ef7:').concat(l.trans_amount||"",'</td>\n        <td class="col4">\u6298\u540e:').concat(l.trans_discount||"",'</td>\n      </tr>\n      <tr>\n        <td class="col4">\u4fdd\u989d:').concat(l.insurance_amount||"",'</td>\n        <td class="col4">\u4fdd\u8d39[').concat(b,"]:").concat(l.insurance_fee||"",'</td>\n        <td class="col4">\u57ab\u4ed8:').concat(l.order_advancepay_amount||"",'</td>\n        <td class="col4">\u9001\u8d27\u8d39:').concat(l.deliver_amount||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-1 txt-bold">\u63d0\u4ed8\u5408\u8ba1:').concat(v.totalAccount,'</td>\n        <td class="col2-2">\u8d26\u53f7:').concat(l.bank_account||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <th class="split"></th>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-2">\u8d27\u7269\u540d\u79f0:').concat(l.order_name||"",'</td>\n        <td class="col2-1">\u6807\u7b7e:').concat(l.order_num||"","</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td>\u6536\u8d27\u5730\u5740:").concat(l.getcustomer_address||a.customer_address||"","</td>\n      </tr>\n      <tr>\n        <td>\u5907\u6ce8:").concat(l.remark||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <th class="split"></th>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col3">\u8f6c\u8fdb:').concat(g||"",'</td>\n        <td class="col3">\u4e2d\u8f6c\u8d39:').concat(l.transfer_amount||"",'</td>\n        <td class="col3">\u5730\u5740:').concat(l.transfer_address||"",'</td>\n      </tr>\n      <tr>\n        <td class="col3">\u7269\u6d41:').concat(l.transfer_company_name||"",'</td>\n        <td class="col3">\u5355\u53f7:').concat(l.transfer_order_code||"",'</td>\n        <td class="col3">\u7535\u8bdd:').concat(l.transfer_company_mobile||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <th class="split"></th>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-1">\u5230\u8d27\u7ad9:').concat(d.company_name||"",'</td>\n        <td class="col2-2">\u7535\u8bdd:').concat(d.company_mobile||"",'</td>\n      </tr>\n      <tr>\n        <td class="col2-1">\u53d1\u8d27\u7ad9:').concat(l.site_name||"",'</td>\n        <td class="col2-2">\u7535\u8bdd:').concat(w.site_mobile||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-1">\n          <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAFYAVgDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD9U6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigBpbBpQSQDigjNfysE5NAH9U9FfysUUAf1T0V/KxRQB/VPQc1/KxQOtAH9UxbFKCSAcUYzX8rBOTQB/VOSQCcUgbJr+VkHBr+qcDFACFsGlBJAOKCM1/KwTk0Af1UUUUUANLYNKCSAcUEZr+VgnJoA/qnJwKTcScY/GlIzX8rOaAP6pgc0tIOlLQAUUUUAFFFFACUV/KxRQB/VMWIOMUoORX8rANf1TgYoACcCkDEnGKUjNfysE0Af1T0V/KxRQB/VPRX8rFFAH9U9FfysUUAf1UUUUUAFFFFABRRRQAnev5WK/qn71/KxQB/VOTgZNAOaCMiv5Wc8dKAP6p6K/lYz7UZ9qAP6p6/lX9K/qor+Vf0oA/qnzjFfysEYNf1SkdM+lKvQc/nQB/KyBk1/VPnOaCCQRmkC4zQB/KyetFLgk8UmKACgdaKB1oA/qnyAOaAcimsOh9ulfytnr0oATrX9U+aG6da/lbJBxQB/VJ1xX8rFf1TA4r+VkjFAH9U/Sv5WDSgj0r+qUKQetAH8rNFf1T0UALSHpRmgmgD+VnGc1/VMDkV/KznGaCwJ6UAf1T1/Kv6V/VRX8q/pQB/VPkAc0A5FIVyRz2r+VrI9KAP6p6K/lYz7UAjPSgD+qbriv5WK/qnAr+VigD+qiiiigAooooAKKKKAE71/KxX9U/ev5WKAP6qK/lX7V/VRX8q/agAooooA/qor+Vf0r+qiv5V/SgD+qbGcV/KySTX9U47V/KxQB/VPQTxX8rFA60AOAFf1SDp0pcdK/lY60ALj3oAGetf1T0UAMJ9RSr0HH50uB07V/KwTk0Af1Tt0PGaaOc1/K0Dg1/VPjGaAP5WckGkoPWigAAya/qmBJOMV/KyDg0E5oA/qnor+ViigAHJ607HfNNBxX9U+MUAfysGig9aKAP6qK/lX9K/qor+Vf0oA/qnHav5WK/qnHav5WKACgdaKB1oA/qnHav5WK/qnHav5WKAP6qKKKKACiiigAooooATvX8rFf1Tk4r+VggigD+qiiv5WPwo/CgD+qeiv5WPwo/CgD+qYnAr+VnGMUA4PSlJz+FAH9Uo7V/KxX9U2a/lZIIoAOtf1T5oIJHWv5Wsg0Af1S9cV/KxX9UwOPWv5WSMUAAGTRg+lf1TN0POPpX8ree360ANxX9U/WmkE4r+VsnnpQAgGTRgg1/VM3Tr+Vfytn09DQB/VKO1fysV/VNnmv5WcUAf1Tk4GTRkUEZFfytAjGKAP6pdw9aAcimEc9/pX8rhPPSgD+qev5V+uK/qnJxX8rI4oATFBGDX9Upz1/Sv5WyOen5UAf1T1/Kx6V/VMTiv5WelAH9Uw6UtfysH6UfhQB/VPRX8rH4UfhQB/VMTiv5WCMU7PGMU08npQB/VRRRRQAUUUUAFFFFACEZoAApaKAExQeKWkPSgBucHGPxpw5HSv5Wc1/VMBigAPA6U3OTjH404jNfys5oA/qlAz1pQAKB0paAEJwK/laxxnNf1SkZGDQBigD+Voeuaaetf1TkZr+VgnNAH9U56etNB7YpxGa/lZzQAvfrSY96/qmHSloA/lXzS7iaSigBd3Ff1TYr+VjtX9VFACEkDpX8rRGB1pvSv6p+9AH8rX4ikx71/VPRQAh5pNtfys0UAf1St1xjrTgOOlfysA1/VOBigAIzSYxTqQ9KAAfQUY9hX8rB60UAf1THgE4pA2e1fytA4Nf1T4xQAD6CjHsK/lYPWigD+qiiiigAooooAKKKKAEJA60A5FIy5PXtX8rWR6UAIBk0YwaAcGv6pdvJOaAHZ6V/Kx0pwYDPH5V/VKAQOtAATgZNGRQeR1r+VrsBQB/VLuHrQDkU0jv+lfytk89KAP6pulfys+lAPPSv6owCKAH5AFAORTSOe/0r+Vs9elAH9U9IelBOKTOaAP5WcEmgjBpw9PU1/VIvTr+dAH8rNf1TnvX8rAGa/qmJz60Afys4yaCMGv6pTnOf0r+Vsjnp+VACAZNf1T5zQ3Q84poFAH8rR60V/VOM0UAfysUDrX9U5OO9JnPSgBcgCgHIppHPev5Wz16UAJ1r+qfvQ3TrX8rROR0oA/qmor+Vgc9qM+1AH9UxOK/lYIr+qcnjrSKOc5oA/lZAzQRg1/VMQSc5r+VknJoA/qoooooAKKKKACiiigBO9fysV/VP3r+VigAAya/qlyTkY7V/K0Dg0ZoAU1/VPX8q/XNf1UUAfysAc9a/qkHOad1r+VgmgBScGko60UAKBz1pSPXvX9UpGRX8rOc4oA/qkPGM0q9Bx+dLjOK/lYJyaAP6p26dK/lbIApnSv6p8daAP5WhntSEcnmjNf1TAYFAH8rFLnJpKB1oA/qlPGM0q9Bx+dLjOK/lYJyaAP6pyM1/KyOa/qnr+VfpigD+qcZxRX8rFFABkiv6psV/KzX9U570AfytDp24r+qQcjp+dfys5INBOTQB/VOenrTV64xTiM1/KwTQB/VKxwa/lbI560gr+qfpQB/KyOvWv6pFPOPbrTiMigADpQAd6/lYr+qfvX8rFAH9VFFFFABRRRQAUUUUAJ3r+Viv6p+9fysUAf1UV/Kv2r+qiv5V8ZoAAM1/VODkV/KyDtFBOT0oA/qnor+VjPtQeO1AH9U9FfysfhR+FACV/VOe9fysYr+qYnJoA/la9a/qm603aSetfytkj0oAReor6w+Av/AATR+M/x88P2viC006y8LaDdx+ba33iGZ4PtCFQyOkaozlGDZDbcH6cn99jwOvNfkH+3/wD8FAfiJe/GPWPhn8MtVuvD+kaNOdPnudK4vL66HEgDj5lVT8oC4OQST0AaVw30Rlf8OTfimf8AmefB/wCJuv8A4zR/w5N+KX/Q9eD/AM7r/wCM18yL8R/2kX+74q+KR911HUj/AOzVKnj/APaVb/mZvir/AODDUv8A4qhSpS/5eR+9Gvsqi+y/uP6KMikY5HWv5vtR+Pnxs0e9ks9Q+JPj6xu4jiSC516+jkT6q0gIqfRPjb8dPEtzJb6R8QviHqtwi72istav5mC5xkhXJAyRz713/U5KHtHJKPfoQotu1j6qH/BE/wCKWePHPhDH+9df/Ga/ZFeABmv53D45/aWHTxJ8Vv8AwO1P/wCKqJviB+0qnXxP8VR9dQ1L/wCKrjkqMd6sfvRp7Gp/Kz+ijcKCwHev50G+JX7SCEZ8V/FEfXUtS/8Aiq+q/wBgr9vb4leG/jPofw2+J2p3+uaPrs6WMEushjeWVw/ER3t8zKzEKQ2fvAg8c5Jwk7Qkm/JkypziryTR+wmea/lYr+qQHBxmv5W+lMzADNf1TZzmv5WQcGnZ7YoATFf1TA5puOevT1pw4HWgAJwK/lZxjFAOD0pc5xxQB/VLkAc0A5FNIzz7dK/lbJ56UAJ1r+qfPWhunWv5Wyc9qAGYyaCMGv6pe/U1/K2eT0/KgD+qeiiigAooooAKKKKAGs2D07V/K1getf1TEA9aAMCgAJIGcZr+VrHemg4NGT60Af1S5wfr3pw5HSv5WQa/qmAxQB/KwOv+Nf1SgnOP1NfytA4NGcmgD+qcc0YoHSloAaeB0/Kv5Wz07c00HBoySaAP6pScEfSv5W8D1r+qbAI5oAwKAGZ/e49s1/O744vtb0z9t7xfd+HLFNU12Hx3qEllZyfdmlF9JtU8jqfcV/RAT+//AOAn+Yr8BtOQP/wUY1LIz/xcW9/9LpazrNRw1aTV7Rbt8jegm6sbd0fUNr8Z/wBq1QAnwe0th6nd/wDHq9O+CXxL+PviLxrHB8QfAGleE/CsNvJPd6iu7eNq5Cr+9PU9yOgNfTNnDhR2rx39tTx7/wAK7/Zr8X3cc5gu76D+zbcg/Nvm+Q4/4CW/Kv5oyzMKWb4mGBpYGnF1Go3XNdX3a1PuKqnTvN1G7H5BfGXxzJ8Tvip4p8UOTs1K/lmiVv4Y92I1/BAor7Z/4Jz+CtV8JfBr4kfEfRtGbXPEk/8AxL9IsegmMS7iM5HDO6Z5/wCWdfn0EB47V+5H7Jfw+f4b/s8+CtHnh8i8axW7uUxgiWX94QfcbgPwr+jvETE08kyKlhIK/M4q3eMd1+h83gE6leVVnzdq/wC0Z+1PpEbTT/A+0liUZIt4ppmx9EkJP5Vwmlf8FRtU0nVHsfGXw1NrJG2yYWV48U0R75ilTr7FhX6TtHk4xmvym/4Kk6/4d1b4zaLY6UlvJq+n6cU1W4hAyXZsxo5HUqvP/A6/K+F4ZVxRi/qFfL1FW+KDkrW7npYipWw8PaQqfefX/wAIP2pvh78epfsmhalJa6ztLnStRURT4HUryQ+P9kmviz4xxmH/AIKT+Cl6f8VNoJ/8jw184fBs+IF+K/hP/hGfNOu/2lB9kEQ5LbxnI/u469sZr6Z+Ocfl/wDBSzwV0/5GTQOnT/Xw19Hl/CtDhniJwwtRuFSm3yvVqzX4GGIx0sZgWprVNfM6/wD4LYgf8L88C/8AYsj/ANKp6/OpvvGv6m5P+Qkn/XP+pr+WQnJr74+ZFx70Yx3r+qeigD+Vj8aPxr+qeigBMewpD9K/lZoHWgB3frSY96/qmHSloAQ80hGBX8rNA60AO7E5Ff1SjkdPzoxkUAYGBQAtFFFABRRRQAUUUUAJ3r+Viv6p+9fysUAHWv6p80EEjrX8rWQaAP6peuK/lYr+qYHBr+VnFAB1r+qfvQ3TrX8rROe1AH9U1FfysE47UZ9qAP6picCv5WcYxQDz0pTk4FAH9Uo7V/KxX9U2a/lZxQB+in/BE3j4+eOs/wDQsn/0qgrxrR13f8FGtQ7/APFxr3/0ulr98ufO/Dn9K/A/RTj/AIKNX5/6qNe/+l0tKqv9kxH+CX5HRQ/ix9UfsXboNo/lX58/8FXfiRl/BngO3b7ok1e8/wDRcI/9Gn8RX6FW3YV+K37aPxC/4WP+0h4wvo5hPaWVz/ZtuynK7IRsOPbcG/OvxTwnyr67nn1iS92kr/N7H1GZVOSlbuch8BPAcfxJ+MXhLw7cMqWV3qEX2t2OAsCndJz2+RWr9efHX7ZHwf8AhussOoeMLSe4gGPsmmg3MnHYbeP1r4e/4JZfD1vEPxh13xVLAXtdA08RpIRwJ5yVXHvsSSv0r8X/AA58LeP7FrPxJ4e0zW7dv4b21SQj/dJGVPuMGvsPEjNMBXzunhMdGUqdJLSLtq9zlwNNxo8y3Z+d/wAdv+CoWq+I7abSPhnpMmhW8ilG1jUCGujn/nnGMrGfcljz0FeK/Dj9ij4v/HS9/tiewbTrW/czzazrkxUyFuS5HLsTnPTmvoz9qf8AYC8JGHUb74W3kdn4nsrU6jceEDcCRprYcGSFSd6kHoDlT0GD1+FfAvxV8X/C7UxfeFvEOoaHcA8razsqP7On3WHsRX6JkFDBVsqlLhZKlUe/PFuXlf8AqxwV3KNT/adV5bH6xfs5fsV+Dv2eYl1GN28QeKzHtfV7mMIIsj5lijyQgPrkn3r43+Pqbf8Agph4Lx0/4SPw/wD+j4a+hf2PP26x8Z7yLwb41jis/FpUm0voV2w3+BkqV/hkxk4HB56V8+ftAY/4eY+C/wDsY/D/AP6Phr8lyHD5vh+KsRHOW3U9m7Po1daryPRxUqUsF+62uj9rJP8AkJJ/1zH8zX8shGDX9TcnOopxx5f9TVscDGa/UT5c/lZoHWv6p6DmmADtX8rFf1TdK/lZIIoAKB1r+qcnHekznpQAucV/KwRg1/VLjNKOABmgD+VmgdaMUoBFAH9U2cV/KwRine1NPWgD+qiiiigAooooAKKKKAGs2D07V/K1getf1TEA9aAMCgAJwK/laAGM1/VKRkYNGMCgD+Vvt2r+qMcjp+dfytZINITk0Af1Tnp600enp3pxGa/lZJoAXbmkKgHrRk9a/qmAwKAP5WQOetf1SA5yPbrTiMijAA4oA/laHOT71/VIOR0/Ov5WckGgnJoA/RT/AIIonHx98cD/AKlk/wDpVBXjOjt/xsa1Af8AVRr3/wBLpa/fQ/6//gJ/pX89XibxlY/Dz9unxV4k1MStYaV491C6nEK7nKLeyk4GRk0VIylhq0IK7cWkvkdFBpVIt90frz8ZPiCnwu+EnivxUxHmabp8s0IPQy7cRj/vorX4RzXLXU8k0rF5JGLsxOSSeSa/Svx5+3z8BPil4TuvDfibTvEV9pF0VM1ulr5e7acjlZM9R0rxeTx9+xpGSyeBfFcp67RIwH6zV8b4dRxXDWGqrFYKo6k30Sei26nu4/kxElyVFZHGfs3/ALamq/s0+B9T0LQ/Cmnanc394bua/vp3GfkCqmxccDB/i7mt3xT/AMFE/jZ8QXXT9HntNFeY7Ei0OxLTtnsCxds/StuL47fsn6IC2n/BjV9SkHT7bMoB+uZWqZv+Ciun+CoHtvhh8H/Dfg9cYFzLiWVvQnYkf6sa+5rYSljMTLGUsocqsne9RpL82calyxUZVdPI6/8AZL+Ffjn4X+NtX+OfxfvLvQNItNPmaabWpiby8eQAAMhO7HoDyTtAFfB/ibUINW8Rape2sP2e2uruWeKL+4jOWVfwBArt/i/+0V4/+Od4kvi7X57+3iYvFYJ+7toie6xjjOOMnJ968zZ8jA5Y19ZlWAr4OpVx2NlFVJpK0dIxS2XmcderGcVThsu/U6P4Z6zqOgfEjwvqGkM66nBqdu9v5fJL+YuB756Y96+p/j4+/wD4KX+Cux/4SPw/x/23grW/YT/ZB1W+8Sab8SfGFk+n6TZEXOlWVwmJbmXqkpU9EXqM9Tg9Kw/jq+//AIKXeCjn/mZNA/8AR8FfmmJzvCZlxR9XwrUnTpy5mu7a0+R3OhOlgXKel2jrv+C2OP8AhfngX1/4RkZ/8C56/OzHvX9TT86kn/XP+pq7XsHiCE4FIGJOMUpGa/lYJoA/qnIz2oAx2r+ViigBR161/VGMmn9a/lYJoAU8UmaOtFAH9U5HHSv5Wu2eOa/qlIyMGjGBQAwn681/K4Rz1o9a/qm6UALRRRQAUUUUAFFFFACEgdaAcimsOc+3Sv5Wz16UAf1T0nSlpCOKADIoByMiv5Ws9vfrX9UoPHWgD+VgDNf1TZzmv5WR1pxOBj0oATFf1TA5pu3PNOAwKAP5WAMmv6p85oIJBGaTbigD+Vk9aK/qmBxSjmgD8a/+CJrBfj946UkBj4YJAJ/6eoK+P/2lsr+0h8Vsgj/irNW6/wDX5LX9JdxIIHQscL0z2Ffjz/wUI/4J8ePbP4ua94/+H+g3Xirw5r07X9za6bGZbq0uHOZQYh8zKzZYFc9SD0rejPlldgfnxHJjFWEkzXe2/wCzb8XoXDN8JvGsgH8LeHbzB/KOup0f4R/FjScY+AmuXZHe78K30n/ste5Sx7pLRX+djWKT3djx8SevFdX4O+F3jH4gTiHw34Y1XWmJxutLR3QfVgMD8TXu/hfU/jx4OdZNI/Z6+yyr0lb4fTSOP+BNGTXoUX7S37YNvGI4vhlrcaDgKngq6Ax9AlcOKzzN1G2EoQv3lP8ARI64Qw325v7jjfhz/wAE2/il4vkjl11rHwfZE/O17J50+PaJD1+rCvsv4OfsMfDL4OzQX8tq3irXISHW+1ZQyI47pF91fXnJ96+Zn/aZ/bEb/mmmvf8AhGXX/wAbqs/7R/7Yb5z8Ndf/APCMuv8A43X5HnuH42zqLpyrwpwfSLt+lz1sPWy6g72bfnqfoxe3wHcDtivzI+Mcvnf8FKPBLdf+Km0H/wBHwVqTfH39sCc/N8NfEX4eDbr/AON169+x/wDsd/FP4tftDab8ZvjDpB8OWWlyR3dvZ3UIhnvLiNQIv3PVFU4YlsElQAOpHk8G8IZhw/j6mLxkotSi1o763RtmWY4bE4ZUqV73P1Nc51JPZP6mv5Za/qTs7tb6+eWM741G1WHQ+4r+W0jmv10+TEAzX9U4Ir+Vgdad04oA/ql3D1oByKbtyc5/Cv5W8j0oATrX9U/eggkda/laJyOlAH9U1Ffys/gKTPtQB/VMTgV/KwRilBwelBO4UAJRQRiigD+qiiiigAooooAKKKKAGseeaF6Dj86UjNfysE5NAH9VFITxS0nWgD+VroeDik/Gv6p6KAP5WAOetf1Rgk0/rX8rPpQB/VLuxSgkgHFGM1/KwTk0Af1UUjdKWk60AfytYGPp2r+qVelGBQBgYFAEN3CJ4SpGQa5q6l1fSifsjpNH2jmUkD8iDXVkZFfys5NAH6Kj/gtj8UcH/ihvB/8A3zdf/HqQ/wDBbL4pA4/4QXwh/wB83X/x6vzryea/qj+zxf8APNP++RQB5/8A8Jh4p/6B9j/3y/8A8VX5YH/gtj8Uuf8AihfB/wD3zdf/AB6vzqzX9Uf2eIdI0GOmBSA/HIf8FsfijjnwL4PB/wB26/8Aj1If+C2fxSB/5EXwh/3zdf8Ax6vzrz1r+qP7PF/zzT/vkUwPxv8A+H2PxSP/ADInhD8rr/49X6tLJruufu7yRLeE8PFAhUH1BySe/TNfzIg4ORwaCSaAP6mdMsVs4FQDir2Mdq/lYooAUDnrX9UgPPf604jIowAKAG7iD0r+VsgetHrX9U3SgAJIGcZr+VrHemg4NGT60Af1S85xzz3r+Vo9f8KM0E5NAH9U+KRqdSdaAP5WiAeaaRg1/VOQK/lYJzQB/VRRRRQAUUUUAFFFFACEgdaAcimsOc+3Sv5Wz16UAJQOtf1T59xSH60AKOlLX8rB69KPwoA/qmJwMmjORQ3Sv5Ws9sUAJ61/VN1ppFfytk89KAP6p6Q9KCQKM7ulAH8rGMmgjBr+qbac5zX8rJOTQAAZr+qfOa/lZHB6UpOBgjvQAmK/qmByK/laB9KQnk8UAIBk0uCDX9Up5HX8q/lc7dqAP6pB0pa/lZxnoM0n4UAIBk0YPpX9UzdDzj6V/K3njHb1oAbigjBr+qXBODX8rROTQB/VRX8q/pX9U+QK/lZxQB/VMO1fysV/VNnGK/lZIIoA/qn6V/KwaUHnpX9UijBoA/laFf1T9aa3J61/K2Tz0oA/qnor+Vj8KB9MUAf1TdcV/KxX9Uy1/KzQB/VRRRRQAUUUUAFFFFADWPPNC9Bx+dKRmv5WCcmgAHJ607HfP600HFf1TYxmgBM9sU4cjpX8rOa/qmAxQAHmkIwK/lZoHWgB3frSY96/qmHSloA/lYHXrX9Uik5p3Wv5WDQB/VMSQcYr+VkjBoBxQTk0Af1TkcdK/lawCM+/Sv6pSMjBoxgUAfytAYH9DX9Ui9On51/K1kg0hOTQAo69a/qjzz3+tPIyKNo9KAP5WwAa/qjHTpS4r+VjrQB/VOenrTRycU4jNfysE0Af1TEkHFfyskYNAOKCcmgBfxpevev6pqQ9KAExkdPzpQMdq/lYPWigAoJJoooAcvTNf1SDkdPzr+VkEignJoA/qnx7CjFfysUUAf1TEkHpmv5WiB60gr+qfpQAtFFFABRRRQAUUUUAISB1oByKRlyevav5Wsj0oA/qnor+Vj8KPwoA/qnor+Vj8KPwoA/qnor+Vj8KXoeRigD+qXI69q/lYIwa/qm25pQCABmgD+VigdaKB1oA/qnzjFfysEYNf1TEZ/CgcADNAH8rNf1T9M1/Kxgmv6pic0ALmv5WOlPBGK/qjHTrQB/KzQOtf1TnikJyKAFzgUA5GRX8rWe2K/qlXpQB/KxQOtf1T59xQfqKADOK/lYIwa/qlIpy9BzmgAJxX8rBFf1Tnp6U0cHNAH8rQGaCMGv6piCTmv5WScmgD+qcnAyaMihulfytZGPp3oA/ql64r+Viv6plr+VmgD+qcnAyaM5FBGRX8rQIxigBp60Up60mKAP6qKKKKACiiigAooooATvX8rFf1T96/lYoA/qnPA6UgOTjFKRmv5WCaAP6p8ewox7Cv5WKKAP6p8A1/Kzmv6p6/lX9KAP6px0paQdKWgD+VcDJpwAHNNBxX9U+MUAfytYzSEYPWjNf1TAYFACN0PH5ULyeK/lZBwa/qnAxQAm3mv5Wc1/VP3r+VigD+qdulfytY75r+qUjIwaMYFADSe2KcOnpX8rOa/qmAxQB/Kz+NA+tf1T0h6UAfytAcf0Nf1SL0HGPrX8rWSDSE5NAH9U7dOlfytkAUzpX9U+KAEWv5Wa/qn6Yr+VigD+qc80m2v5WaKAP6piSDiv5WSMGgHFBOTQB/VOSQOlfytFQO/503pX9U+OtADc89OvrThyOlfys5r+qYDFAC0UUUAFFFFABRRRQAnev5WK/qn71/KxQB/VRX8q/av6pycV/KyRQAlFGKMUAf1UV/Kv6V/VRX8q/pQB/VPnGK/lYIwa/qmK5xSgEADNAC1/Kv2r+qfIFfyskUAIATQRg0oOBiv6pgCBjOaAFor+VjPtS9OtAH9Uu4etAORTduTnP4V/K3kelACAZNf1T5HXtSHkEZpMYoAcSK/lYIxTiQOKaTk0AFf1TnvX8rAGa/qmJz60AfytYr+qYHNNI5yTTgeOtAH8rFf1T96/lYr+qfvQAEgdaAcimtyc8/Sv5WyeelACAZNf1T5zQQSCM0m3FAH8rOMmgjBr+qU5zn9K/laPX/CgD+qiv5V+uK/qnzX8rWMUANxQRg1/VKc9f0r+Vsjnp+VAH9U9FFFABRRRQAUUUUAJ3r+Viv6p+9fysUAf1TnmgDFfysUUAf1T49hRj2FfysUUAf1TkkDOM1/KyRjB96QHBoySaAP6px0paQdKWgD+VfNBJPWiigA7V/VRX8q/av6qKAP5WAOetf1SLkmnda/lYNAH9UxJB6Zr+VogetIK/qn6UAfysDk9adjvmmg4r+qfGKAP5WtuaQqAetGa/qmAwKAP5WKXOTSUDrQB/VNiv5WSSa/qnHav5WKAFwPWv6pN2TjH404jIo2j0oA/la6c009a/qnIFfysE5oA/qnoPSv5WKB1oAd07ikx71/VMOlLQB/KwOvWv6pAee9OIyKMACgBMZ60oGO1fysHrRQB/VRRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB//9k=" width="100px" height="100px">\n        </td>\n        <td class="col2-2">\n          <div>\u626b\u7801\u67e5\u770b\u6258\u8fd0\u534f\u8bae\u3001\u516c\u53f8\u4fe1\u606f\u3001\u8d27\u6b3e\u67e5\u8be2</div>\n          <div>\u603b\u516c\u53f8\u5730\u5740\uff1a\u897f\u5b89\u5e02\u6e2f\u52a1\u533a\u6e2f\u52a1\u5357\u8def\u767e\u5229\u5a01\u56fd\u9645\u7535\u5546\u4ea7\u4e1a\u56ed</div>\n          <div>\u516c\u53f8\u7f51\u5740\uff1awww.bltwlgs.com</div>\n          <div>\u4e1a\u52a1\u7535\u8bdd\uff1a02986253988\uff0c13309221294</div>\n          <div>\u8d22\u52a1\u7535\u8bdd\uff1a02986237928</div>\n          <div>\u5ba2\u670d\u7535\u8bdd\uff1a02986457606</div>\n          <div>\u6295\u8bc9\u7535\u8bdd\uff1a15389278107</div>\n        </td>\n      </tr>\n    </table>\n    </div>\n    '),S='<div class="header" style="margin-top: 20px;">\u9655\u897f\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41(\u56de\u6267\u5355)</div>\n  <table>\n      <tr>\n        <td class="col3 txt-bold">\u5230\u8d27\u7ad9:'.concat(l.company_name||"",'</td>\n        <td class="col3 txt-bold">\u53d1\u8d27\u7ad9:').concat(l.site_name||"",'</td>\n        <td class="col3 txt-bold">\u5355\u53f7:').concat(l.order_code||"",'</td>\n      </tr>\n      <tr>\n        <td class="txt-bold" colspan="3">\u65e5\u671f:').concat(x,'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col3-1">').concat(f,'</td>\n        <td class="col3-2 txt-bold">\u6536\u8d27\u4eba:').concat(l.getcustomer_name||"",'</td>\n        <td class="col3-2 txt-bold">\u7535\u8bdd:').concat(l.getcustomer_mobile||"",'</td>\n      </tr>\n      <tr>\n        <td class="col3-1">').concat(y,'</td>\n        <td class="col3-2">\u53d1\u8d27\u4eba:').concat(l.sendcustomer_name||"",'</td>\n        <td class="col3-2">\u7535\u8bdd:').concat(l.sendcustomer_mobile||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <th class="split"></th>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col4">\u8d27\u6b3e:').concat(l.order_amount||"",'</td>\n        <td class="col4">\u8fd0\u8d39:').concat(b,'</td>\n        <td class="col4">\u8fd0\u4ef7:').concat(l.trans_amount||"",'</td>\n        <td class="col4">\u6298\u540e:').concat(l.trans_discount||"",'</td>\n      </tr>\n      <tr>\n        <td class="col4">\u4fdd\u989d:').concat(l.insurance_amount||"",'</td>\n        <td class="col4">\u4fdd\u8d39[').concat(b,"]:").concat(l.insurance_fee||"",'</td>\n        <td class="col4">\u57ab\u4ed8:').concat(l.order_advancepay_amount||"",'</td>\n        <td class="col4">\u9001\u8d27\u8d39:').concat(l.deliver_amount||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-1 txt-bold">\u63d0\u4ed8\u5408\u8ba1:').concat(v.totalAccount,'</td>\n        <td class="col2-2">\u8d26\u53f7:').concat(l.bank_account||"",'</td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col2-2">\u8d27\u7269\u540d\u79f0:').concat(l.order_name||"",'</td>\n        <td class="col2-1"> </td>\n      </tr>\n    </table>\n    <table>\n      <tr>\n        <td class="col3-1">\u6536\u8d27\u4eba\u7b7e\u5b57:</td>\n        <td class="col3-2">\u4ed8\u6b3e\u65b9\u5f0f\uff1a\u5fae\u4fe1/\u652f\u4ed8\u5b9d/\u73b0\u91d1/\u94f6\u884c\u8f6c\u8d26 </td>\n        <td class="col3-3">\u9001\u8d27\u4eba\u7b7e\u5b57:</td>\n      </tr>\n    </table>\n  '),C=_;return h&&(C="".concat(_).concat(S)),C='<div class="order-box">'.concat(C,"</div>"),C}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="\n  <style>\n  .order-box{height: 292mm;}\n  .content, .header {text-align: center;}\n  table {width: 100%; border-collapse: collapse; border-spacing: 0;}\n  table td {border: 1px solid #ccc; font-size: 10px; padding: 4px; text-align: left; line-height: 150%;}\n  .col3 {width: 33%;}\n  .col3-1 {width: 10%;}\n  .col3-2 {width: 45%;}\n  .txt-bold {font-weight: bold; font-size: 12px;}\n  .split {width: 100%; height: 5px;}\n  .col4 {width: 25%;}\n  .col2-1 {width: 35%;}\n  .col2-2 {width: 65%;}\n  .desc {font-size: 8px;}\n  </style>",a=document.querySelector("#printOrderWebview");a.send("webview-print-render",{html:"".concat(t).concat(e)})}function m(e){var t=e.selectedRows,a=void 0===t?[]:t,n=e.type,r=void 0===n?"":n,o="",c=1;a=a.sort(function(e,t){return e.sendcustomer_name.localeCompare(t.sendcustomer_name)});var s=0;a.forEach(function(e){var t="";e.order_code&&e.order_code.split(",").length,t=e.order_code.replace(/,/gi,", "),Number(e.trans_discount||0),s+=Number(e.pay_amount||0),o+="<tr>\n        <td>".concat(c,"</td>\n        <td>").concat(e.bank_account||"","</td>\n        <td>").concat(e.sendcustomer_name||"","</td>\n        <td>").concat(e.pay_amount||"","</td>\n        <td>").concat(t||"","</td>\n        </tr>"),c++});var d="\n    <style>\n    table {width: 100%; border-collapse: collapse; border-spacing: 0;}\n    table th { font-weight: bold; }\n    table th, table td {border: 1px solid #ccc; font-size: 14px; padding: 4px; text-align: left; line-height: 150%;}\n    .header {text-align: center;}\n    </style>",u='\n    <table>\n      <thead>\n        <tr>\n          <td colspan="5" class="header">\u9655\u897f\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41</td>\n        </tr>\n        <tr>\n          <th style="width:30px;">\u5e8f\u53f7</th>\n          <th style="width:90px;">\u8d26\u53f7</th>\n          <th style="width:60px;">\u53d1\u8d27\u5ba2\u6237</th>\n          <th style="width:60px;">\u4ed8\u6b3e\u91d1\u989d</th>\n          <th style="width:280px;">\u7968\u53f7</th>\n        </tr>\n      </thead>\n      <tbody>\n      '.concat(o,'\n        <tr>\n          <td>\u603b\u8ba1</td>\n          <td colspan="4">').concat(s,"</td>\n        </tr>\n      </tbody>\n    </table>\n    ");if("print"!=r){var p=document.getElementById("printExcelFrame").contentWindow.document,m=p.getElementById("bd");m.innerHTML="".concat(d).concat(u);var h=new Date,f="".concat(h.getFullYear()).concat(h.getMonth()+1).concat(h.getDate()).concat(h.getTime(),".xlsx"),y=l.dialog.showSaveDialogSync({defaultPath:f}),b=i.a.utils.table_to_book(m,{raw:!0});i.a.writeFile(b,y)}else{var g=document.querySelector("#printWebview");console.log("type: ",r),g.send("webview-print-render",{printHtml:"".concat(d).concat(u)})}}function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TSC TTP-244CE",n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i="\n    <style>\n    .label-box { height: 45mm; padding: 0px; margin: 0px; }\n    .content {width: 100%; padding-left: 0px;}\n    .content, .header {text-align: center; font-size: 14px; position: relative;}\n    .label {padding: 0 8px; text-align: left;  font-size: 16px }\n    .header, .footer {text-align: center;}\n    .header {font-size: 14px; font-weight: 700;}\n    .label-time {font-size: 14px;}\n    .label-left {font-size: 14px;}\n    .label-right {font-size: 48px; font-weight: 700;}\n    .label-sender {position: absolute; right: 10px; top: 10px; font-size: 46px}\n    .label-name {padding-top: 5px; font-size: 20px; font-weight: 700;}\n    .label-goods {font-size: 14px}\n    </style>",c="",l="";o.sender_name&&1==o.sender_name.length&&(l=o.sender_name),n.remember_sender&&(c='<div class="label-sender">'.concat(l,"</div>"));for(var s="",d='\n      <div class="label-box">\n      <div class="header">\u8fdc\u8bda\u5b9d\u8def\u901a\u7269\u6d41  <span class="label-time">'.concat(r()(new Date).format("YYYY-MM-DD"),'</span></div>\n      <div class="content">\n      <div class="label">\n      <span class="label-left">').concat(e.site_name,'</span> &rarr; <span class="label-right">').concat(e.company_name,'</span>\n      </div>\n      <div class="label label-name">\n      <span class="username">').concat(e.getcustomer_name,'</span> <span class="">').concat(e.order_code," - ").concat(e.order_num,"</span>\n      </div>\n      ").concat(c,'\n      <div class="label label-goods">\u8d27\u7269\u540d\u79f0\uff1a').concat(e.order_name||"","</div>\n      </div>\n      </div>\n      "),u=0;u<Number(t||1);u++)s+=d;if(e.order_code){var p=document.querySelector("#printLabelWebview1");p.send("webview-print-render",{html:"".concat(i).concat(s),deviceName:a})}}},"0Vxr":function(e,t,a){"use strict";a.r(t);a("T2oS");var n,r,o,i,c,l,s,d,u,p,m,h,f,y,b,g,w=a("W9HT"),v=(a("IzEo"),a("bx4M")),x=a("p0pE"),_=a.n(x),S=(a("+L6B"),a("2/Rp")),C=(a("miYZ"),a("tsqr")),E=(a("iQDF"),a("+eQT")),k=(a("O3gP"),a("lrIw")),O=(a("2qtc"),a("kLXV")),A=a("d6i3"),L=a.n(A),M=a("1l/V"),T=a.n(M),V=(a("14J3"),a("BMrR")),D=(a("jCWc"),a("kPKH")),F=a("2Taf"),R=a.n(F),I=a("vZ4D"),N=a.n(I),z=a("l4Ni"),P=a.n(z),H=a("ujKo"),B=a.n(H),K=a("MhPg"),j=a.n(K),Y=(a("7Kak"),a("9yH6")),U=(a("OaEy"),a("2fM7")),q=(a("5NDa"),a("5rEg")),Q=(a("FJo9"),a("L41K")),X=(a("y8nQ"),a("Vl3Y")),G=a("q1tI"),W=a.n(G),Z=a("MuoO"),J=a("wd/R"),$=a.n(J),ee=a("CkN6"),te=(a("zHco"),a("7Qib")),ae=a("gA67"),ne=a.n(ae),re=(a("17x9"),a("S+eF"),a("/mOS")),oe=a("XS0u"),ie=X["a"].Item,ce=(Q["a"].Step,q["a"].TextArea,U["a"].Option),le=(Y["a"].Group,n=Object(Z["connect"])(function(e){var t=e.untrunkorder;return{untrunkorder:t}}),r=X["a"].create(),n(o=r((i=function(e){function t(e){var a;return R()(this,t),a=P()(this,B()(t).call(this,e)),a.getModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=e.receiverList;return W.a.createElement(X["a"],{layout:"inline"},W.a.createElement(V["a"],{gutter:{md:8,lg:24,xl:48}},W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u63a5\u8d27\u4eba"},t("receiver_id",{})(W.a.createElement(U["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},n.map(function(e){return W.a.createElement(ce,{key:e.courier_id,value:e.courier_id},e.courier_name)})))))))},a.onOkHandler=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form,o=t.receiverList,i=t.selectedRows,c=t.onReceiverModalCancel;r.validateFields(function(){var e=T()(L.a.mark(function e(t,a){var r,l,s;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r=i.map(function(e){return e.order_id}),l=o.filter(function(e){if(e.courier_id==a.receiver_id)return e}),a.order_id=r,a.receiver_name=l[0]&&l[0].courier_name,console.log(a),e.next=9,n({type:"untrunkorder/changeOrderReceiverAction",payload:a});case 9:s=e.sent,0==s.code&&c();case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.state={},a}return j()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onReceiverModalCancel;return W.a.createElement(O["a"],{title:"\u66f4\u6539\u63a5\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",className:ne.a.standardListForm,width:640,destroyOnClose:!0,visible:t,onOk:this.onOkHandler,onCancel:a},this.getModalContent())}}]),t}(G["PureComponent"]),o=i))||o),c=Object(Z["connect"])(function(e){var t=e.trunkorder;return{trunkorder:t}}),l=X["a"].create(),c(s=l((d=function(e){function t(e){var a;return R()(this,t),a=P()(this,B()(t).call(this,e)),a.onCarChange=function(e){for(var t,n=a.props,r=n.driverList,o=n.form,i=0;i<r.length;i++){var c=r[i];if(c.driver_plate==e){t=c;break}}t||o.setFieldsValue({driver_id:"",driver_name:"",driver_mobile:""})},a.onCarSelect=function(e,t){for(var n,r=t.props,o=a.props,i=o.driverList,c=o.form,l=0;l<i.length;l++){var s=i[l];if(s.driver_id==r.driverid){n=s;break}}n&&c.setFieldsValue({driver_name:n.driver_name,driver_mobile:n.driver_mobile})},a.renderCustomerOption=function(e){var t=k["a"].Option;return W.a.createElement(t,{key:e.driver_id,driverid:e.driver_id,value:"".concat(e.driver_id),text:e.driver_plate},e.driver_plate)},a.getModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=(e.branchCompanyList,e.currentCompany,e.driverList),r=e.lastCar,o={};return n.forEach(function(e){e.driver_id==r.driver_id&&Number(r.car_status)<3&&(o=e)}),W.a.createElement(X["a"],{layout:"inline",className:ne.a.entrunkForm},W.a.createElement(V["a"],{gutter:{md:8,lg:24,xl:48}},W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8f66\u724c\u53f7"},t("driver_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u8f66\u724c\u53f7"}],initialValue:"".concat(r.driver_id||"")})(W.a.createElement(k["a"],{size:"large",style:{width:"100%"},dataSource:n.map(a.renderCustomerOption),onSelect:a.onCarSelect,onChange:a.onCarChange,placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," ")))),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8f66\u4e3b\u59d3\u540d"},t("driver_name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8f66\u4e3b\u59d3\u540d"}],initialValue:o.driver_name})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))),W.a.createElement(V["a"],null,W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8054\u7cfb\u7535\u8bdd"},t("driver_mobile",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u7535\u8bdd"}],initialValue:o.driver_mobile})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8d27\u8f66\u7f16\u53f7"},t("car_code",{initialValue:r.car_code,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d27\u8f66\u7f16\u53f7"}]})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:!0}))))),W.a.createElement(V["a"],null,W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u62c9\u8d27\u65e5\u671f"},t("car_date",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u62c9\u8d27\u65e5\u671f"}],initialValue:$()((new Date).getTime())})(W.a.createElement(E["a"],{placeholder:"\u5168\u90e8",locale:te["b"],format:"YYYY-MM-DD",style:{width:"100%"}})))),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8d27\u8f66\u8d39\u7528"},t("car_fee",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d27\u8f66\u8d39\u7528"}],initialValue:r.car_fee||""})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))))},a.onOkHandler=function(e){e.preventDefault();var t=a.props,n=(t.dispatch,t.form),r=t.driverList,o=void 0===r?[]:r,i=t.onOk;n.validateFields(function(){var e=T()(L.a.mark(function e(t,a){var n,r;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:n=a,n.car_date&&n.car_date.valueOf&&(n.car_date="".concat(n.car_date.valueOf())),r=o.filter(function(e){if(e.driver_id==n.driver_id)return e}),r.length<=0?(n.driver_plate=n.driver_id,n.driver_id=0):(n.driver_plate=r[0].driver_plate,n.driver_id=Number(n.driver_id)),n.car_fee=Number(n.car_fee||0),n.car_code=n.car_code+"",i(n);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a}return j()(t,e),N()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancel;return W.a.createElement(O["a"],{title:"\u8d27\u7269\u88c5\u8f66",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",className:ne.a.standardListForm,width:700,destroyOnClose:!0,visible:t,onOk:this.onOkHandler,onCancel:a},this.getModalContent())}}]),t}(G["PureComponent"]),s=d))||s)||s),se=(u=Object(Z["connect"])(function(e){var t=e.trunkedorder;return{trunkedorder:t}}),p=X["a"].create(),u(m=p((h=function(e){function t(e){var a;return R()(this,t),a=P()(this,B()(t).call(this,e)),a.getModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=e.currentCompany,r=e.lastCar,o=e.carFeeModalEditable,i=2==n.company_type||!o;return W.a.createElement(X["a"],{layout:"inline"},W.a.createElement(V["a"],{gutter:{md:8,lg:24,xl:48}},W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u5206\u516c\u53f8"},n.company_name)),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8f66\u724c\u53f7"},r.driver_plate)),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8f66\u4e3b\u59d3\u540d"},r.driver_name)),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8054\u7cfb\u7535\u8bdd"},r.driver_mobile)),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8d27\u8f66\u7f16\u53f7"},r.car_code)),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u62c9\u8d27\u65e5\u671f"},$()(Number(r.car_date||0)).format("YYYY-MM-DD HH:mm:ss"))),W.a.createElement(D["a"],{md:12,sm:24},W.a.createElement(ie,{label:"\u8d27\u8f66\u8d39\u7528"},t("car_fee",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d27\u8f66\u8d39\u7528"}],initialValue:r.car_fee})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:i}))))))},a.onOkHandler=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form,o=t.onEntrunkModalCancel,i=t.lastCar,c=t.onSearch;r.validateFields(function(){var e=T()(L.a.mark(function e(t,a){var r;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return a.car_fee=Number(a.car_fee),a.confirm=1,e.next=6,n({type:"trunkedorder/updateCarFeeAction",payload:{car:Object.assign(i,a)}});case 6:r=e.sent,0==r.code&&(C["a"].success("\u8fd0\u8d39\u7ed3\u7b97\u6210\u529f"),c(),o());case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.state={},a}return j()(t,e),N()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onEntrunkModalCancel,n=e.carFeeModalEditable,r=[W.a.createElement(S["a"],{key:"btn-cancel",onClick:a},"\u53d6 \u6d88")];return n&&r.push(W.a.createElement(S["a"],{key:"btn-save",type:"primary",onClick:this.onOkHandler},"\u4fdd \u5b58")),W.a.createElement(O["a"],{title:"\u8d27\u7269\u88c5\u8f66",className:ne.a.standardListForm,width:700,destroyOnClose:!0,visible:t,footer:r,onCancel:a},this.getModalContent())}}]),t}(G["PureComponent"]),m=h))||m)||m),de=(f=Object(Z["connect"])(function(e){var t=e.customer,a=e.driver,n=e.company,r=e.trunkedorder,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{customer:t,driver:a,company:n,trunkedorder:r,site:o,car:i,receiver:c,loading:l.models.rule}}),y=X["a"].create(),f(b=y((g=function(e){function t(){var e,a;R()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=P()(this,(e=B()(t)).call.apply(e,[this].concat(r))),a.state={loading:!1,selectedRows:[],current:1,pageSize:20,entrunkModalVisible:!1,carFeeModalEditable:!0,departModalVisible:!1,cancelDepartModalVisible:!1,arriveModalVisible:!1,cancelArriveModalVisible:!1,cancelEntrunkModalVisible:!1,currentCompany:{},currentShipSite:{}},a.columns=[{title:"\u8d27\u5355\u53f7",width:"80px",sorter:!0,dataIndex:"order_code",align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"sendcustomer_name"},{title:"\u6536\u83b7\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"getcustomer_name"},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",sorter:!0,dataIndex:"order_amount"},{title:"\u5b9e\u6536\u8d27\u6b3e",width:"80px",sorter:!0,dataIndex:"order_real"},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount"},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return W.a.createElement("span",null,$()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u53d1\u8f66\u65f6\u95f4",width:"170px",dataIndex:"depart_date",render:function(e){return e&&W.a.createElement("span",null,$()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==oe["a"].company_type?(a.setState({currentCompany:oe["a"]}),oe["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.getDriverList=function(){var e=a.props,t=e.dispatch,n=(e.form,a.state.currentCompany);t({type:"driver/getDriverListAction",payload:{pageNo:1,pageSize:500,company_id:n.company_id}})},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;a.getLastCarInfo({isUseCarCode:!0}),o.validateFields(function(a,n){if(!a){Object.keys(n).forEach(function(e){n[e]||delete n[e]});var o=Object.assign({filter:n},e);r({type:"trunkedorder/getOrderListAction",payload:_()({pageNo:t||c,pageSize:l},o)}),r({type:"trunkedorder/getOrderStatisticAction",payload:_()({},o)})}}),a.standardTable.cleanSelectedKeys()},a.onRefTable=function(e){a.standardTable=e},a.handleStandardTableChange=function(){var e=T()(L.a.mark(function e(t,n,r){var o,i,c;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.state.pageSize,i={},c=1,r.field&&(i={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==o){e.next=10;break}return c=1,e.next=8,a.setState({pageSize:t.pageSize});case 8:e.next=11;break;case 10:t&&t.current&&(c=t.current);case 11:return e.next=13,a.setState({current:c});case 13:a.getOrderList(i,c);case 14:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=T()(L.a.mark(function e(t,n){var r,o,i;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=a.props,r.dispatch,o=r.company.branchCompanyList,r.form,i=o.filter(function(e){if(e.company_id==t)return e}),!(i.length>0)){e.next=5;break}return e.next=5,a.setState({currentCompany:i[0]});case 5:return e.next=7,a.getLastCarInfo();case 7:a.getDriverList(),a.handleSearch();case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onShipSiteSelect=function(){var e=T()(L.a.mark(function e(t){var n,r,o,i,c;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.site.entrunkSiteList,r=void 0===n?[]:n,o={},i=0;case 3:if(!(i<r.length)){e.next=11;break}if(c=r[i],c.site_id!=t){e.next=8;break}return o=c,e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:return e.next=13,a.setState({currentShipSite:o});case 13:a.getLastCarInfo();case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getLastCarInfo=function(){var e=T()(L.a.mark(function e(t){var n,r,o,i,c,l,s,d,u,p,m,h;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t&&t.isUseCarCode||!1,r=a.props,o=r.dispatch,i=r.form,c=a.state,l=c.currentCompany,s=void 0===l?{}:l,d=c.currentShipSite,u=void 0===d?{}:d,p=i.getFieldValue("car_code"),m={company_id:s.company_id,shipsite_id:u.site_id},p&&n&&(m.car_code=p),e.next=8,o({type:"car/getLastCarCodeAction",payload:m});case 8:return h=e.sent,e.abrupt("return",h);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({},1)},a.onCancelEntrunkOk=T()(L.a.mark(function e(){var t,n,r,o,i,c;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props,n=t.dispatch,r=t.car.lastCar,o=a.state.selectedRows,i=o.map(function(e){return e.order_id}),e.next=5,n({type:"trunkedorder/cancelEntrunkAction",payload:{order_id:i,car:r}});case 5:c=e.sent,0==c.code?(C["a"].success("\u53d6\u6d88\u88c5\u8f66\u6210\u529f\uff01"),a.onCancelEntrunkCancel(),setTimeout(function(){a.handleSearch()},1e3)):C["a"].error(c.msg);case 7:case"end":return e.stop()}},e)})),a.onCancelEntrunk=T()(L.a.mark(function e(){var t,n;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=!0,t.forEach(function(e){e.order_status>=3&&(n=!1)}),n){e.next=6;break}return C["a"].error("\u5df2\u53d1\u8f66\u8ba2\u5355\u4e0d\u80fd\u53d6\u6d88\u88c5\u8f66"),e.abrupt("return");case 6:a.setState({cancelEntrunkModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onCancelEntrunkCancel=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelEntrunkModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDepark=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({departModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDepartCancel=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({departModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDepartOk=function(){var e=T()(L.a.mark(function e(t){var n,r,o,i,c,l,s;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props,r=n.dispatch,o=n.car.lastCar,i=a.state,c=i.currentCompany,l=i.currentShipSite,t.shipsite_id=l.site_id,t.shipsite_name=l.site_name,t.company_id=c.company_id,e.next=7,r({type:"trunkedorder/departOrderAction",payload:{car_id:o.car_id,car:t}});case 7:s=e.sent,0==s.code?(C["a"].success("\u53d1\u8f66\u6210\u529f\uff01"),a.onDepartCancel(),setTimeout(function(){a.getLastCarInfo(),a.handleSearch()},1e3)):C["a"].error(s.msg);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelDepark=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDepartModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDepartCancel=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDepartModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDepartOk=T()(L.a.mark(function e(){var t,n,r,o,i;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props,n=t.dispatch,r=t.car.lastCar,o=a.state.currentCompany,a.setState({loading:!0}),e.next=5,n({type:"trunkedorder/updateCarStatusAction",payload:{car_id:r.car_id,car_status:2,car_code:r.car_code,company_id:o.company_id,shipsite_id:r.shipsite_id}});case 5:i=e.sent,a.setState({loading:!1}),0==i.code?(C["a"].success("\u53d6\u6d88\u53d1\u8f66\u6210\u529f\uff01"),a.onCancelDepartCancel(),setTimeout(function(){a.getLastCarInfo(),a.handleSearch()},1e3)):C["a"].error(i.msg);case 8:case"end":return e.stop()}},e)})),a.onArrive=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({arriveModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onArriveCancel=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({arriveModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onArriveOk=T()(L.a.mark(function e(){var t,n,r,o,i,c,l;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props,n=t.dispatch,r=t.car.lastCar,o=a.state,i=o.currentCompany,c=o.currentShipSite,e.next=4,n({type:"trunkedorder/updateCarStatusAction",payload:{car_id:r.car_id,car_status:4,car_code:r.car_code,company_id:i.company_id,shipsite_id:c.site_id}});case 4:if(l=e.sent,0!=l.code){e.next=12;break}return C["a"].success("\u5230\u8f66\u786e\u8ba4\u6210\u529f\uff01"),e.next=9,n({type:"car/getLastCarCodeAction",payload:{company_id:i.company_id,shipsite_id:c.site_id}});case 9:a.onArriveCancel(),e.next=13;break;case 12:C["a"].error(l.msg);case 13:case"end":return e.stop()}},e)})),a.onCancelArrive=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelArriveModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelArriveCancel=T()(L.a.mark(function e(){return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelArriveModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelArriveOk=T()(L.a.mark(function e(){var t,n,r,o,i,c,l;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props,n=t.dispatch,r=t.car.lastCar,o=a.state,i=o.currentCompany,c=o.currentShipSite,e.next=4,n({type:"trunkedorder/updateCarStatusAction",payload:{car_id:r.car_id,car_status:3,car_code:r.car_code,company_id:i.company_id,shipsite_id:c.site_id}});case 4:if(l=e.sent,0!=l.code){e.next=12;break}return C["a"].success("\u53d6\u6d88\u5230\u8f66\u6210\u529f\uff01"),e.next=9,n({type:"car/getLastCarCodeAction",payload:{company_id:i.company_id,shipsite_id:c.site_id}});case 9:a.onCancelArriveCancel(),e.next=13;break;case 12:C["a"].error(l.msg);case 13:case"end":return e.stop()}},e)})),a.onCarFeeModalShow=function(){a.setState({entrunkModalVisible:!0,carFeeModalEditable:!0})},a.onCarFeeOnlyShow=function(){a.setState({entrunkModalVisible:!0,carFeeModalEditable:!1})},a.onCancelCarFeeConfirmModalShow=function(){var e=a.props.car.lastCar;O["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u7b2c ".concat(e.car_code," \u8f66\u7684\u8fd0\u8d39\u4e48"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onCancelCarFeeConfirm})},a.onCancelCarFeeConfirm=T()(L.a.mark(function e(){var t,n,r,o;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props,n=t.dispatch,r=t.car.lastCar,e.next=3,n({type:"trunkedorder/updateCarFeeAction",payload:{car:Object.assign(r,{confirm:0})}});case 3:o=e.sent,0==o.code&&(C["a"].success("\u53d6\u6d88\u8fd0\u8d39\u7ed3\u7b97\u6210\u529f"),a.getLastCarInfo());case 5:case"end":return e.stop()}},e)})),a.onPrintOrder=function(){var e=a.props,t=e.car.lastCar,n=e.company.branchCompanyList,r=(a.state.selectedRows,oe["a"]);n.forEach(function(e){e.company_id==t.company_id&&(r=e)}),O["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u6253\u5370".concat(r.company_name,"\u7b2c").concat(t.car_code,"\u8f66\u7684\u6240\u6709\u8d27\u7269\u6e05\u5355\u4e48\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a.onPrintOrderConfirm()}})},a.onPrintOrderConfirm=T()(L.a.mark(function e(){var t,n,r,o,i,c,l,s=arguments;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=a.props,r=n.car.lastCar,o=n.company.branchCompanyList,i=n.dispatch,c=oe["a"],o.forEach(function(e){e.company_id==r.company_id&&(c=e)}),e.next=6,i({type:"trunkedorder/queryOrderListAction",payload:{pageNo:0,pageSize:1e3,sorter:"getcustomer_name|ascend",filter:{company_id:c.company_id,car_code:r.car_code,shipsite_id:r.shipsite_id}}});case 6:l=e.sent,console.log(l),Object(re["b"])({selectedRows:l.orders,lastCar:r,type:t});case 9:case"end":return e.stop()}},e)})),a.onDownloadOrder=function(){var e=a.props,t=e.car.lastCar,n=e.company.branchCompanyList,r=(a.state.selectedRows,oe["a"]);n.forEach(function(e){e.company_id==t.company_id&&(r=e)}),O["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u4e0b\u8f7d".concat(r.company_name,"\u7b2c").concat(t.car_code,"\u8f66\u7684\u6240\u6709\u8d27\u7269\u6e05\u5355\u4e48\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a.onPrintOrderConfirm("pdf")}})},a.onEntrunkModalCancel=function(){a.setState({entrunkModalVisible:!1})},a.tableFooter=function(){var e=a.props.trunkedorder,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=(e.totalRealTransAmount,e.totalRealOrderAmount,e.totalAdvancepayAmount),c=e.totalDeliverAmount;return W.a.createElement("div",{className:ne.a.tableFooter},W.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),W.a.createElement("span",{className:ne.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),W.a.createElement("span",{className:ne.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),W.a.createElement("span",{className:ne.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),W.a.createElement("span",{className:ne.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),W.a.createElement("span",{className:ne.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return j()(t,e),N()(t,[{key:"componentDidMount",value:function(){var e=T()(L.a.mark(function e(){var t,a,n,r;return L.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getCompanyList",payload:{}});case 3:return a=e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{}});case 6:return n=e.sent,this.setCurrentCompany(a),n&&n.length>0&&(r=n.filter(function(e){return 3==e.site_type||2==e.site_type}),r.length>0&&this.setState({currentShipSite:r[0]})),e.next=11,this.getLastCarInfo();case 11:this.handleSearch(),this.getDriverList();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.company.branchCompanyList,n=e.site,r=n.entrunkSiteList,o=n.siteList,i=e.car.lastCar,c=void 0===i?{}:i,l=this.state,s=l.currentCompany,d=void 0===s?{}:s,u=l.currentShipSite,p=void 0===u?{}:u,m=!0,h=o,f={};return 1!=oe["c"].site_type&&2!=oe["a"].company_type||(m=!1,h=[oe["c"]],f.initialValue=oe["c"].site_id),W.a.createElement(X["a"],{onSubmit:this.handleSearch,layout:"inline"},W.a.createElement(ie,{label:"\u5206\u516c\u53f8"},t("company_id",{initialValue:d.company_id})(W.a.createElement(U["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,allowClear:1==oe["a"].company_type,style:{width:"100px"}},(1==oe["a"].company_type?a:[oe["a"]]).map(function(e){return W.a.createElement(ce,{key:e.company_id,value:e.company_id},e.company_name)})))),1==oe["a"].company_type&&W.a.createElement(ie,{label:"\u7ad9\u70b9"},t("site_id",f)(W.a.createElement(U["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:m},h.map(function(e){return W.a.createElement(ce,{key:e.site_id,value:e.site_id},e.site_name)})))),W.a.createElement(ie,{label:"\u914d\u8f7d\u90e8"},t("shipsite_id",{initialValue:p.site_id})(W.a.createElement(U["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(r||[]).map(function(e){return W.a.createElement(ce,{key:e.site_id,value:e.site_id},e.site_name)})))),W.a.createElement(ie,{label:"\u8d27\u8f66\u7f16\u53f7"},t("car_code",{initialValue:c.car_code})(W.a.createElement(q["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100px"}}))),W.a.createElement(ie,null,W.a.createElement(S["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.trunkedorder,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.company.branchCompanyList),i=t.car,c=i.carList,l=i.lastCar,s=t.driver.driverList,d=t.loading,u=this.state,p=u.selectedRows,m=u.current,h=u.pageSize,f=u.entrunkModalVisible,y=u.currentCompany,b=u.departModalVisible,g=u.cancelDepartModalVisible,x=u.arriveModalVisible,_=u.cancelArriveModalVisible,C=u.cancelEntrunkModalVisible,E=u.carFeeModalEditable,k=!0,A=!0;return["site_searchuser","site_orderuser"].indexOf(oe["b"].role_value)>=0&&(k=!1),["site_searchuser"].indexOf(oe["b"].role_value)>=0&&(A=!1),l.car_status<2&&2==oe["a"].company_type&&(k=!1),W.a.createElement("div",null,W.a.createElement(v["a"],{bordered:!1},W.a.createElement("div",{className:ne.a.tableList},W.a.createElement("div",{className:ne.a.tableListForm},this.renderForm()),W.a.createElement("div",{className:ne.a.tableListOperator},k&&W.a.createElement("span",null,0==l.confirm&&2==oe["a"].company_type&&W.a.createElement(S["a"],{type:"primary",onClick:this.onCarFeeModalShow},"\u8d27\u8f66\u8fd0\u8d39\u7ed3\u7b97"),1==l.confirm&&2==oe["a"].company_type&&W.a.createElement(S["a"],{type:"primary",onClick:this.onCancelCarFeeConfirmModalShow},"\u53d6\u6d88\u8d27\u8f66\u8fd0\u8d39\u7ed3\u7b97"),W.a.createElement(S["a"],{onClick:this.onCarFeeOnlyShow},"\u67e5\u770b\u8d27\u8f66\u4fe1\u606f"),l.car_status<3&&1==oe["a"].company_type&&W.a.createElement(S["a"],{onClick:this.onDepark},"\u53d1\u8f66"),3==l.car_status&&1==oe["a"].company_type&&W.a.createElement(S["a"],{onClick:this.onCancelDepark},"\u53d6\u6d88\u53d1\u8f66"),3==l.car_status&&1!=oe["a"].company_type&&W.a.createElement(S["a"],{onClick:this.onArrive},"\u5230\u8f66\u786e\u8ba4"),4==l.car_status&&1!=oe["a"].company_type&&W.a.createElement(S["a"],{onClick:this.onCancelArrive},"\u53d6\u6d88\u5230\u8f66"),p.length>0&&1==oe["a"].company_type&&W.a.createElement(S["a"],{onClick:this.onCancelEntrunk},"\u53d6\u6d88\u8d27\u7269\u88c5\u8f66")),A&&W.a.createElement("span",null,W.a.createElement(S["a"],{onClick:this.onPrintOrder},"\u8d27\u7269\u6e05\u5355\u6253\u5370"),W.a.createElement(S["a"],{onClick:this.onDownloadOrder},"\u8d27\u7269\u6e05\u5355\u4e0b\u8f7d"))),W.a.createElement(ee["a"],{onRef:this.onRefTable,className:ne.a.dataTable,selectedRows:p,loading:d,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:h,current:m,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},rowClassNameHandler:function(e,t){return 6===e.order_status?ne.a.settleColor:7===e.order_status?ne.a.payColor:""},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})),this.tableFooter()),W.a.createElement(se,{modalVisible:f,carFeeModalEditable:E,selectedRows:p,branchCompanyList:o,currentCompany:y,onEntrunkModalCancel:this.onEntrunkModalCancel,carList:c,lastCar:l,onSearch:this.handleSearch}),W.a.createElement(le,{modalVisible:b,carList:c,lastCar:l,driverList:s,onOk:this.onDepartOk,onCancel:this.onDepartCancel}),W.a.createElement(w["a"],{spinning:this.state.loading,delay:100},W.a.createElement(O["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onCancelDepartOk,onCancel:this.onCancelDepartCancel},W.a.createElement("p",null,"".concat(y.company_name,"\uff0c\u7b2c ").concat(l.car_code," \u8f66")),W.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u53d1\u8f66\u4e48\uff1f"))),W.a.createElement(O["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:x,onOk:this.onArriveOk,onCancel:this.onArriveCancel},W.a.createElement("p",null,"".concat(l.shipsite_name,"\u2014\u300b").concat(y.company_name,"\uff0c\u7b2c ").concat(l.car_code," \u8f66")),W.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8be5\u8f66\u5df2\u7ecf\u62b5\u8fbe\u4e86\u4e48\uff1f")),W.a.createElement(O["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:_,onOk:this.onCancelArriveOk,onCancel:this.onCancelArriveCancel},W.a.createElement("p",null,"".concat(y.company_name,"\uff0c\u7b2c ").concat(l.car_code," \u8f66")),W.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u8be5\u8f66\u62b5\u8fbe\u72b6\u6001\u4e48\uff1f")),W.a.createElement(O["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:C,onOk:this.onCancelEntrunkOk,onCancel:this.onCancelEntrunkCancel},W.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u53d6\u6d88\u52fe\u9009\u7684 ","".concat(p.length),"\u5355 \u8d27\u7269\u88c5\u8f66\u4e48\uff1f")))}}]),t}(G["PureComponent"]),b=g))||b)||b);t["default"]=de},"0iT5":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("5NDa"),a("5rEg")),g=a("jehZ"),w=a.n(g),v=(a("14J3"),a("BMrR")),x=(a("jCWc"),a("kPKH")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("p0pE"),E=a.n(C),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=a("q1tI"),P=a.n(z),H=a("MuoO"),B=a("wd/R"),K=a.n(B),j=a("B797"),Y=a("CkN6"),U=a("82qg"),q=a("b5ys"),Q=a.n(q),X=(a("S+eF"),a("XS0u")),G=N["a"].Item,W=I["a"].Option,Z=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text})},a.onDownAccountHandler=function(){var e=a.props,t=e.onAddAbnormal,n=e.form,r=e.abnormalTypes,o=void 0===r?[]:r;n.validateFields(function(e,a){var n;e||(o.forEach(function(e){e.abnormal_type_id==a.abnormal_type_id&&(n=e)}),n||(n={abnormal_type:a.abnormal_type_id,abnormal_type_id:0}),t(E()({abnormal_reason:a.abnormal_reason},n)))})},a.renderCustomerOption=function(e){var t=S["a"].Option;return P.a.createElement(t,{key:e.abnormal_type_id,abnormal_type_id:e.abnormal_type_id,text:e.abnormal_type,value:"".concat(e.abnormal_type_id)},e.abnormal_type)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=e.abnormalTypes;Object(j["d"])(n),n.length>0&&n[0],this.state.agencyFee;return P.a.createElement(y["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[P.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),P.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},P.a.createElement(N["a"],null,P.a.createElement(v["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(x["a"],null,P.a.createElement(G,{labelCol:{span:3,offset:2},label:"\u5f02\u5e38\u5355\u53f7"},n.length))),P.a.createElement(v["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(x["a"],null,P.a.createElement(G,w()({},this.formItemLayout,{label:"\u5f02\u5e38\u7c7b\u578b"}),r.getFieldDecorator("abnormal_type_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5f02\u5e38\u7c7b\u578b"}]})(P.a.createElement(S["a"],{size:"large",style:{width:"100%"},dataSource:o.map(this.renderCustomerOption),onSelect:this.onAbnormalSelect,placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}))))),P.a.createElement(v["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(x["a"],null,P.a.createElement(G,{labelCol:{span:3,offset:2},label:"\u5f02\u5e38\u539f\u56e0"},r.getFieldDecorator("abnormal_reason",{initialValue:""})(P.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(z["PureComponent"]),r=o))||r),J=(i=Object(H["connect"])(function(e){var t=e.common,a=e.customer,n=e.company,r=e.abnormal,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{common:t,customer:a,company:n,abnormal:r,site:o,car:i,receiver:c,loading:l.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",width:"80px",align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px"},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px"},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",width:"80px",render:function(e){return 1==e?"\u73b0\u4ed8":2==e?"\u56de\u4ed8":"\u63d0\u4ed8"}},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",sorter:!0,width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",width:"170px",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u4e2d\u8f6c",dataIndex:"transfer_type",width:"80px",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==X["a"].company_type?(a.setState({currentCompany:X["a"]}),X["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.company.branchCompanyList,o=r.filter(function(e){if(e.company_id==t)return e}),o.length>0&&a.setState({currentCompany:o[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.order_status=[3,5],o.abnormal_status=0,Object.keys(o).forEach(function(e){o[e]||delete o[e]});var i=Object.assign({filter:o},e);r({type:"abnormal/getOrderListAction",payload:E()({pageNo:t||c,pageSize:l},i)}),r({type:"abnormal/getOrderStatisticAction",payload:E()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onAddAbnormal=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=5,n({type:"abnormal/addAbnormalAction",payload:E()({abnormal_status:1,order_id:o},t)});case 5:i=e.sent,0==i.code?(u["a"].success("\u6dfb\u52a0\u5f02\u5e38\u6210\u529f\uff01"),a.handleSearch(),a.onAddAbnormalCancel()):u["a"].error(i.msg);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddAbnormalModal=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onAddAbnormalCancel=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrint=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=f()(m.a.mark(function e(){var t,n,r;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=f()(m.a.mark(function e(){var t,n,r;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.abnormal,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return P.a.createElement("div",{className:Q.a.tableFooter},P.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"abnormal/initOrderListAction"});case 3:return e.next=5,t({type:"company/getBranchCompanyList",payload:E()({},X["a"])});case 5:return a=e.sent,e.next=8,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 8:return e.sent,n=this.setCurrentCompany(a),e.next=12,t({type:"abnormal/getAbnormalTypeListAction",payload:{pageNo:1,pageSize:100,company_id:n.company_id}});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.siteList),r=e.company.branchCompanyList,o={};return r.length>0&&(o.initialValue=r[0].company_id||""),1!=X["a"].company_type&&(o.initialValue=X["a"].company_id||""),P.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},P.a.createElement(G,{label:"\u5206\u516c\u53f8"},t("company_id",o)(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"}},(1==X["a"].company_type?r:[X["a"]]).map(function(e){return P.a.createElement(W,{key:e.company_id,value:e.company_id},e.company_name)})))),P.a.createElement(G,{label:"\u8fd0\u5355\u53f7"},t("order_code",{})(P.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),P.a.createElement(G,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:X["c"].site_id})(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},n.map(function(e){return P.a.createElement(W,{key:e.site_id,value:e.site_id},e.site_name)})))),P.a.createElement(G,null,P.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.abnormal,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=t.abnormal.abnormalTypes,c=this.state,l=c.selectedRows,s=c.accountStatistic,u=c.current,p=c.pageSize,m=c.updateOrderModalVisible,h=c.settleModalVisible,f=c.downModalVisible,b=c.signModalVisible,g=c.cancelSignModalVisible,w=c.downloadModalVisible,v=c.printModalVisible,x=c.record,S=!0;return["site_searchuser"].indexOf(X["b"].role_value)>=0&&(S=!1),P.a.createElement("div",null,P.a.createElement(d["a"],{bordered:!1},P.a.createElement("div",{className:Q.a.tableList},P.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),P.a.createElement("div",{className:Q.a.tableListOperator},l.length>0&&S&&P.a.createElement("span",null,P.a.createElement(_["a"],{onClick:this.onAddAbnormalModal},"\u6dfb\u52a0\u4e3a\u5f02\u5e38"))),P.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:l,loading:o,className:Q.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),P.a.createElement(U["a"],{modalVisible:m,record:x,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),P.a.createElement(Z,{modalVisible:f,onAddAbnormal:this.onAddAbnormal,downCancel:this.onAddAbnormalCancel,selectedRows:l,abnormalTypes:i}),P.a.createElement(y["a"],{title:"\u53d6\u6d88\u7ed3\u8d26",visible:h,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:this.onSettleOk,onCancel:this.onSettleCancel},P.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(l.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(s.totalAccount," ")),P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f")),P.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onSignOk,onCancel:this.onSignCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),P.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),P.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:v,onOk:this.onPrintOk,onCancel:this.onPrintCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),P.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(z["PureComponent"]),l=s))||l)||l);t["default"]=J},"2uC3":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=a("p0pE"),m=a.n(p),h=a("rlhR"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=a("d6i3"),C=a.n(S),E=(a("miYZ"),a("tsqr")),k=a("1l/V"),O=a.n(k),A=a("2Taf"),L=a.n(A),M=a("vZ4D"),T=a.n(M),V=a("l4Ni"),D=a.n(V),F=a("ujKo"),R=a.n(F),I=a("MhPg"),N=a.n(I),z=(a("OaEy"),a("2fM7")),P=(a("y8nQ"),a("Vl3Y")),H=(a("iQDF"),a("+eQT")),B=a("q1tI"),K=a.n(B),j=a("MuoO"),Y=(a("wd/R"),a("B797"),a("CkN6")),U=a("/5VO"),q=a("sOv7"),Q=a.n(q),X=(a("S+eF"),a("XS0u")),G=a("80Er"),W=(H["a"].RangePicker,P["a"].Item),Z=z["a"].Option,J=(n=P["a"].create(),n((o=function(e){function t(e){var a;return L()(this,t),a=D()(this,R()(t).call(this,e)),a.onAddHandler=function(){var e,t=a.props,n=t.handleSearch,r=t.form,o=t.record,i=t.dispatch,c=t.onCancelModal,l=t.currentCompany,s=t.currentSite,d=t.customerTypes,u=a.state.dataSource,p=void 0===u?[]:u,m=p.length<=0?o.customerMobiles:p;m.forEach(function(t){t.mobile_id&&"".concat(t.mobile_id).indexOf("TMP-")>=0&&(t.mobile_id=0),1==t.mobile_type&&(e=t),delete t.__typename}),!e&&m.length>0&&(e=m[0],m[0].mobile_type=1),r.validateFields(function(){var t=O()(C.a.mark(function t(a,r){var u,p,h;return C.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:if(r.customer_mobile=e&&e.mobile||"",r.customerMobiles=m,r.company_id=l.company_id,r.site_id=s.site_id||0,d.forEach(function(e){e.customertype==r.customer_type&&(u=e)}),!u&&d.length>0&&(u=d[0]),u&&(r.customer_type=u.customertype,r.customertype_name=u.customertype_name,r.trans_vip_ratio=u.trans_vip_ratio),h="\u6dfb\u52a0\u6210\u529f",o&&o.customer_id){t.next=16;break}return t.next=13,i({type:"customer/createCustomerAction",payload:{customer:r,type:1}});case 13:p=t.sent,t.next=20;break;case 16:return t.next=18,i({type:"customer/updateCustomerAction",payload:{customer_id:[o.customer_id],customer:r,type:1}});case 18:p=t.sent,h="\u4fee\u6539\u6210\u529f";case 20:p&&0==p.code?(c(),n(),E["a"].success(h)):E["a"].error("\u6dfb\u52a0\u5931\u8d25");case 21:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())},a.notifyDataSource=function(e){console.log(99988888),a.setState({dataSource:e})},a.state={dataSource:[]},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a.col2Layout={md:10,sm:26},a}return N()(t,e),T()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelModal,n=e.record,r=e.form,o=(e.mobileList,e.customerTypes),i=void 0===o?[]:o;return console.log(n),K.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u53d1\u8d27\u5ba2\u6237",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[K.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),K.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},K.a.createElement(P["a"],null,K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u59d3\u540d"}),r.getFieldDecorator("customer_name",{initialValue:n.customer_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u7c7b\u578b"}),r.getFieldDecorator("customer_type",{initialValue:n.customer_type})(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},i.map(function(e){return K.a.createElement(Z,{key:e.customertype,value:e.customertype},e.customertype_name)})))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u8d26\u6237"}),r.getFieldDecorator("bank_account",{initialValue:n.bank_account})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"200px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u5730\u5740"}),r.getFieldDecorator("customer_address",{initialValue:n.customer_address})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"250px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u767b\u5f55\u8d26\u53f7"}),r.getFieldDecorator("username",{initialValue:n.username})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u5bc6\u7801"}),r.getFieldDecorator("password",{initialValue:n.password})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],{span:20},K.a.createElement(W,{wrapperCol:{span:16},labelCol:{span:4},label:"\u5907\u6ce8"},r.getFieldDecorator("remark",{initialValue:n.remark})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],{span:20},K.a.createElement(W,{wrapperCol:{span:16},labelCol:{span:4},label:"\u624b\u673a\u53f7"},K.a.createElement(U["a"],{dataSource:n.customerMobiles,notifyDataSource:this.notifyDataSource}))))))}}]),t}(B["PureComponent"]),r=o))||r),$=(i=Object(j["connect"])(function(e){var t=e.customer,a=e.company,n=e.site,r=e.receiver,o=e.loading;return{customer:t,company:a,site:n,receiver:r,loading:o.models.rule}}),c=P["a"].create(),i(l=c((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state=m()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},addModalVisible:!1,currentCompany:{},currentSite:{}},G["a"]),a.columns=[{title:"\u5ba2\u6237\u7c7b\u578b",dataIndex:"customertype_name",sorter:!0,align:"right",width:"80px"},{title:"\u59d3\u540d",sorter:!0,dataIndex:"customer_name",width:"80px"},{title:"\u7535\u8bdd",sorter:!0,dataIndex:"customer_mobile",width:"120px"},{title:"\u8d26\u6237",dataIndex:"bank_account",width:"150px"},{title:"\u7ad9\u70b9",dataIndex:"site_names",width:"100px",sorter:!0,render:function(e){return"".concat(e)}},{title:"\u8fd0\u8d39\u603b\u989d",dataIndex:"total_trans",width:"80px",sorter:!0},{title:"\u7968\u6570",dataIndex:"total_order",width:"80px",sorter:!0},{title:"\u6536\u8d27\u5730\u5740",dataIndex:"customer_address",width:"150px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchGetCustomerList=function(){var e=O()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=O()(C.a.mark(function e(t,n){var r,o;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.siteList,o=void 0===r?[]:r,o.forEach(function(e){e.site_id==t&&a.setState({currentCompany:{company_id:e.company_id},currentSite:e})});case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=O()(C.a.mark(function n(o,i){var s;return C.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.customer_mobile||delete i.customer_mobile,n.next=5,Object(G["l"])(f()(a),i);case 5:i=n.sent,s=Object.assign({filter:i,type:1},e),r({type:"customer/queryCustomerListAction",payload:m()({pageNo:t||c,pageSize:l},s)}),a.standardTable.cleanSelectedKeys();case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=O()(C.a.mark(function e(t,n,r){var o,i,c,l;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onAddModalShow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=a.state,n=t.currentCompany,r=t.currentSite,o=void 0===r?{}:r;if(n.company_id){if("edit"!=e){if(!o.site_id)return void y["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"});a.setState({record:{}})}a.setState({addModalVisible:!0})}else y["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u5206\u516c\u53f8"})},a.onAddModalCancel=function(){a.setState({addModalVisible:!1})},a.onDelCustomer=function(){var e=a.props.dispatch,t=a.state.selectedRows,n=(f()(a),[]);t.forEach(function(e){n.push(e.customer_id)}),y["a"].confirm({content:"\u786e\u5b9a\u5220\u9664\u6240\u9009\u8bb0\u5f55\u4e48\uff1f",onOk:function(){var t=O()(C.a.mark(function t(){var r;return C.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e({type:"customer/updateCustomerAction",payload:{customer:{is_delete:1},customer_id:n,type:1}});case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,0==r.code?(E["a"].success("\u5220\u9664\u5ba2\u6237\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},500)):E["a"].error(r.msg);case 7:case"end":return t.stop()}},t)}));function r(){return t.apply(this,arguments)}return r}()})},a.onRowDoubleClick=function(e,t,n){console.log(e,"888888"),a.setState({record:e}),a.onAddModalShow("edit")},a.onRowClick=function(e,t,a){},a}return N()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=O()(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,this.setState({currentCompany:X["a"]}),e.next=4,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 4:a=e.sent,a&&a.length>0&&this.setState({currentSite:a[0]}),t({type:"customer/queryCustomerTypesAction",payload:{pageNo:1,pageSize:100}}),this.getOrderList();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.site,r=(n.entrunkSiteList,n.siteList),o=void 0===r?[]:r,i=t.customer,c=(i.getCustomerList,i.sendCustomerList),l=i.customerTypes;return K.a.createElement(P["a"],{onSubmit:this.handleSearch,layout:"inline"},K.a.createElement(W,{label:"\u5ba2\u6237\u5206\u7c7b"},a("customer_type",{})(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},l.map(function(e){return K.a.createElement(Z,{key:e.customertype,value:e.customertype},e.customertype_name)})))),K.a.createElement(W,{label:"\u7ad9\u70b9"},a("site_id",{initialValue:X["c"].site_id})(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},onSelect:this.onSiteSelect,allowClear:3==X["c"].site_type},(3==X["c"].site_type?o:[X["c"]]).map(function(e){return K.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),K.a.createElement(W,{label:"\u59d3\u540d"},a("customer_name",{})(K.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=u["a"].Option;return K.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(G["i"])(e,t)},onChange:function(t){Object(G["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement(W,{label:"\u7535\u8bdd"},a("customer_mobile",{})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"},allowClear:!0}))),K.a.createElement(W,null,K.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.customer,n=a.customers,r=a.total,o=a.customerTypes,i=t.loading,c=t.dispatch,l=this.state,s=l.selectedRows,u=l.current,p=l.pageSize,m=l.addModalVisible,h=l.record,f=l.currentCompany,y=l.currentSite,b=!0;return["site_searchuser"].indexOf(X["b"].role_value)>=0&&(b=!1),K.a.createElement("div",null,K.a.createElement(d["a"],{bordered:!1},K.a.createElement("div",{className:Q.a.tableList},K.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),K.a.createElement("div",{className:Q.a.tableListOperator},b&&K.a.createElement(_["a"],{onClick:this.onAddModalShow},"\u6dfb\u52a0"),s.length>0&&b&&K.a.createElement("span",null,K.a.createElement(_["a"],{onClick:this.onDelCustomer},"\u5220\u9664"))),K.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:s,loading:i,className:Q.a.dataTable,rowKey:"customer_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){return""}}))),K.a.createElement(J,{modalVisible:m,record:h,dispatch:c,onCancelModal:this.onAddModalCancel,handleSearch:this.getOrderList,currentCompany:f,currentSite:y,customerTypes:o}))}}]),t}(B["PureComponent"]),l=s))||l)||l);t["default"]=$},"3x83":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("iQDF"),a("+eQT")),p=(a("O3gP"),a("lrIw")),m=(a("miYZ"),a("tsqr")),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=a("p0pE"),w=a.n(g),v=a("rlhR"),x=a.n(v),_=(a("2qtc"),a("kLXV")),S=(a("5NDa"),a("5rEg")),C=(a("14J3"),a("BMrR")),E=(a("jCWc"),a("kPKH")),k=(a("+L6B"),a("2/Rp")),O=a("2Taf"),A=a.n(O),L=a("vZ4D"),M=a.n(L),T=a("l4Ni"),V=a.n(T),D=a("ujKo"),F=a.n(D),R=a("MhPg"),I=a.n(R),N=(a("OaEy"),a("2fM7")),z=(a("y8nQ"),a("Vl3Y")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("B797"),U=a("CkN6"),q=a("82qg"),Q=a("ZeH8"),X=a.n(Q),G=(a("S+eF"),a("7Qib")),W=a("XS0u"),Z=a("80Er"),J=z["a"].Item,$=N["a"].Option,ee=(n=z["a"].create(),n((o=function(e){function t(e){var a;return A()(this,t),a=V()(this,F()(t).call(this,e)),a.onAgencyFeeSelect=function(e,t){a.setState({agencyFee:parseFloat(e)})},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state.agencyFee;n.validateFields(function(e,a){console.log(a),e||t({rate:r,bank_account:a.bank_account})})},a.state={agencyFee:0},a}return I()(t,e),M()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=Object(Y["d"])(n),i=n.length>0?n[0]:{},c=this.state.agencyFee;return H.a.createElement(_["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(k["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(k["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:X.a.modalForm},H.a.createElement(z["a"],null,H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u6761\u6570"},n.length))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u603b\u91d1\u989d"},o.totalActualGoodsFund||"0"," - \u4ee3\u529e\u8d39 *",H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",defaultValue:"0",onSelect:this.onAgencyFeeSelect,style:{width:"80px"}},H.a.createElement($,{value:"0"},"0\u2030"),H.a.createElement($,{value:"1"},"1\u2030"),H.a.createElement($,{value:"2"},"2\u2030"),H.a.createElement($,{value:"3"},"3\u2030"),H.a.createElement($,{value:"4"},"4\u2030"),H.a.createElement($,{value:"5"},"5\u2030")),o.totalTransFunds?H.a.createElement("span",null," `- (\u8fd0\u8d39) $",o.totalTransFunds,"`"):H.a.createElement("span",null),"="," ",o.totalActualGoodsFund-Math.ceil(o.totalActualGoodsFund*c/1e3)-o.totalTransFunds||0))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u6237\u4e3b"},i.getcustomer_name||"")),H.a.createElement(E["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u8d26\u6237"},r.getFieldDecorator("bank_account",{initialValue:i.bank_account})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},className:X.a.tableDetail,label:"\u660e\u7ec6"},H.a.createElement("table",null,H.a.createElement("thead",null,H.a.createElement("tr",null,H.a.createElement("th",null,"\u8fd0\u5355\u53f7"),H.a.createElement("th",null,"\u5b9e\u6536\u8d27\u6b3e"),H.a.createElement("th",null,"\u5e94\u6536\u8d27\u6b3e"))),H.a.createElement("tbody",null,n.map(function(e){return H.a.createElement("tr",null,H.a.createElement("td",null,e.order_code),H.a.createElement("td",null,e.order_real),H.a.createElement("td",null,e.order_amount))}))))))))}}]),t}(P["PureComponent"]),r=o))||r),te=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.pay,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,pay:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=z["a"].create(),i(l=c((s=function(e){function t(){var e,a;A()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=V()(this,(e=F()(t)).call.apply(e,[this].concat(r))),a.state=w()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},Z["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"80px"},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8fd0\u8d39",dataIndex:"trans_discount",sorter:!0,width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t},width:"80px"},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u4ed8\u6b3e\u65f6\u95f4",dataIndex:"pay_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchSendCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=b()(f.a.mark(function e(t,a){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=b()(f.a.mark(function n(o,i){var s;return f.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.order_amount=-1,i.order_status=7,n.next=6,Object(Z["k"])(x()(a),i);case 6:i=n.sent,i.pay_date?i.pay_date=i.pay_date.valueOf():delete i.pay_date,s=Object.assign({filter:i},e),r({type:"pay/getOrderListAction",payload:w()({pageNo:t||c,pageSize:l},s)}),r({type:"pay/getOrderStatisticAction",payload:w()({},s)}),a.standardTable.cleanSelectedKeys();case 12:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.downAccountHandle=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=5,n({type:"pay/downAccountAction",payload:{order_id:o,rate:t.rate,bank_account:t.bank_account}});case 5:i=e.sent,0==i.code?(m["a"].success("\u4e0b\u8d26\u6210\u529f\uff01"),a.onDownCancel(),a.handleSearch()):m["a"].error(i.msg);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDownAccount=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=b()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(Y["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSettleOrderAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(m["a"].success("\u53d6\u6d88\u7ed3\u7b97\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddAbnormal=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/updatePayAbnormalAction",payload:{order_id:r,order:{pay_status:0}}});case 5:o=e.sent,0==o.code?(m["a"].success("\u53d6\u6d88\u5f02\u5e38\u6210\u529f\uff01"),a.handleSearch()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddNormalModal=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:_["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5c06\u6240\u9009\u8ba2\u5355\u53d6\u6d88\u5f02\u5e38\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onAddAbnormal});case 1:case"end":return e.stop()}},e)})),a.onCancelSign=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/cancelDownAccountAction",payload:{order_id:r}});case 5:o=e.sent,o&&0==o.code?(m["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),a.handleSearch(),a.onCancelDownAccountCancel()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"pay/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(m["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):m["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/downloadAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(m["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e})},a.onCancelPay=b()(f.a.mark(function e(){var t,n,r,o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.props.dispatch,n=a.state.selectedRows,r=x()(a),o=!0,i=[],c=0,n.forEach(function(e){var t=j()(j()(Number(e.pay_date)||0)),a=j()((new Date).getTime()),n=a.diff(t,"hours");n>=24&&(o=!1),i.push(e.order_id),c+=Number(e.order_real||0)}),o){e.next=10;break}return m["a"].error("\u4e0b\u8d26\u8d85\u8fc724\u5c0f\u65f6\u4e0d\u53ef\u4ee5\u53d6\u6d88"),e.abrupt("return");case 10:_["a"].confirm({content:H.a.createElement("div",null,"\u786e\u5b9a\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f\u4e0b\u8d26\u6761\u6570\uff1a",n.length,"\uff1b\u4e0b\u8d26\u603b\u989d\uff1a",c),onOk:function(){var e=b()(f.a.mark(function e(){var a;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"pay/cancelDownAccountAction",payload:{order_id:i}});case 2:a=e.sent,a&&0==a.code?(m["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),r.handleSearch()):m["a"].error(a.msg);case 4:case"end":return e.stop()}},e)}));function a(){return e.apply(this,arguments)}return a}()});case 11:case"end":return e.stop()}},e)})),a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.pay,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return H.a.createElement("div",{className:X.a.tableFooter},H.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return I()(t,e),M()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){var t;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:w()({},W["a"])});case 3:t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),this.fetchSendCustomerList(),this.getOrderList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.site,r=(n.entrunkSiteList,n.siteList),o=void 0===r?[]:r,i=t.customer,c=(i.getCustomerList,i.sendCustomerList),l=t.company.branchCompanyList,s={};return H.a.createElement(z["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(J,{label:"\u5206\u516c\u53f8"},a("company_id",s)(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"80px"},allowClear:!0},l.map(function(e){return H.a.createElement($,{key:e.company_id,value:e.company_id},e.company_name)})))),H.a.createElement(J,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),H.a.createElement(J,{label:"\u8fd0\u8d39\u7c7b\u578b"},a("trans_type",{})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},H.a.createElement($,{key:2,value:2},"\u56de\u4ed8")))),H.a.createElement(J,{label:"\u7ad9\u70b9"},a("site_id",{})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},o.map(function(e){return H.a.createElement($,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(J,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(H.a.createElement(p["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=p["a"].Option;return H.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Z["i"])(e,t)},onChange:function(t){Object(Z["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),H.a.createElement(J,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),H.a.createElement(J,{label:"\u4ed8\u6b3e\u65e5\u671f"},a("pay_date",{initialValue:j()((new Date).getTime())})(H.a.createElement(u["a"],{locale:G["b"],format:"YYYY-MM-DD"}))),H.a.createElement(J,null,H.a.createElement(k["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.pay,n=a.orderList,r=a.total,o=t.loading,i=this.state,c=i.selectedRows,l=i.accountStatistic,s=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.settleModalVisible,h=i.downModalVisible,f=i.signModalVisible,y=i.cancelDownAccountModalVisible,b=i.downloadModalVisible,g=i.printModalVisible,w=i.record;return H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:X.a.tableList},H.a.createElement("div",{className:X.a.tableListForm},this.renderForm()),H.a.createElement(U["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:X.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(q["a"],{modalVisible:p,record:w,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),H.a.createElement(ee,{modalVisible:h,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:c}),H.a.createElement(_["a"],{title:"\u53d6\u6d88\u7ed3\u7b97",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(c.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(l.totalAccount," ")),H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u7b97\u4e48\uff1f")),H.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onCancelDownAccountOk,onCancel:this.onCancelDownAccountCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f")),H.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=te},"4RM8":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=a("p0pE"),m=a.n(p),h=a("rlhR"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=a("d6i3"),C=a.n(S),E=(a("miYZ"),a("tsqr")),k=a("1l/V"),O=a.n(k),A=a("2Taf"),L=a.n(A),M=a("vZ4D"),T=a.n(M),V=a("l4Ni"),D=a.n(V),F=a("ujKo"),R=a.n(F),I=a("MhPg"),N=a.n(I),z=(a("OaEy"),a("2fM7")),P=(a("y8nQ"),a("Vl3Y")),H=(a("iQDF"),a("+eQT")),B=a("q1tI"),K=a.n(B),j=a("MuoO"),Y=(a("wd/R"),a("B797"),a("CkN6")),U=a("/5VO"),q=a("sOv7"),Q=a.n(q),X=(a("S+eF"),a("XS0u")),G=a("80Er"),W=(H["a"].RangePicker,P["a"].Item),Z=z["a"].Option,J=(n=P["a"].create(),n((o=function(e){function t(e){var a;return L()(this,t),a=D()(this,R()(t).call(this,e)),a.btnClicked=!1,a.onAddHandler=function(){if(!a.btnClicked){a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3);var e,t=a.props,n=t.handleSearch,r=t.form,o=t.record,i=t.dispatch,c=t.onCancelModal,l=t.currentCompany,s=t.customerTypes,d=a.state.dataSource,u=void 0===d?[]:d,p=u.length<=0?o.customerMobiles:u;p.forEach(function(t){t.mobile_id&&"".concat(t.mobile_id).indexOf("TMP-")>=0&&(t.mobile_id=0),1==t.mobile_type&&(e=t),delete t.__typename}),!e&&p.length>0&&(e=p[0],p[0].mobile_type=1),r.validateFields(function(){var t=O()(C.a.mark(function t(a,r){var d,u,m;return C.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=2;break}return t.abrupt("return");case 2:if(r.customer_mobile=e&&e.mobile||"",r.customerMobiles=p,r.company_id=l.company_id,s.forEach(function(e){e.customertype==r.customer_type&&(d=e)}),!d&&s.length>0&&(d=s[0]),d&&(r.customer_type=d.customertype,r.customertype_name=d.customertype_name,r.trans_vip_ratio=d.trans_vip_ratio),m="\u6dfb\u52a0\u6210\u529f",o&&o.customer_id){t.next=15;break}return t.next=12,i({type:"customer/createCustomerAction",payload:{customer:r,type:2}});case 12:u=t.sent,t.next=19;break;case 15:return t.next=17,i({type:"customer/updateCustomerAction",payload:{customer_id:[o.customer_id],customer:r,type:2}});case 17:u=t.sent,m="\u4fee\u6539\u6210\u529f";case 19:u&&0==u.code?(c(),n(),E["a"].success(m)):E["a"].error("\u6dfb\u52a0\u5931\u8d25");case 20:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())}},a.notifyDataSource=function(e){a.setState({dataSource:e})},a.state={dataSource:[]},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a.col2Layout={md:10,sm:26},a}return N()(t,e),T()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelModal,n=e.record,r=e.form,o=(e.mobileList,e.customerTypes),i=void 0===o?[]:o;return K.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u6536\u8d27\u5ba2\u6237",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[K.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),K.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},K.a.createElement(P["a"],null,K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u59d3\u540d"}),r.getFieldDecorator("customer_name",{initialValue:n.customer_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u7c7b\u578b"}),r.getFieldDecorator("customer_type",{initialValue:n.customer_type})(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},i.map(function(e){return K.a.createElement(Z,{key:e.customertype,value:e.customertype},e.customertype_name)})))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u8d26\u6237"}),r.getFieldDecorator("bank_account",{initialValue:n.bank_account})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"200px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u5730\u5740"}),r.getFieldDecorator("customer_address",{initialValue:n.customer_address})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"250px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u767b\u5f55\u8d26\u53f7"}),r.getFieldDecorator("username",{initialValue:n.username})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}})))),K.a.createElement(g["a"],this.col2Layout,K.a.createElement(W,v()({},this.formItemLayout,{label:"\u5bc6\u7801"}),r.getFieldDecorator("password",{initialValue:n.password})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],{span:20},K.a.createElement(W,{wrapperCol:{span:16},labelCol:{span:4},label:"\u5907\u6ce8"},r.getFieldDecorator("remark",{initialValue:n.remark})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),K.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(g["a"],{span:20},K.a.createElement(W,{wrapperCol:{span:16},labelCol:{span:4},label:"\u624b\u673a\u53f7"},K.a.createElement(U["a"],{dataSource:n.customerMobiles,notifyDataSource:this.notifyDataSource}))))))}}]),t}(B["PureComponent"]),r=o))||r),$=(i=Object(j["connect"])(function(e){var t=e.customer,a=e.company,n=e.site,r=e.receiver,o=e.loading;return{customer:t,company:a,site:n,receiver:r,loading:o.models.rule}}),c=P["a"].create(),i(l=c((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},addModalVisible:!1,currentCompany:{}},a.columns=[{title:"\u5206\u516c\u53f8",dataIndex:"company_id",sorter:!0,width:"80px",render:function(e){var t=a.props.company.branchCompanyList,n="";return t.forEach(function(t){t.company_id==e&&(n=t.company_name)}),K.a.createElement("span",null,n)}},{title:"\u5ba2\u6237\u7c7b\u578b",dataIndex:"customertype_name",sorter:!0,align:"right",width:"80px"},{title:"\u59d3\u540d",dataIndex:"customer_name",sorter:!0,width:"100px"},{title:"\u7535\u8bdd",dataIndex:"customer_mobile",width:"120px"},{title:"\u8d26\u6237",dataIndex:"bank_account",width:"150px"},{title:"\u8fd0\u8d39\u603b\u989d",dataIndex:"total_trans",sorter:!0,width:"80px"},{title:"\u7968\u6570",dataIndex:"total_order",sorter:!0,width:"80px"},{title:"\u6536\u8d27\u5730\u5740",dataIndex:"customer_address",width:"150px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==X["a"].company_type?(a.setState({currentCompany:X["a"]}),X["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchGetCustomerList=function(){var e=O()(C.a.mark(function e(t){var n;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=O()(C.a.mark(function e(t,n){var r,o;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.company.branchCompanyList,o=void 0===r?[]:r,o.forEach(function(e){e.company_id==t&&a.setState({currentCompany:e})}),t||a.setState({currentCompany:{}}),setTimeout(function(){a.handleSearch()},500);case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize,s=i.currentCompany,d=void 0===s?{}:s;o.validateFields(function(){var n=O()(C.a.mark(function n(o,i){var s;return C.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return 2==X["a"].company_type?i.company_id=X["a"].company_id:d.company_id&&(i.company_id=d.company_id),i.customer_mobile||delete i.customer_mobile,n.next=6,Object(G["l"])(f()(a),i);case 6:i=n.sent,s=Object.assign({filter:i,type:2},e),r({type:"customer/queryCustomerListAction",payload:m()({pageNo:t||c,pageSize:l},s)}),a.standardTable.cleanSelectedKeys();case 10:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=O()(C.a.mark(function e(t,n,r){var o,i,c,l;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onAddModalShow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",t=a.state.currentCompany;t.company_id?("edit"!=e&&a.setState({record:{}}),a.setState({addModalVisible:!0})):y["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u5206\u516c\u53f8"})},a.onAddModalCancel=function(){a.setState({addModalVisible:!1})},a.onDelCustomer=function(){var e=a.props.dispatch,t=a.state.selectedRows,n=(f()(a),[]);t.forEach(function(e){n.push(e.customer_id)}),y["a"].confirm({content:"\u786e\u5b9a\u5220\u9664\u6240\u9009\u8bb0\u5f55\u4e48\uff1f",onOk:function(){var t=O()(C.a.mark(function t(){var r;return C.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e({type:"customer/updateCustomerAction",payload:{customer:{is_delete:1},customer_id:n,type:0}});case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:r=t.t0,0==r.code?(E["a"].success("\u5220\u9664\u5ba2\u6237\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},500)):E["a"].error(r.msg);case 7:case"end":return t.stop()}},t)}));function r(){return t.apply(this,arguments)}return r}()})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onAddModalShow("edit")},a.onRowClick=function(e,t,a){},a}return N()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=O()(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:m()({},X["a"])});case 3:a=e.sent,this.setCurrentCompany(a),t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),t({type:"customer/queryCustomerTypesAction",payload:{pageNo:1,pageSize:100}}),this.getOrderList();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.state.currentCompany,a=void 0===t?{}:t,n=this.props,r=n.form.getFieldDecorator,o=n.site,i=(o.entrunkSiteList,o.normalSiteList),c=void 0===i?[]:i,l=n.customer,s=l.getCustomerList,d=(l.sendCustomerList,l.customerTypes),p=n.company.branchCompanyList,m={},h=!1,f=!0,y={};return 1!=X["a"].company_type?m.initialValue=X["a"].company_id||"":(h=!0,m.initialValue=a.company_id||""),"site_orderuser"==X["b"].role_value&&(f=!1,y.initialValue=X["c"].site_id),K.a.createElement(P["a"],{onSubmit:this.handleSearch,layout:"inline"},K.a.createElement(W,{label:"\u5206\u516c\u53f8"},r("company_id",m)(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",onChange:this.onCompanySelect,style:{width:"100px"},allowClear:h},(1==X["a"].company_type?p:[X["a"]]).map(function(e){return K.a.createElement(Z,{key:e.company_id,value:e.company_id},e.company_name)})))),K.a.createElement(W,{label:"\u5ba2\u6237\u5206\u7c7b"},r("customer_type",{})(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},d.map(function(e){return K.a.createElement(Z,{key:e.customertype,value:e.customertype},e.customertype_name)})))),K.a.createElement(W,{label:"\u7ad9\u70b9"},r("site_id",y)(K.a.createElement(z["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:f},("site_orderuser"==X["b"].role_value?[X["c"]]:c).map(function(e){return K.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),K.a.createElement(W,{label:"\u59d3\u540d"},r("customer_name",{})(K.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:s.map(function(e){var t=u["a"].Option;return K.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(G["g"])(e,t)},onChange:function(t){Object(G["f"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement(W,{label:"\u7535\u8bdd"},r("customer_mobile",{})(K.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"},allowClear:!0}))),K.a.createElement(W,null,K.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.customer,n=a.customers,r=a.total,o=a.customerTypes,i=t.loading,c=t.dispatch,l=this.state,s=l.selectedRows,u=l.current,p=l.pageSize,m=l.addModalVisible,h=l.record,f=l.currentCompany;return K.a.createElement("div",null,K.a.createElement(d["a"],{bordered:!1},K.a.createElement("div",{className:Q.a.tableList},K.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),K.a.createElement("div",{className:Q.a.tableListOperator},K.a.createElement(_["a"],{onClick:this.onAddModalShow},"\u6dfb\u52a0"),s.length>0&&K.a.createElement("span",null,K.a.createElement(_["a"],{onClick:this.onDelCustomer},"\u5220\u9664"))),K.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:s,loading:i,className:Q.a.dataTable,rowKey:"customer_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){return""}}))),K.a.createElement(J,{modalVisible:m,record:h,dispatch:c,onCancelModal:this.onAddModalCancel,handleSearch:this.getOrderList,currentCompany:f,customerTypes:o}))}}]),t}(B["PureComponent"]),l=s))||l)||l);t["default"]=$},"4ca5":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c=a("bx4M"),l=(a("+L6B"),a("2/Rp")),s=(a("iQDF"),a("+eQT")),d=(a("5NDa"),a("5rEg")),u=(a("2qtc"),a("kLXV")),p=(a("miYZ"),a("tsqr")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("p0pE"),g=a.n(b),w=a("2Taf"),v=a.n(w),x=a("vZ4D"),_=a.n(x),S=a("l4Ni"),C=a.n(S),E=a("ujKo"),k=a.n(E),O=a("rlhR"),A=a.n(O),L=a("MhPg"),M=a.n(L),T=(a("OaEy"),a("2fM7")),V=(a("y8nQ"),a("Vl3Y")),D=a("q1tI"),F=a.n(D),R=a("MuoO"),I=a("wd/R"),N=a.n(I),z=(a("B797"),a("CkN6")),P=a("82qg"),H=a("VlJg"),B=a.n(H),K=(a("S+eF"),a("7Qib")),j=a("XS0u"),Y=a("80Er"),U=V["a"].Item,q=T["a"].Option,Q=(n=Object(R["connect"])(function(e){var t=e.customer,a=e.company,n=e.transconfirm,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,transconfirm:n,site:r,car:o,receiver:i,loading:c.models.rule}}),r=V["a"].create(),n(o=r((i=function(e){function t(){var e,a;v()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=C()(this,(e=k()(t)).call.apply(e,[this].concat(r))),a.state=g()({selectedRows:[],formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1},Y["a"]),a.ButtonClicked=!1,a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"80px"},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px"},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8fd0\u8d39",dataIndex:"trans_real",sorter:!0,width:"80px"},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",sorter:!0,width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t},width:"80px"},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",sorter:!0,width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",sorter:!0,width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",sorter:!0,width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",sorter:!0,width:"200px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u53d1\u8f66\u65f6\u95f4",dataIndex:"depart_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u7ed3\u7b97\u4eba",dataIndex:"settle_user_name",width:"80px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",sorter:!0,width:"80px"},{title:"\u4e2d\u8f6c",dataIndex:"transfer_type",sorter:!0,render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t},width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchSendCustomerList=function(){var e=y()(h.a.mark(function e(t){var n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,n){var r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var s;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.trans_status=1,i.trans_type||(i.trans_type=9),i.trans_confirmdate?i.trans_confirmdate=i.trans_confirmdate.valueOf():delete i.trans_confirmdate,n.next=7,Object(Y["k"])(A()(a),i);case 7:i=n.sent,s=Object.assign({filter:i},e),r({type:"transconfirm/getOrderListAction",payload:g()({pageNo:t||c,pageSize:l},s)}),r({type:"transconfirm/getOrderStatisticAction",payload:g()({},s)}),a.standardTable.cleanSelectedKeys();case 12:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onConfirmTransModal=function(){var e=a.state.selectedRows,t=e.map(function(e){return e.order_id}),n=!0;e.forEach(function(e){var t=N()(Number(e.trans_confirmdate)),a=N()((new Date).getTime()),r=a.diff(t,"days");r>1&&(n=!1)}),n?t.length<=0?p["a"].error("\u8bf7\u9009\u62e9\u9700\u8981\u53d6\u6d88\u786e\u8ba4\u8fd0\u8d39\u7684\u8bb0\u5f55"):u["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u53d6\u6d88\u6240\u9009\u8ba2\u5355\u7684\u8fd0\u8d39\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onConfirmTrans}):p["a"].info("\u8fd0\u8d39\u786e\u8ba424\u5c0f\u65f6\u540e\uff0c\u4e0d\u53ef\u4ee5\u53d6\u6d88\u8fd0\u8d39\u786e\u8ba4")},a.onConfirmTrans=y()(h.a.mark(function e(){var t,n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.ButtonClicked){e.next=2;break}return e.abrupt("return");case 2:return a.ButtonClicked=!0,setTimeout(function(){a.ButtonClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),o={order_id:r,company_id:j["a"].company_id},e.next=10,t({type:"transconfirm/cancelConfirmTransAction",payload:o});case 10:i=e.sent,0==i.code?(p["a"].success("\u53d6\u6d88\u6210\u529f\uff01"),setTimeout(function(){a.handleSearch()},1e3)):p["a"].error(i.msg);case 12:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,a){},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.transconfirm,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return F.a.createElement("div",{className:B.a.tableFooter},F.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),F.a.createElement("span",{className:B.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),F.a.createElement("span",{className:B.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),F.a.createElement("span",{className:B.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),F.a.createElement("span",{className:B.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),F.a.createElement("span",{className:B.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return M()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t,a;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:j["a"]});case 3:return a=e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{}});case 6:Object(Y["c"])(this,{}),a&&a.length>0&&this.setState({currentCompany:a[0]}),this.getOrderList();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.customer,n=(a.getCustomerList,a.sendCustomerList),r=e.company.branchCompanyList,o=e.site.siteList,i={};return F.a.createElement(V["a"],{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(U,{label:"\u5206\u516c\u53f8"},t("company_id",i)(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"200px"},allowClear:!0},r.map(function(e){return F.a.createElement(q,{key:e.company_id,value:e.company_id},e.company_name)})))),F.a.createElement(U,{label:"\u7ad9\u70b9"},t("site_id",{})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},(3==j["c"].site_type?o:[j["c"]]).map(function(e){return F.a.createElement(q,{key:e.site_id,value:e.site_id},e.site_name)})))),F.a.createElement(U,{label:"\u8fd0\u8d39"},t("trans_type",{initialValue:2})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},F.a.createElement(q,{value:1},"\u73b0\u4ed8"),F.a.createElement(q,{value:2},"\u56de\u4ed8")))),F.a.createElement(U,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},t("sendcustomer_id")(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSendCustomerSelect,style:{width:"200px"},allowClear:!0,showSearch:!0,optionLabelProp:"children",onPopupScroll:this.onSendCustomerScroll,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},n.map(function(e){return F.a.createElement(q,{key:e.get,value:e.customer_id},e.customer_name)})))),F.a.createElement(U,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},t("sendcustomer_mobile",{})(F.a.createElement(d["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),F.a.createElement(U,{label:"\u65e5\u671f"},t("trans_confirmdate",{initialValue:N()()})(F.a.createElement(s["a"],{locale:K["b"],format:"YYYY-MM-DD",allowClear:!0}))),F.a.createElement(U,{label:"\u8fd0\u5355\u53f7"},t("order_code",{})(F.a.createElement(d["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"250px"},allowClear:!0}))),F.a.createElement(U,{label:"\u6709\u65e0\u8d27\u6b3e"},t("order_amount",{initialValue:-1})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},F.a.createElement(q,{value:0},"\u65e0"),F.a.createElement(q,{value:-1},"\u6709")))),F.a.createElement(U,null,F.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.transconfirm,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,s=i.selectedRows,d=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.record,h=!0;return["site_searchuser","site_admin"].indexOf(j["b"].role_value)>=0&&(h=!1),F.a.createElement("div",null,F.a.createElement(c["a"],{bordered:!1},F.a.createElement("div",{className:B.a.tableList},F.a.createElement("div",{className:B.a.tableListForm},this.renderForm()),F.a.createElement("div",{className:B.a.tableListOperator},s.length>0&&h&&F.a.createElement("span",null,F.a.createElement(l["a"],{onClick:this.onConfirmTransModal},"\u53d6\u6d88\u786e\u8ba4\u8fd0\u8d39"),F.a.createElement(l["a"],{onClick:this.onPrint},"\u6253\u5370"))),F.a.createElement(z["a"],{onRef:this.onRefTable,selectedRows:s,loading:o,className:B.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:d,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),F.a.createElement(P["a"],{modalVisible:p,record:m,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}))}}]),t}(D["PureComponent"]),o=i))||o)||o);t["default"]=Q},5:function(e,t){},6:function(e,t){},"6L+x":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("2Taf"),E=a.n(C),k=a("vZ4D"),O=a.n(k),A=a("l4Ni"),L=a.n(A),M=a("ujKo"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=(a("iQDF"),a("+eQT")),N=a("q1tI"),z=a.n(N),P=a("MuoO"),H=(a("wd/R"),a("CkN6")),B=a("o6JX"),K=a.n(B),j=(a("XS0u"),I["a"].RangePicker,R["a"].Item),Y=F["a"].Option,U=(n=R["a"].create(),n((o=function(e){function t(e){var a;return E()(this,t),a=L()(this,T()(t).call(this,e)),a.onAbnormalSelect=function(e,t){},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.record,o=void 0===r?{}:r;n.validateFields(function(e,a){if(!e){a.trans_ratio&&(a.trans_ratio=Number(a.trans_ratio));var n={site:a};o.site_id&&(n.ids=[o.site_id]),t(n)}})},a.renderCustomerOption=function(e){var t=S["a"].Option;return z.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return D()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form;return z.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u7ad9\u70b9",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[z.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),z.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:K.a.modalForm},z.a.createElement(R["a"],null,z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7ad9\u70b9\u540d\u79f0"}),r.getFieldDecorator("site_name",{initialValue:n.site_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7ad9\u70b9\u540d\u79f0"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7ad9\u70b9\u7535\u8bdd"}),r.getFieldDecorator("site_mobile",{initialValue:n.site_mobile,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7ad9\u70b9\u7535\u8bdd"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7ad9\u70b9\u7c7b\u578b"}),r.getFieldDecorator("site_type",{initialValue:n.site_type||1,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7ad9\u70b9\u7c7b\u578b"}]})(z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},z.a.createElement(Y,{key:1,value:1},"\u666e\u901a\u7ad9\u70b9"),z.a.createElement(Y,{key:2,value:2},"\u914d\u8f7d\u7ad9"),z.a.createElement(Y,{key:3,value:3},"\u603b\u90e8")))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u8ba2\u5355\u53f7\u524d\u7f00"}),r.getFieldDecorator("site_orderprefix",{initialValue:n.site_orderprefix,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8be5\u7ad9\u70b9\u7684\u8ba2\u5355\u53f7\u524d\u7f00"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{className:K.a.formItemNoBreak,label:"\u5e94\u6253\u6b3e"}),"\u897f\u5b89\u6536\u8fd0\u8d39 + \u897f\u5b89\u4fdd\u8d39 + \u9001\u8d27\u8d39 - \u57ab\u4ed8 - \u603b\u8fd0\u8d39*",r.getFieldDecorator("trans_ratio",{initialValue:n.trans_ratio,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u603b\u8fd0\u8d39\u7cfb\u6570"}]})(z.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}}))," - \u5df2\u6253\u6b3e")))))}}]),t}(N["PureComponent"]),r=o))||r),q=(i=Object(P["connect"])(function(e){var t=e.site,a=e.company,n=e.loading;return{site:t,company:a,loading:n.models.rule}}),c=R["a"].create(),i(l=c((s=function(e){function t(){var e,a;E()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=L()(this,(e=T()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},addModalVisible:!1},a.columns=[{title:"\u7ad9\u70b9\u540d\u79f0",dataIndex:"site_name",width:"80px"},{title:"\u7ad9\u70b9\u7535\u8bdd",dataIndex:"site_mobile",width:"80px"},{title:"\u7ad9\u70b9\u7c7b\u578b",dataIndex:"site_type",width:"80px",render:function(e){return 3==e?"\u603b\u90e8":2==e?"\u88c5\u914d\u7ad9":"\u666e\u901a\u7ad9\u70b9"}},{title:"\u8ba2\u5355\u53f7\u524d\u7f00",dataIndex:"site_orderprefix",width:"80px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.branchCompanyList,r.form,a.fetchCompanySiteList(t),i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.normalSiteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]}),a.fetchExpenseTypeList({siteId:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=a.props,t=e.dispatch,n=e.form,r=a.state;r.current,r.pageSize,r.currentCompany;n.validateFields(function(e,n){e||(t({type:"site/getSiteListAction",payload:{}}),a.standardTable.cleanSelectedKeys())})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.site,r=t.ids,o=a.props.dispatch,e.next=4,o({type:"site/addSite",payload:{site:n,ids:r}});case 4:i=e.sent,i&&0==i.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelModalClick()):u["a"].error(i&&i.msg||"\u6dfb\u52a0\u5931\u8d25");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!0,record:{}});case 1:case"end":return e.stop()}},e)})),a.onCancelModalClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onModalShow=function(){a.setState({addModalVisible:!0})},a.onModalCancel=function(){a.setState({addModalVisible:!1})},a.onSiteChange=function(e){console.log("site",e),e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onModalShow()},a}return D()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.props.dispatch,this.getOrderList();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.company,n=(a.branchCompanyList,a.branchTotal,t.site),r=n.siteList,o=void 0===r?[]:r,i=n.siteTotal,c=void 0===i?0:i,l=t.loading,s=this.state,u=s.selectedRows,p=s.current,m=s.pageSize,h=s.addModalVisible,f=s.record;return z.a.createElement("div",null,z.a.createElement(d["a"],{bordered:!1},z.a.createElement("div",{className:K.a.tableList},z.a.createElement("div",{className:K.a.tableListOperator},z.a.createElement(_["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddClick(!0)}},"\u6dfb\u52a0")),z.a.createElement(H["a"],{onRef:this.onRefTable,selectedRows:u,loading:l,className:K.a.dataTable,rowKey:"site_id",data:{list:o,pagination:{total:c,pageSize:m,current:p,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){}}))),z.a.createElement(U,{modalVisible:h,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelModalClick,record:f,selectedRows:u}))}}]),t}(N["PureComponent"]),l=s))||l)||l);t["default"]=q},"6wUN":function(e,t,a){"use strict";a.r(t);a("2qtc");var n,r,o,i,c=a("kLXV"),l=(a("IzEo"),a("bx4M")),s=(a("+L6B"),a("2/Rp")),d=(a("iQDF"),a("+eQT")),u=(a("5NDa"),a("5rEg")),p=(a("O3gP"),a("lrIw")),m=a("jehZ"),h=a.n(m),f=(a("miYZ"),a("tsqr")),y=a("d6i3"),b=a.n(y),g=a("1l/V"),w=a.n(g),v=a("p0pE"),x=a.n(v),_=a("2Taf"),S=a.n(_),C=a("vZ4D"),E=a.n(C),k=a("l4Ni"),O=a.n(k),A=a("ujKo"),L=a.n(A),M=a("rlhR"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=a("q1tI"),N=a.n(I),z=a("MuoO"),P=a("wd/R"),H=a.n(P),B=a("B797"),K=a("CkN6"),j=a("82qg"),Y=a("SLv7"),U=a.n(Y),q=a("7Qib"),Q=a("XS0u"),X=a("80Er"),G=R["a"].Item,W=F["a"].Option,Z=(n=Object(z["connect"])(function(e){var t=e.common,a=e.customer,n=e.company,r=e.accountlist,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{common:t,customer:a,company:n,accountlist:r,site:o,car:i,receiver:c,loading:l.models.rule}}),r=R["a"].create(),n(o=r((i=function(e){function t(){var e,a;S()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=O()(this,(e=L()(t)).call.apply(e,[this].concat(r))),a.state=x()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{},currentShipSite:{}},X["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",align:"right",sorter:!0,render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"sendcustomer_name"},{title:"\u6536\u83b7\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",sorter:!0,dataIndex:"order_amount"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",sorter:!0,dataIndex:"trans_discount"},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",sorter:!0,dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",sorter:!0,dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",sorter:!0,dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return N.a.createElement("span",null,e&&H()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u7ed3\u7b97\u65f6\u95f4",width:"170px",dataIndex:"settle_date",render:function(e){return N.a.createElement("span",null,e&&H()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u4ed8\u6b3e\u65f6\u95f4",width:"170px",dataIndex:"pay_date",render:function(e){return N.a.createElement("span",null,e&&H()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u5206\u516c\u53f8",width:"80px",dataIndex:"company_name"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=w()(b.a.mark(function e(t,n){var r,o,i;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]}),Object(X["b"])(T()(a),{company_id:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({sorter:"create_date|desc"},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;i.sendCustomerSearch,i.getCustomerSearch;o.validateFields(function(){var n=w()(b.a.mark(function n(o,i){var s;return b.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(X["k"])(T()(a),i);case 4:i=n.sent,5==i.order_status?i.order_status=[3,5]:6==i.order_status?i.order_status=[6,7]:i.order_status=[3,7],i.settle_date&&(i.settle_date=i.settle_date.valueOf()),1==Q["a"].company_type&&3!=Q["c"].site_type&&(i.site_id=Q["c"].site_id),s=Object.assign({filter:i},e),r({type:"accountlist/getOrderListAction",payload:x()({pageNo:t||c,pageSize:l},s)}),r({type:"accountlist/getOrderStatisticAction",payload:x()({},s)}),a.standardTable.cleanSelectedKeys();case 12:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=w()(b.a.mark(function e(t,n,r){var o,i,c,l;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onSignOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/signAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(f["a"].success("\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onSignCancel()):f["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onSign=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onSignCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=w()(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(B["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/settleOrderAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(f["a"].success("\u6838\u5bf9\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):f["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onCancelSign=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelSignCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelSignOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(f["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onCancelSignCancel()):f["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=w()(b.a.mark(function e(){var t,n,r;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"accountlist/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(f["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):f["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=w()(b.a.mark(function e(){var t,n,r;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"accountlist/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(f["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):f["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.accountlist,t=e.total,n=e.totalOrderAmount,r=e.totalRealOrderAmount,o=e.totalTransAmount,i=e.totalInsurancefee,c=e.totalAdvancepayAmount,l=e.totalDeliverAmount,s=e.totalLatefee,d=e.totalBonusfee;return N.a.createElement("div",{className:U.a.tableFooter},N.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",r||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",o||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",c||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",l||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",i||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u7968\u6570\uff1a",t||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",s||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u5956\u91d1\uff1a",d||"0"))},a}return D()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=w()(b.a.mark(function e(){var t,a,n;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:x()({},Q["a"])});case 3:return e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 6:a=e.sent,2==Q["a"].company_type&&(Object(X["b"])(this,{company_id:Q["a"].company_id}),this.setState({currentCompany:Q["a"]})),Object(X["c"])(this,{}),a&&a.length>0&&(n=a.filter(function(e){return 3==e.site_type||2==e.site_type}),n.length>0&&this.setState({currentShipSite:n[0]})),t({type:"common/initOrderListAction"});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=n.getCustomerList,o=n.sendCustomerList,i=t.company.branchCompanyList,c=(t.site.entrunkSiteList,this.state.currentShipSite,{}),l={},m=1==Q["a"].company_type;return 1!=Q["a"].company_type&&(l.initialValue=Q["a"].company_id||""),N.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(G,h()({label:"\u5206\u516c\u53f8"},c),a("company_id",l)(N.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:m},(2==Q["a"].company_type?[Q["a"]]:i).map(function(e){return N.a.createElement(W,{key:e.company_id,value:e.company_id},e.company_name)})))),N.a.createElement(G,h()({label:"\u6709\u65e0\u8d27\u6b3e"},c),a("order_amount",{initialValue:-1})(N.a.createElement(F["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},N.a.createElement(W,{value:0},"\u65e0"),N.a.createElement(W,{value:-1},"\u6709")))),N.a.createElement(G,h()({label:"\u6536\u8d27\u4eba\u59d3\u540d"},c),a("getcustomer_id")(N.a.createElement(p["a"],{size:"large",style:{width:"100%"},dataSource:r.map(function(e){var t=p["a"].Option;return N.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(X["g"])(e,t)},onChange:function(t){Object(X["f"])(e,t)},allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),N.a.createElement(G,h()({label:"\u6536\u8d27\u4eba\u7535\u8bdd"},c),a("getcustomer_mobile",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),N.a.createElement(G,h()({label:"\u53d1\u8d27\u4eba\u59d3\u540d"},c),a("sendcustomer_id")(N.a.createElement(p["a"],{size:"large",style:{width:"100%"},dataSource:o.map(function(e){var t=p["a"].Option;return N.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(X["i"])(e,t)},onChange:function(t){Object(X["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),N.a.createElement(G,h()({label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},c),a("sendcustomer_mobile",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),N.a.createElement(G,h()({label:"\u7ed3\u7b97\u72b6\u6001"},c),a("order_status")(N.a.createElement(F["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},N.a.createElement(W,{value:6},"\u5df2\u7ed3\u7b97"),N.a.createElement(W,{value:5},"\u672a\u7ed3\u7b97")))),N.a.createElement(G,h()({label:"\u65e5\u671f"},c),a("settle_date",{initialValue:H()()})(N.a.createElement(d["a"],{locale:q["b"],format:"YYYY-MM-DD"}))),N.a.createElement(G,h()({label:"\u8fd0\u5355\u53f7"},c),a("order_code",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"220px"}}))),N.a.createElement(R["a"].Item,h()({},c,{className:U.a.tableListOperator}),N.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.accountlist,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.company.branchCompanyList,t.car),i=(o.carList,o.lastCar,t.loading),s=this.state,d=s.selectedRows,u=s.accountStatistic,p=s.current,m=s.pageSize,h=s.updateOrderModalVisible,f=s.settleModalVisible,y=s.signModalVisible,b=s.cancelSignModalVisible,g=s.downloadModalVisible,w=s.printModalVisible,v=s.record;return N.a.createElement("div",null,N.a.createElement(l["a"],{bordered:!1},N.a.createElement("div",{className:U.a.tableList},N.a.createElement("div",{className:U.a.tableListForm},this.renderForm()),N.a.createElement(K["a"],{onRef:this.onRefTable,selectedRows:d,loading:i,className:U.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:m,current:p,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 6===e.order_status?U.a.settleColor:7===e.order_status?U.a.payColor:""}})),this.tableFooter()),N.a.createElement(j["a"],{modalVisible:h,record:v,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),N.a.createElement(c["a"],{title:"\u786e\u8ba4\u7ed3\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSettleOk,onCancel:this.onSettleCancel},N.a.createElement("p",null,"\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(d.length,"\uff0c\u7ed3\u7b97\u603b\u989d ").concat(u.totalAccount," ")),N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f")),N.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onSignOk,onCancel:this.onSignCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),N.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),N.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onPrintOk,onCancel:this.onPrintCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),N.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(I["PureComponent"]),o=i))||o)||o);t["default"]=Z},7:function(e,t){},"7Qib":function(e,t,a){"use strict";a.d(t,"c",function(){return c}),a.d(t,"a",function(){return l});var n=a("wd/R"),r=a.n(n),o=a("Z0Lh"),i=a.n(o);a.d(t,"b",function(){return i.a});a("XDpg");function c(e){e({type:"ajaxLoading/showLoading",payload:{}})}function l(e){e({type:"ajaxLoading/hideLoading",payload:{}})}r.a.locale("zh-cn")},"80Er":function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return s}),a.d(t,"c",function(){return u}),a.d(t,"h",function(){return m}),a.d(t,"f",function(){return y}),a.d(t,"g",function(){return g}),a.d(t,"i",function(){return v}),a.d(t,"d",function(){return _}),a.d(t,"e",function(){return C}),a.d(t,"k",function(){return k}),a.d(t,"l",function(){return A}),a.d(t,"j",function(){return M});a("O3gP"),a("lrIw"),a("miYZ");var n=a("tsqr"),r=a("d6i3"),o=a.n(r),i=a("1l/V"),c=a.n(i),l=(a("q1tI"),{currentGetCustomer:{},currentSendCustomer:{},getCustomerNameChangeTimer:0,sendCustomerNameChangeTimer:0,currentSender:{},currentReceiver:{}});function s(e){return d.apply(this,arguments)}function d(){return d=c()(o.a.mark(function e(t){var a,n,r=arguments;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},n=t.props.dispatch,e.next=4,n({type:"customer/getCustomerListAction",payload:{filter:a}});case 4:case"end":return e.stop()}},e)})),d.apply(this,arguments)}function u(e){return p.apply(this,arguments)}function p(){return p=c()(o.a.mark(function e(t){var a,n,r=arguments;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},n=t.props.dispatch,e.next=4,n({type:"customer/sendCustomerListAction",payload:{filter:a}});case 4:case"end":return e.stop()}},e)})),p.apply(this,arguments)}function m(e,t){return h.apply(this,arguments)}function h(){return h=c()(o.a.mark(function e(t,a){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.setState({sendCustomerNameChangeTimer:(new Date).getTime()}),setTimeout(function(){var e=t.state.sendCustomerNameChangeTimer;(new Date).getTime()-e>300&&a&&u(t,{customer_name:a}),a||t.setState({currentSendCustomer:{}})},350);case 2:case"end":return e.stop()}},e)})),h.apply(this,arguments)}var f=!1;function y(e,t){return b.apply(this,arguments)}function b(){return b=c()(o.a.mark(function e(t,a){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.setState({getCustomerNameChangeTimer:(new Date).getTime()}),setTimeout(function(){var e=t.state,r=e.getCustomerNameChangeTimer,o=e.currentCompany;o&&o.company_id?(f=!1,(new Date).getTime()-r>300&&a&&s(t,{customer_name:a,company_id:o.company_id}),a||t.setState({currentGetCustomer:{}})):f||(n["a"].info("\u8bf7\u5148\u9009\u62e9\u5206\u516c\u53f8"),f=!0)},350);case 2:case"end":return e.stop()}},e)})),b.apply(this,arguments)}function g(e,t){return w.apply(this,arguments)}function w(){return w=c()(o.a.mark(function e(t,a){var n,r,i,c,l,s;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.props,r=n.customer,i=r.getCustomerList,r.sendCustomerList,n.form,l=0;case 2:if(!(l<i.length)){e.next=10;break}if(s=i[l],s.customer_id!=a){e.next=7;break}return c=s,e.abrupt("break",10);case 7:l++,e.next=2;break;case 10:if(!c){e.next=13;break}return e.next=13,t.setState({currentGetCustomer:c});case 13:case"end":return e.stop()}},e)})),w.apply(this,arguments)}function v(e,t){return x.apply(this,arguments)}function x(){return x=c()(o.a.mark(function e(t,a){var n,r,i,c,l,s;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.props,r=n.customer,r.getCustomerList,i=r.sendCustomerList,n.form,l=0;case 2:if(!(l<i.length)){e.next=10;break}if(s=i[l],s.customer_id!=a){e.next=7;break}return c=s,e.abrupt("break",10);case 7:l++,e.next=2;break;case 10:if(!c){e.next=13;break}return e.next=13,t.setState({currentSendCustomer:c});case 13:case"end":return e.stop()}},e)})),x.apply(this,arguments)}function _(e,t,a){return S.apply(this,arguments)}function S(){return S=c()(o.a.mark(function e(t,a,n){return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a||("receiver"==n?t.setState({currentReceiver:{}}):t.setState({currentSender:{}}));case 1:case"end":return e.stop()}},e)})),S.apply(this,arguments)}function C(e,t,a){return E.apply(this,arguments)}function E(){return E=c()(o.a.mark(function e(t,a,n){var r,i,c,l,s,d,u,p,m;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=t.props.courier,i=r.receiverList,c=void 0===i?[]:i,l=r.senderList,s=void 0===l?[]:l,u="receiver"==n?c:s,p=0;case 3:if(!(p<u.length)){e.next=11;break}if(m=u[p],m.courier_id!=a){e.next=8;break}return d=m,e.abrupt("break",11);case 8:p++,e.next=3;break;case 11:if(!d||"receiver"!=n){e.next=16;break}return e.next=14,t.setState({currentReceiver:d});case 14:e.next=19;break;case 16:if(!d||"sender"!=n){e.next=19;break}return e.next=19,t.setState({currentSender:d});case 19:case"end":return e.stop()}},e)})),E.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=c()(o.a.mark(function e(t){var a,n,r,i,c,l,s,d,u,p,m=arguments;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=m.length>1&&void 0!==m[1]?m[1]:{},n=m.length>2&&void 0!==m[2]?m[2]:"search",r=t.state,i=r.currentGetCustomer,c=r.currentSendCustomer,l=t.props.customer,s=l.sendCustomerList,d=l.getCustomerList,u=c,p=i,s.forEach(function(e){e.customer_id!=a.sendcustomer_name&&e.customer_id!=a.sendcustomer_id||(u=e)}),d.forEach(function(e){e.customer_id!=a.getcustomer_name&&e.customer_id!=a.getcustomer_id||(p=e)}),p&&p.customer_id?(a.getcustomer_id=p.customer_id,"edit"==n&&(a.getcustomer_name=p.customer_name,a.getcustomer_address=p.customer_address,a.getcustomer_type=p.customer_type||0)):a.getcustomer_id&&(a.getcustomer_name=a.getcustomer_id,delete a.getcustomer_id,"edit"==n&&(a.getcustomer_id=0)),u&&u.customer_id?(a.sendcustomer_id=u.customer_id,"edit"==n&&(a.sendcustomer_name=u.customer_name,a.sendcustomer_address=u.customer_address,a.sendcustomer_type=p.customer_type||0)):a.sendcustomer_id&&(a.sendcustomer_name=a.sendcustomer_id,delete a.sendcustomer_id,"edit"==n&&(a.sendcustomer_id=0)),e.abrupt("return",a);case 11:case"end":return e.stop()}},e)})),O.apply(this,arguments)}function A(e){return L.apply(this,arguments)}function L(){return L=c()(o.a.mark(function e(t){var a,n,r,i,c,l,s,d,u,p=arguments;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:{},p.length>2&&void 0!==p[2]?p[2]:"search",n=t.state,r=n.currentGetCustomer,i=n.currentSendCustomer,c=t.props.customer,l=c.sendCustomerList,s=c.getCustomerList,d=i,u=r,l.forEach(function(e){e.customer_id!=a.customer_name&&e.customer_id!=a.customer_id||(d=e)}),s.forEach(function(e){e.customer_id!=a.customer_name&&e.customer_id!=a.customer_id||(u=e)}),u&&u.customer_id?(a.customer_id=Number(u.customer_id),delete a.customer_name):a.customer_name||delete a.customer_name,d&&d.customer_id?(a.customer_id=Number(d.customer_id),delete a.customer_name):a.customer_name||delete a.customer_name,e.abrupt("return",a);case 11:case"end":return e.stop()}},e)})),L.apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return T=c()(o.a.mark(function e(t){var a,n,r,i,c,l,s,d,u,p,m,h=arguments;return o.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=h.length>1&&void 0!==h[1]?h[1]:{},h.length>2&&void 0!==h[2]?h[2]:"search",n=t.state,r=n.currentReceiver,i=n.currentSender,c=t.props.courier,l=c.receiverList,s=void 0===l?[]:l,d=c.senderList,u=void 0===d?[]:d,p=i,m=r,u.forEach(function(e){e.courier_id==a.sender_id&&(p=e)}),s.forEach(function(e){e.courier_id==a.receiver_id&&(m=e)}),p&&p.courier_id?a.sender_id=p.courier_id:delete a.sender_id,m&&m.courier_id?a.receiver_id=m.courier_id:delete a.receiver_id,e.abrupt("return",a);case 11:case"end":return e.stop()}},e)})),T.apply(this,arguments)}},"82qg":function(e,t,a){"use strict";a("2qtc");var n,r,o,i=a("kLXV"),c=(a("5NDa"),a("5rEg")),l=(a("+BJd"),a("mr32")),s=(a("14J3"),a("BMrR")),d=(a("jCWc"),a("kPKH")),u=a("jehZ"),p=a.n(u),m=(a("+L6B"),a("2/Rp")),h=a("d6i3"),f=a.n(h),y=(a("miYZ"),a("tsqr")),b=a("1l/V"),g=a.n(b),w=a("2Taf"),v=a.n(w),x=a("vZ4D"),_=a.n(x),S=a("l4Ni"),C=a.n(S),E=a("ujKo"),k=a.n(E),O=a("MhPg"),A=a.n(O),L=(a("OaEy"),a("2fM7")),M=(a("y8nQ"),a("Vl3Y")),T=a("q1tI"),V=a.n(T),D=a("s4P5"),F=a.n(D),R=a("XS0u"),I=(a("JSq2"),a("Bm+a")),N=M["a"].Item,z=L["a"].Option,P=(n=M["a"].create(),n((o=function(e){function t(e){var a;return v()(this,t),a=C()(this,k()(t).call(this,e)),a.computeTransDiscount=function(e){var t,n=a.props,r=n.currentCompany,o=n.currentGetCustomer,i=n.currentSendCustomer,c=n.form,l=c.getFieldValue("trans_originalamount")||0,s=c.getFieldValue("trans_amount")||0,d=c.getFieldValue("trans_type")||0,u=o.trans_vip_ratio||1,p=i.trans_vip_ratio||1,m=r.trans_regional_ratio||1,h=s;t=0==d?u:p,"type"==e?(h=Math.ceil(Number(l)*Number(t)*Number(m)),c.setFieldsValue({trans_discount:h||""})):"original"==e?(l&&m&&(s=Math.ceil(Number(l)*Number(m))),t&&m&&(h=Math.ceil(Number(l)*Number(t)*Number(m)),c.setFieldsValue({trans_discount:h||"",trans_amount:s||""}))):t&&m&&(h=Math.ceil(Number(s)*Number(t)),c.setFieldsValue({trans_discount:h||""}))},a.onTransTypeSelect=function(){a.computeTransDiscount("type")},a.onTransOriginalBlur=function(e){a.computeTransDiscount("original")},a.onTransBlur=function(e){a.computeTransDiscount()},a.okHandle=function(){var e=a.props,t=e.form,n=e.record,r=e.dispatch,o=e.onCancelModal,i=e.handleSearch;t.validateFields(function(){var e=g()(f.a.mark(function e(a,c){var l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return Object.keys(c).forEach(function(e){e.indexOf("amount")>=0?c[e]=Number(c[e]||0):c[e]||delete c[e]}),"undefined"!=typeof c["trans_type"]&&(c["trans_type"]=Number(c["trans_type"])),"undefined"!=typeof c["transfer_type"]&&(c["transfer_type"]=Number(c["transfer_type"])),c["trans_discount"]||(c["trans_discount"]=c["trans_amount"]),e.next=8,r({type:"order/updateOrderAction",payload:{order_id:n.order_id,order:c}});case 8:l=e.sent,0==l.code?(y["a"].success("\u4fee\u6539\u6210\u529f\uff01"),i(),o()):y["a"].error(l.msg),t.resetFields();case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},a.formItemSmallLayout={labelCol:{xs:{span:25},sm:{span:9}},wrapperCol:{xs:{span:23},sm:{span:15}}},a.colLayout={md:8,sm:24},a.colSmallLayout={md:4,sm:20},a.col2Layout={md:10,sm:26},a.colLargeLayout={md:16,sm:32},a.formItemMiniLayout={labelCol:{xs:{span:22},sm:{span:6}},wrapperCol:{xs:{span:26},sm:{span:18}}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a}return A()(t,e),_()(t,[{key:"render",value:function(){var e=this.props,t=e.record,a=e.modalVisible,n=e.onCancelModal,r=e.form,o=e.isEdit,u=void 0===o?0:o,h=[V.a.createElement(m["a"],{key:"btn-cancel",onClick:function(){return n()}},"\u53d6 \u6d88")];u&&h.push(V.a.createElement(m["a"],{key:"btn-save",type:"primary",onClick:this.okHandle},"\u4fdd \u5b58"));var f=["site_admin"].indexOf(R["b"].role_value)>=0,y="\u63d0\u4ed8";1==t.trans_type?y="\u73b0\u4ed8":2==t.trans_type&&(y="\u56de\u4ed8");var b=V.a.createElement(I["a"],{title:"\u7f16\u8f91\u6258\u8fd0\u5355"});return V.a.createElement(i["a"],{destroyOnClose:!0,title:b,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:a,onCancel:function(){return n()},footer:h,width:800,className:F.a.modalForm},V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u5206\u516c\u53f8"}),t.company_name)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u7ad9\u70b9"}),t.site_name))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u6536\u8d27\u4eba\u7535\u8bdd"}),t.getcustomer_mobile)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u6536\u8d27\u4eba\u59d3\u540d"}),t.getcustomer_name)),V.a.createElement(d["a"],null,1==t.customer_type?V.a.createElement(l["a"],{color:"orange",style:{marginTop:10}},"VIP"):"")),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"}),t.sendcustomer_mobile)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"}),t.sendcustomer_name))),f?V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],{span:38,className:F.a.formItemFloat},V.a.createElement(N,{style:{width:"220px",display:"inline-block"},labelCol:{span:7},wrapperCol:{span:7},label:"\u5c0f\u7968\u8fd0\u8d39"},r.getFieldDecorator("trans_originalamount",{initialValue:t.trans_originalamount})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u5c0f\u7968\u8fd0\u8d39",onBlur:this.onTransOriginalBlur,style:{width:"100px"}}))),V.a.createElement(N,{style:{width:"180px",display:"inline-block"},labelCol:{span:7},wrapperCol:{span:7},label:"\u8fd0\u8d39"},r.getFieldDecorator("trans_amount",{initialValue:t.trans_amount})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8d39",onBlur:this.onTransBlur,style:{width:"100px"},tabIndex:-1}))),V.a.createElement(N,{label:"",style:{width:"100px",display:"inline-block"},labelCol:{span:0},wrapperCol:{span:4}},r.getFieldDecorator("trans_type",{initialValue:t.trans_type})(V.a.createElement(L["a"],{placeholder:"\u5168\u90e8",style:{width:"70px"},tabIndex:-1,onSelect:this.onTransTypeSelect},V.a.createElement(z,{value:0},"\u63d0\u4ed8"),V.a.createElement(z,{value:1},"\u73b0\u4ed8"),V.a.createElement(z,{value:2},"\u56de\u4ed8")))),V.a.createElement(N,{style:{width:"210px",display:"inline-block"},labelCol:{span:7},wrapperCol:{span:10},label:"\u6298\u540e\u8fd0\u8d39"},r.getFieldDecorator("trans_discount",{initialValue:t.trans_discount})(V.a.createElement(c["a"],{placeholder:"",tabIndex:-1,style:{width:"80px"},disabled:!0}))))):V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u8fd0\u8d39"}),t.trans_amount,"(",y,")")),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u6298\u540e\u8fd0\u8d39"}),t.trans_discount))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u8d27\u6b3e"}),t.order_amount)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u94f6\u884c\u8d26\u53f7"}),t.bank_account))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4fdd\u4ef7\u91d1\u989d"}),t.insurance_amount)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4fdd\u4ef7\u8d39"}),t.insurance_fee))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u9001\u8d27\u8d39"}),t.deliver_amount)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u57ab\u4ed8\u91d1\u989d"}),t.order_advancepay_amount))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u8d27\u7269\u540d\u79f0"}),t.order_name)),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u6570\u91cf"}),t.order_num))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u8f6c\u8fdb/\u8f6c\u51fa"}),r.getFieldDecorator("transfer_type",{initialValue:t.transfer_type?t.transfer_type:""})(V.a.createElement(L["a"],{placeholder:"\u5168\u90e8",style:{width:"100%"},tabIndex:-1},V.a.createElement(z,{value:1},"\u8f6c\u51fa"),V.a.createElement(z,{value:2},"\u8f6c\u8fdb"))))),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u8d39"}),r.getFieldDecorator("transfer_amount",{initialValue:t.transfer_amount})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1}))))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u5730\u5740"}),r.getFieldDecorator("transfer_address",{initialValue:t.transfer_address})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1})))),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u7269\u6d41"}),r.getFieldDecorator("transfer_company_name",{initialValue:t.transfer_company_name})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1}))))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u5355\u53f7"}),r.getFieldDecorator("transfer_order_code",{initialValue:t.transfer_order_code})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1})))),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u7535\u8bdd"}),r.getFieldDecorator("transfer_company_mobile",{initialValue:t.transfer_company_mobile})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1}))))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u5b9e\u6536\u8d27\u6b3e"}),r.getFieldDecorator("order_real",{initialValue:t.order_real})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",readOnly:1==R["a"].company_type})))),V.a.createElement(d["a"],this.col2Layout,V.a.createElement(N,p()({},this.formItemLayout,{label:"\u5b9e\u6536\u8fd0\u8d39"}),r.getFieldDecorator("trans_discount",{initialValue:t.trans_discount})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165",readOnly:1!=R["a"].company_type}))))),V.a.createElement(s["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(d["a"],this.colLargeLayout,V.a.createElement(N,p()({},this.formItemMiniLayout,{label:"\u5907\u6ce8"}),r.getFieldDecorator("remark",{initialValue:t.remark})(V.a.createElement(c["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))))}}]),t}(T["PureComponent"]),r=o))||r);t["a"]=P},"9yR7":function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-courier-courier-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-courier-courier-minusType",tableList:"antd-pro-pages-courier-courier-tableList",tableListOperator:"antd-pro-pages-courier-courier-tableListOperator",tableFooter:"antd-pro-pages-courier-courier-tableFooter",footerSplit:"antd-pro-pages-courier-courier-footerSplit",signColor:"antd-pro-pages-courier-courier-signColor",shipColor:"antd-pro-pages-courier-courier-shipColor",editOrderColor:"antd-pro-pages-courier-courier-editOrderColor",settleColor:"antd-pro-pages-courier-courier-settleColor",payColor:"antd-pro-pages-courier-courier-payColor",selectedColor:"antd-pro-pages-courier-courier-selectedColor",tableDetail:"antd-pro-pages-courier-courier-tableDetail",modalForm:"antd-pro-pages-courier-courier-modalForm",entrunkForm:"antd-pro-pages-courier-courier-entrunkForm",formItemFloat:"antd-pro-pages-courier-courier-formItemFloat",tableListForm:"antd-pro-pages-courier-courier-tableListForm",submitButtons:"antd-pro-pages-courier-courier-submitButtons",dataTable:"antd-pro-pages-courier-courier-dataTable","ant-form-item":"antd-pro-pages-courier-courier-ant-form-item","ant-select":"antd-pro-pages-courier-courier-ant-select",formItemNoBreak:"antd-pro-pages-courier-courier-formItemNoBreak"}},B797:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"d",function(){return i}),a.d(t,"b",function(){return c}),a.d(t,"a",function(){return l});var n=a("wd/R"),r=a.n(n);function o(e,t){var a={};a.recordNum=e.length;for(var n=0,r=0,o=0,i=0,c=0,l=0,s=0,d=0,u=0,p=0;p<e.length;p++){var m=e[p],h=m.order_real||0;"init"==t&&(h=m.order_amount||0),i+=Number(h);var f=m.trans_discount?m.trans_discount:m.trans_amount,y=0;m.insurance_fee&&(y+=m.insurance_fee),d+=Number(m.order_advancepay_amount||0),0==m.trans_type?(c+=Number(f||0),l+=y):(u+=Number(f||0),s+=y),o+=Number(m.trans_amount||0),r+=Number(m.order_amount||m.order_real||0),n=i+c+d+l}return a.totalAccount=n,a.totalShouldGoodsFund=r,a.totalShouldTransFund=o,a.totalActualGoodsFund=i,a.totalActualTransFund=c,a.totalXianSettleTransFunds=u,a.totalAdvancepayAmount=d,a.totalTifuInsurance=l,a.totalXianInsurance=s,a}function i(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},a=0,n=0,r=0,o=0,i=0,c="",l="",s=!0,d=!0,u=!0,p=0;p<e.length;p++){var m=e[p];if(0==p&&(c=m["sendcustomer_id"],l=m["bank_account"]),c&&c!=m["sendcustomer_id"]){s=!1;break}if(l&&l!=m["bank_account"]){d=!1;break}1!=m.trans_type&&2!=m.trans_type||(r+=Number(m.trans_discount||m.trans_amount)),2==m.trans_type&&(o+=Number(m.trans_discount||m.trans_amount),i+=Number(m.insurance_fee||0)),6==m.order_status?(Number(m.order_real)>0?n+=Number(m.order_real):n+=Number(m.order_amount),a+=Number(m.order_amount||m.order_real||0)):u=!1}return t.totalShouldGoodsFund=a,t.totalActualGoodsFund=n,t.totalPayTransFunds=o,t.totalPayInsurance=i,t.totalTransFunds=r,t.isSameSendCustomer=s,t.isSameBankAccount=d,t.isSettled=u,t}function c(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,n=0;n<e.length;n++){var o=e[n],i=Number(o.order_amount);if(Number(o.order_status)<6&&Number(o.order_status)>=3&&i>0){var c=r()(Number(o.depart_date)),l=r()((new Date).getTime()),s=l.diff(c,"days");if(s>=t.late_fee_days){var d=s-t.late_fee_days;a=t.late_fee_beginamount||10,a=10+d*Number(i*(t.late_fee_rate||0)/1e3)}}}return Math.floor(100*a)/100}function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,n=0;n<e.length;n++){var o=e[n],i=Number(o.order_real);if(Number(o.order_status)>=4&&i>0&&o.depart_date){var c=r()(Number(o.depart_date)),l=r()(Number(o.settle_date||(new Date).getTime())),s=l.diff(c,"hours");s<=24?a+=Number((i*t.rewards_24h||1)/1e3):s<=48?a+=Number((i*t.rewards_48h||.04)/1e3):s<=72&&(a+=Number((i*t.rewards_72h||.01)/1e3))}}return Math.floor(100*a)/100}},BKN5:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c=a("bx4M"),l=(a("+L6B"),a("2/Rp")),s=(a("5NDa"),a("5rEg")),d=(a("O3gP"),a("lrIw")),u=(a("miYZ"),a("tsqr")),p=(a("2qtc"),a("kLXV")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("p0pE"),g=a.n(b),w=a("2Taf"),v=a.n(w),x=a("vZ4D"),_=a.n(x),S=a("l4Ni"),C=a.n(S),E=a("ujKo"),k=a.n(E),O=a("rlhR"),A=a.n(O),L=a("MhPg"),M=a.n(L),T=(a("OaEy"),a("2fM7")),V=(a("y8nQ"),a("Vl3Y")),D=a("q1tI"),F=a.n(D),R=a("MuoO"),I=a("wd/R"),N=a.n(I),z=a("B797"),P=a("CkN6"),H=a("82qg"),B=a("VlJg"),K=a.n(B),j=(a("S+eF"),a("XS0u")),Y=a("80Er"),U=V["a"].Item,q=T["a"].Option,Q=(n=Object(R["connect"])(function(e){var t=e.customer,a=e.company,n=e.transconfirm,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,transconfirm:n,site:r,car:o,receiver:i,loading:c.models.rule}}),r=V["a"].create(),n(o=r((i=function(e){function t(){var e,a;v()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=C()(this,(e=k()(t)).call.apply(e,[this].concat(r))),a.state=g()({selectedRows:[],formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1},Y["a"]),a.ButtonClicked=!1,a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"80px"},{title:"\u53d1\u8d27\u5ba2\u6237",sorter:!0,dataIndex:"sendcustomer_name",width:"80px"},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8fd0\u8d39",dataIndex:"trans_real",sorter:!0,width:"80px"},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",sorter:!0,width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t},width:"80px"},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",sorter:!0,width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",sorter:!0,width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",sorter:!0,width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",sorter:!0,width:"200px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u53d1\u8f66\u65f6\u95f4",dataIndex:"depart_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return F.a.createElement("span",null,e&&N()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"190px"},{title:"\u7ed3\u7b97\u4eba",dataIndex:"settle_user_name",width:"80px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",sorter:!0,width:"80px"},{title:"\u4e2d\u8f6c",dataIndex:"transfer_type",sorter:!0,render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t},width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchSendCustomerList=function(){var e=y()(h.a.mark(function e(t){var n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=y()(h.a.mark(function e(t,n){var r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.site.siteList,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,n){var r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var s;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.trans_status=0,i.trans_type||(i.trans_type=9),n.next=6,Object(Y["k"])(A()(a),i);case 6:i=n.sent,s=Object.assign({filter:i},e),r({type:"transconfirm/getOrderListAction",payload:g()({pageNo:t||c,pageSize:l},s)}),r({type:"transconfirm/getOrderStatisticAction",payload:g()({},s)}),a.standardTable.cleanSelectedKeys();case 11:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onConfirmTransModal=function(){var e=a.state,t=e.selectedRows,n=e.currentSite,r=(void 0===n&&j["c"],Object(z["c"])(t));p["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u786e\u8ba4\u6240\u9009\u8ba2\u5355\u7684\u8fd0\u8d39\u5417(\u603b\u8ba1\uff1a".concat(r.totalXianInsurance+r.totalXianSettleTransFunds,")\uff1f"),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onConfirmTrans})},a.onConfirmTrans=y()(h.a.mark(function e(){var t,n,r,o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.ButtonClicked){e.next=2;break}return e.abrupt("return");case 2:return a.ButtonClicked=!0,setTimeout(function(){a.ButtonClicked=!1},2e3),t=a.props.dispatch,n=a.state,r=n.selectedRows,o=n.currentSite,void 0===o?j["c"]:o,i=r.map(function(e){return e.order_id}),c={order_id:i,company_id:j["a"].company_id},e.next=10,t({type:"transconfirm/confirmTransAction",payload:c});case 10:l=e.sent,0==l.code?(u["a"].success("\u786e\u8ba4\u6210\u529f\uff01"),setTimeout(function(){a.handleSearch()},1e3)):u["a"].error(l.msg);case 12:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onTransSign=function(){p["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u7b7e\u5b57\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onTransSignOk})},a.onTransSignOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"transconfirm/signAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onCancelTransSign=function(){p["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u7b7e\u5b57\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onCancelTransSignOk})},a.onCancelTransSignOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"transconfirm/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.transconfirm,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=(e.totalDeliverAmount,e.totalTifuTransAmount,e.totalXianTransAmount),l=(e.totalLatefee,e.totalBonusfee,e.totalCarFeeConfirm,e.totalCarFee,e.totalTifuInsurance,e.totalXianInsurence);return F.a.createElement("div",{className:K.a.tableFooter},F.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),F.a.createElement("span",null,"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),F.a.createElement("span",{className:K.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),F.a.createElement("span",{className:K.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",c||"0"),F.a.createElement("span",{className:K.a.footerSplit},"\u57ab\u4ed8\u8d27\u6b3e\uff1a",i||"0"),F.a.createElement("span",{className:K.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",l||"0"),F.a.createElement("span",{className:K.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return M()(t,e),_()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t,a;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:j["a"]});case 3:return a=e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{}});case 6:Object(Y["c"])(this,{}),a&&a.length>0&&this.setState({currentCompany:a[0]}),this.getOrderList();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=(n.getCustomerList,n.sendCustomerList),o=t.company.branchCompanyList,i=t.site.siteList,c={};return F.a.createElement(V["a"],{onSubmit:this.handleSearch,layout:"inline"},F.a.createElement(U,{label:"\u5206\u516c\u53f8"},a("company_id",c)(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"200px"},allowClear:!0},o.map(function(e){return F.a.createElement(q,{key:e.company_id,value:e.company_id},e.company_name)})))),F.a.createElement(U,{label:"\u7ad9\u70b9"},a("site_id",{})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},onSelect:this.onSiteSelect,allowClear:!0},(3==j["c"].site_type?i:[j["c"]]).map(function(e){return F.a.createElement(q,{key:e.site_id,value:e.site_id},e.site_name)})))),F.a.createElement(U,{label:"\u8fd0\u8d39"},a("trans_type",{})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},F.a.createElement(q,{value:1},"\u73b0\u4ed8"),F.a.createElement(q,{value:2},"\u56de\u4ed8")))),F.a.createElement(U,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(F.a.createElement(d["a"],{size:"large",style:{width:"100%"},dataSource:r.map(function(e){var t=d["a"].Option;return F.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Y["i"])(e,t)},onChange:function(t){Object(Y["h"])(e,t)},allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),F.a.createElement(U,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(F.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),F.a.createElement(U,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(F.a.createElement(s["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"250px"},allowClear:!0}))),F.a.createElement(U,{label:"\u6709\u65e0\u8d27\u6b3e"},a("order_amount",{initialValue:-1})(F.a.createElement(T["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},F.a.createElement(q,{value:0},"\u65e0"),F.a.createElement(q,{value:-1},"\u6709")))),F.a.createElement(U,null,F.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.transconfirm,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,s=i.selectedRows,d=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.record,h=!0;return["site_searchuser","site_admin"].indexOf(j["b"].role_value)>=0&&(h=!1),F.a.createElement("div",null,F.a.createElement(c["a"],{bordered:!1},F.a.createElement("div",{className:K.a.tableList},F.a.createElement("div",{className:K.a.tableListForm},this.renderForm()),F.a.createElement("div",{className:K.a.tableListOperator},s.length>0&&h&&F.a.createElement("span",null,F.a.createElement(l["a"],{onClick:this.onConfirmTransModal},"\u786e\u8ba4\u8fd0\u8d39"),F.a.createElement(l["a"],{onClick:this.onTransSign},"\u7b7e\u5b57"),F.a.createElement(l["a"],{onClick:this.onCancelTransSign},"\u53d6\u6d88\u7b7e\u5b57"),F.a.createElement(l["a"],{onClick:this.onPrint},"\u6253\u5370"))),F.a.createElement(P["a"],{onRef:this.onRefTable,selectedRows:s,loading:o,className:K.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:d,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,rowClassNameHandler:function(e,t){return 1==e.trans_sign?K.a.signColor:""},onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),F.a.createElement(H["a"],{modalVisible:p,record:m,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}))}}]),t}(D["PureComponent"]),o=i))||o)||o);t["default"]=Q},"Bm+a":function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a("2Taf"),r=a.n(n),o=a("vZ4D"),i=a.n(o),c=a("l4Ni"),l=a.n(c),s=a("ujKo"),d=a.n(s),u=a("MhPg"),p=a.n(u),m=a("q1tI"),h=a.n(m),f=a("QGbm"),y=a.n(f),b=function(e){function t(){var e,a;r()(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a=l()(this,(e=d()(t)).call.apply(e,[this].concat(o))),a.updateTransform=function(e){a.modalDom.style.transform=e},a}return p()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.modalDom=document.getElementsByClassName("ant-modal-wrap")[0]}},{key:"render",value:function(){var e=this.props.title;return h.a.createElement(y.a,{updateTransform:this.updateTransform},h.a.createElement("div",null,e))}}]),t}(m["PureComponent"])},BsfW:function(e,t,a){e.exports={list:"antd-pro-components-notice-icon-notice-list-list",item:"antd-pro-components-notice-icon-notice-list-item",meta:"antd-pro-components-notice-icon-notice-list-meta",avatar:"antd-pro-components-notice-icon-notice-list-avatar",iconElement:"antd-pro-components-notice-icon-notice-list-iconElement",read:"antd-pro-components-notice-icon-notice-list-read",title:"antd-pro-components-notice-icon-notice-list-title",description:"antd-pro-components-notice-icon-notice-list-description",datetime:"antd-pro-components-notice-icon-notice-list-datetime",extra:"antd-pro-components-notice-icon-notice-list-extra",loadMore:"antd-pro-components-notice-icon-notice-list-loadMore",loadedAll:"antd-pro-components-notice-icon-notice-list-loadedAll",notFound:"antd-pro-components-notice-icon-notice-list-notFound",clear:"antd-pro-components-notice-icon-notice-list-clear"}},CkN6:function(e,t,a){"use strict";a("g9YV");var n=a("wCAj"),r=a("jehZ"),o=a.n(r),i=(a("fOrg"),a("+KLJ")),c=a("Y/ft"),l=a.n(c),s=a("gWZ8"),d=a.n(s),u=a("2Taf"),p=a.n(u),m=a("vZ4D"),h=a.n(m),f=a("l4Ni"),y=a.n(f),b=a("ujKo"),g=a.n(b),w=a("rlhR"),v=a.n(w),x=a("MhPg"),_=a.n(x),S=a("p0pE"),C=a.n(S),E=a("q1tI"),k=a.n(E),O=a("rZM1"),A=a.n(O);function L(e){var t=[];return e.forEach(function(e){e.needTotal&&t.push(C()({},e,{total:0}))}),t}var M=function(e){function t(e){var a;p()(this,t),a=y()(this,g()(t).call(this,e)),a.handleRowSelectChange=function(e,t){var n=a.props.onSelectRow;n&&n(t),a.setState({selectedRowKeys:e,selectedRows:t})},a.handleTableChange=function(e,t,n){var r=a.props.onChange;r&&r(e,t,n)},a.cleanSelectedKeys=function(){a.handleRowSelectChange([],[])},a.selectRow=function(e){var t,n,r=a.props,o=r.rowKey,i=r.onSelectRow,c=d()(a.state.selectedRowKeys),l=d()(a.state.selectedRows);l.forEach(function(a,r){a[o]==e[o]&&(t=a,n=r)}),t?(c.splice(n,1),l.splice(n,1)):(c.push(e[o]),l.push(e)),i&&i(l),a.setState({selectedRowKeys:c,selectedRows:l})};var n=e.columns,r=L(n);return a.state={selectedRowKeys:[],selectedRows:[],needTotalList:r},"function"==typeof a.props.onRef&&a.props.onRef(v()(a)),a}return _()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRowKeys,r=(t.needTotalList,this.props),c=r.data,s=void 0===c?{}:c,d=r.rowKey,u=r.rowClassNameHandler,p=r.onClickHander,m=r.onDoubleClickHander,h=(r.onSelectRow,l()(r,["data","rowKey","rowClassNameHandler","onClickHander","onDoubleClickHander","onSelectRow"])),f=s.list,y=void 0===f?[]:f,b=s.pagination,g=C()({showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:["20","40","60"]},b),w={selectedRowKeys:a,onChange:this.handleRowSelectChange},v=window.innerHeight-360;return k.a.createElement("div",{className:A.a.standardTable},k.a.createElement("div",{className:A.a.tableAlert},k.a.createElement(i["a"],{message:k.a.createElement(E["Fragment"],null,"\u5df2\u9009\u62e9 ",k.a.createElement("a",{style:{fontWeight:600}},a.length)," \u9879\xa0\xa0",k.a.createElement("a",{onClick:this.cleanSelectedKeys,style:{marginLeft:24}},"\u6e05\u7a7a")),type:"info",showIcon:!0})),k.a.createElement(n["a"],o()({rowKey:d||"order_id",rowSelection:w,dataSource:y,pagination:g,onChange:this.handleTableChange,rowClassName:function(e,t){if("function"==typeof u)return u(e,t);var n=!1;return a.forEach(function(t){e[d]==t&&(n=!0)}),n?A.a.selectedColor:""},onRow:function(t,a){return{onClick:function(n){e.selectRow(t),"function"==typeof p&&p(t,a,n)},onDoubleClick:function(e){"function"==typeof m&&m(t,a,e)}}},scroll:{x:900,y:v}},h)))}}]),t}(E["PureComponent"]);t["a"]=M},De2C:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("5NDa"),a("5rEg")),p=(a("miYZ"),a("tsqr")),m=a("p0pE"),h=a.n(m),f=a("d6i3"),y=a.n(f),b=a("1l/V"),g=a.n(b),w=(a("2qtc"),a("kLXV")),v=(a("14J3"),a("BMrR")),x=(a("jCWc"),a("kPKH")),_=a("jehZ"),S=a.n(_),C=(a("+L6B"),a("2/Rp")),E=(a("O3gP"),a("lrIw")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("iQDF"),a("+eQT")),N=(a("OaEy"),a("2fM7")),z=(a("y8nQ"),a("Vl3Y")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=(a("B797"),a("CkN6")),U=a("82qg"),q=a("9yR7"),Q=a.n(q),X=a("XS0u"),G=a("7Qib"),W=z["a"].Item,Z=N["a"].Option,J=I["a"].RangePicker,$=(n=z["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.senderList,o=void 0===r?[]:r;n.validateFields(function(e,a){var n;e||(o.forEach(function(e){e.courier_id==a["courier_id"]&&(n=e)}),delete n["__typename"],t(n))})},a.renderCustomerOption=function(e){var t=E["a"].Option;return H.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.senderList,r=e.form;return H.a.createElement(w["a"],{destroyOnClose:!0,title:"\u66f4\u6539\u9001\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(C["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(C["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},H.a.createElement(z["a"],null,H.a.createElement(v["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(x["a"],null,H.a.createElement(W,S()({},this.formItemLayout,{label:"\u9001\u8d27\u4eba"}),r.getFieldDecorator("courier_id",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9001\u8d27\u4eba"}]})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},n.map(function(e){return H.a.createElement(Z,{key:e.courier_id,value:e.courier_id},e.courier_name)}))))))))}}]),t}(P["PureComponent"]),r=o))||r),ee=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.order,r=e.site,o=e.car,i=e.courier,c=e.loading;return{customer:t,company:a,order:n,site:r,car:o,courier:i,loading:c.models.rule}}),c=z["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,downloadModalVisible:!1,addFormModalVisible:!1,currentSite:{}},a.columns=[{title:"\u7ecf\u529e\u4eba",width:"80px",dataIndex:"operator_name",sorter:!0},{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount",sorter:!0},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u7ed3\u7b97\u65f6\u95f4",width:"170px",dataIndex:"settle_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u4ed8\u6b3e\u65e5\u671f",width:"170px",dataIndex:"pay_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u5206\u516c\u53f8",width:"80px",dataIndex:"company_name"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u914d\u8f7d\u7ad9",width:"80px",dataIndex:"shipsite_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5f02\u5e38\u60c5\u51b5",width:"80px",dataIndex:"abnormal_type"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,e.next=3,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{}}});case 3:e.sent;case 4:case"end":return e.stop()}},e)})),a.fetchOperatorList=function(){var e=g()(y.a.mark(function e(t){var n,r,o;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,r=a.state.currentSite,o={},o.company_id=X["a"].company_id,r&&r.site_id&&(o.site_id=r.site_id),n({type:"courier/getOperatorListAction",payload:{pageNo:1,pageSize:100,filter:o}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=g()(y.a.mark(function e(t,a){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=g()(y.a.mark(function e(t,n){var r,o,i;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.site.siteList,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]}),a.fetchOperatorList();case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){Object.keys(o).forEach(function(e){var t=o[e];t||delete o[e]});var i=Object.assign({filter:o},e);r({type:"courier/getOrderListAction",payload:h()({pageNo:t||c,pageSize:l},i)}),r({type:"courier/getOrderStatisticAction",payload:h()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=g()(y.a.mark(function e(t,n,r){var o,i,c,l;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onPrint=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=g()(y.a.mark(function e(){var t,n,r;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=g()(y.a.mark(function e(){var t,n,r;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateSenderModal=function(){a.setState({addFormModalVisible:!0})},a.addFormDataHandle=function(){var e=g()(y.a.mark(function e(t){var n,r,o,i,c,l;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=void 0===r?[]:r,i=[],c=[],o.forEach(function(e){i.push(e.order_id),c.push(e.getcustomer_id)}),e.next=7,n({type:"courier/updateCustomerCourierAction",payload:{type:"sender",order_id:i,customer_id:c,courier:t}});case 7:l=e.sent,l&&0==l.code?(p["a"].success("\u66f4\u65b0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelAddFormClick()):p["a"].error(l&&l.msg||"\u66f4\u65b0\u5931\u8d25");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelAddFormClick=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addFormModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDelSender=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:w["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u52fe\u9009\u8ba2\u5355\u3001\u6536\u8d27\u5ba2\u6237\u5173\u8054\u7684\u9001\u8d27\u4eba\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onDelSenderConfirm});case 1:case"end":return e.stop()}},e)})),a.onDelSenderConfirm=g()(y.a.mark(function e(){var t,n,r,o,i,c;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=void 0===n?[]:n,o=[],i=[],r.forEach(function(e){o.push(e.order_id),i.push(e.getcustomer_id)}),e.next=7,t({type:"courier/updateCustomerCourierAction",payload:{type:"sender",order_id:o,customer_id:i,courier:{}}});case 7:c=e.sent,c&&0==c.code?(p["a"].success("\u53d6\u6d88\u6210\u529f\uff01"),a.handleSearch()):p["a"].error(c&&c.msg||"\u53d6\u6d88\u5931\u8d25");case 9:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.courier,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalTifuTransAmount,s=e.totalXianTransAmount,d=e.totalLatefee,u=e.totalBonusfee,p=e.totalCarFeeConfirm,m=e.totalCarFee,h=e.totalTifuInsurance,f=e.totalXianInsurence;return H.a.createElement("div",{className:Q.a.tableFooter},H.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",l||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",s||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u57ab\u4ed8\u8d27\u6b3e\uff1a",i||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",c||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",f||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",h||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",d||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u5956\u91d1\uff1a",u||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",p||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,t({type:"courier/initOrderListAction"}),e.next=4,t({type:"company/getBranchCompanyList",payload:h()({},X["a"])});case 4:return e.next=6,this.fetchCompanySiteList();case 6:this.fetchOperatorList();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.customer,n=(a.getCustomerList,a.sendCustomerList,e.company.branchCompanyList),r=void 0===n?[]:n,o=e.courier.operatorList,i=e.site,c=i.siteList,l=i.entrunkSiteList,s={},d={initialValue:X["a"].company_id},p={};c.length>0&&(p.initialValue=c[0].company_id||"");var m=!1;return 1==X["a"].company_type&&(m=!0,d={initialValue:r.length>0?r[0].company_id:""}),H.a.createElement(z["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(W,S()({label:"\u5206\u516c\u53f8"},s),t("company_id",d)(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:m},(2==X["a"].company_type?[X["a"]]:r).map(function(e){return H.a.createElement(Z,{key:e.company_id,value:e.company_id},e.company_name)})))),1==X["a"].company_type&&H.a.createElement(W,S()({label:"\u7ad9\u70b9"},s),t("site_id",p)(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,onChange:this.onSiteSelect,style:{width:"100px"},allowClear:!0},c.map(function(e){return H.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(W,{label:"\u8fd0\u5355\u65e5\u671f"},t("create_date",{})(H.a.createElement(J,{locale:G["b"],style:{width:"250px"}}))),H.a.createElement(W,S()({label:"\u8fd0\u5355\u53f7"},s),t("order_code",{})(H.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),H.a.createElement(W,S()({label:"\u8d27\u8f66\u7f16\u53f7"},s),t("shipsite_id",{})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(l||[]).map(function(e){return H.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)}))),t("car_code",{})(H.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100px"}}))),H.a.createElement(W,S()({label:"\u7ecf\u529e\u4eba"},s),t("operator_id",{})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},o.map(function(e){return H.a.createElement(Z,{key:e.user_id,value:e.user_id},e.user_name)})))),H.a.createElement(z["a"].Item,s,H.a.createElement(C["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.courier,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.courier.senderList),i=t.loading,c=t.dispatch,l=this.state,s=l.selectedRows,u=l.current,p=l.pageSize,m=l.updateOrderModalVisible,h=l.downloadModalVisible,f=l.addFormModalVisible,y=l.record;return H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:Q.a.tableList},H.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:Q.a.tableListOperator}),H.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:s,loading:i,className:Q.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},rowClassNameHandler:function(e,t){return 6===e.order_status?Q.a.settleColor:7===e.order_status?Q.a.payColor:""},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(U["a"],{modalVisible:m,record:y,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch,isEdit:0,dispatch:c}),H.a.createElement($,{modalVisible:f,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelAddFormClick,senderList:o,selectedRows:s}),H.a.createElement(w["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=ee},Dnn4:function(e,t,a){e.exports={content:"antd-pro-components-page-header-wrapper-index-content"}},G3lK:function(e,t,a){e.exports={headerSearch:"antd-pro-components-header-search-index-headerSearch",input:"antd-pro-components-header-search-index-input",show:"antd-pro-components-header-search-index-show"}},GOny:function(e,t,a){"use strict";a.r(t);a("2qtc");var n,r,o,i,c=a("kLXV"),l=(a("IzEo"),a("bx4M")),s=(a("+L6B"),a("2/Rp")),d=a("p0pE"),u=a.n(d),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=a("2Taf"),b=a.n(y),g=a("vZ4D"),w=a.n(g),v=a("l4Ni"),x=a.n(v),_=a("ujKo"),S=a.n(_),C=a("MhPg"),E=a.n(C),k=(a("7Kak"),a("9yH6")),O=(a("OaEy"),a("2fM7")),A=(a("5NDa"),a("5rEg")),L=(a("FJo9"),a("L41K")),M=(a("y8nQ"),a("Vl3Y")),T=(a("iQDF"),a("+eQT")),V=a("q1tI"),D=a.n(V),F=a("MuoO"),R=a("wd/R"),I=a.n(R),N=a("CkN6"),z=(a("zHco"),a("7Qib")),P=a("gA67"),H=a.n(P),B=(a("17x9"),a("S+eF"),a("XS0u")),K=T["a"].RangePicker,j=M["a"].Item,Y=(L["a"].Step,A["a"].TextArea,O["a"].Option),U=(k["a"].Group,JSON.parse(localStorage.getItem("site")||"{}")),q=(JSON.parse(localStorage.getItem("user")||"{}"),n=Object(F["connect"])(function(e){var t=e.customer,a=e.company,n=e.orderlist,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,orderlist:n,site:r,car:o,receiver:i,loading:c.models.rule}}),r=M["a"].create(),n(o=r((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=x()(this,(e=S()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,departModalVisible:!1,currentCompany:{},currentShipSite:{}},a.columns=[{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"sendcustomer_name"},{title:"\u6536\u8d27\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"getcustomer_name"},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",sorter:!0,dataIndex:"order_amount"},{title:"\u5b9e\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_real"},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",sorter:!0,dataIndex:"trans_discount"},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",sorter:!0,dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",sorter:!0,dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",sorter:!0,dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",sorter:!0,dataIndex:"create_date",render:function(e){return D.a.createElement("span",null,e?I()(e).format("YYYY-MM-DD HH:mm:ss"):"")}},{title:"\u7ad9\u70b9",width:"80px",sorter:!0,dataIndex:"site_name"},{title:"\u5206\u516c\u53f8",width:"80px",dataIndex:"company_name"},{title:"\u7ed3\u7b97\u65e5\u671f",width:"100px",sorter:!0,dataIndex:"settle_date",render:function(e){return D.a.createElement("span",null,e?I()(e).format("YYYY-MM-DD"):"")}},{title:"\u4ed8\u6b3e\u65e5\u671f",width:"100px",sorter:!0,dataIndex:"pay_date",render:function(e){return D.a.createElement("span",null,e?I()(e).format("YYYY-MM-DD"):"")}},{title:"\u6ede\u7eb3\u91d1",width:"80px",sorter:!0,dataIndex:"late_fee"},{title:"\u5956\u52b1\u91d1",width:"80px",sorter:!0,dataIndex:"bonus_amount"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==B["a"].company_type?(a.setState({currentCompany:B["a"]}),B["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.getLastCarInfo=f()(m.a.mark(function e(){var t,n,r,o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state,r=n.currentCompany,o=void 0===r?{}:r,i=n.currentShipSite,c=void 0===i?{}:i,e.next=4,t({type:"car/getLastCarCodeAction",payload:{company_id:o.company_id,shipsite_id:c.site_id}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}},e)})),a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.props,r.dispatch,o=r.company.branchCompanyList,r.form,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]}),e.next=5,a.getLastCarInfo();case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onShipSiteSelect=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i,c;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.site.entrunkSiteList,r=void 0===n?[]:n,o={},i=0;case 3:if(!(i<r.length)){e.next=11;break}if(c=r[i],c.site_id!=t){e.next=8;break}return o=c,e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:return e.next=13,a.setState({currentShipSite:o});case 13:a.getLastCarInfo();case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault();var t=a.props;t.dispatch,t.form,a.state.currentCompany;a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize,s={};o.validateFields(function(n,o){if(!n){var i=o;Object.keys(i).forEach(function(e){i[e]||delete i[e]}),o.create_date&&(i.create_date=["".concat(o.create_date.valueOf())]),o.entrunk_date&&o.entrunk_date.length>0&&(i.entrunk_date=o.entrunk_date.map(function(e){return"".concat(e.valueOf())})),i.order_status=[3,10],s=i,s=Object.assign({filter:s},e),r({type:"orderlist/getOrderListAction",payload:u()({pageNo:t||c,pageSize:l},s)}),r({type:"orderlist/getOrderStatisticAction",payload:u()({},s)}),a.standardTable.cleanSelectedKeys()}}),a.getLastCarInfo()},a.tableFooter=function(){var e=a.props,t=e.orderlist,n=t.total,r=t.totalOrderAmount,o=t.totalTransAmount,i=(t.totalInsurancefee,t.totalRealTransAmount,t.totalRealOrderAmount),c=t.totalAdvancepayAmount,l=t.totalDeliverAmount,s=t.totalTifuTransAmount,d=t.totalXianTransAmount,u=t.totalLatefee,p=t.totalBonusfee,m=t.totalCarFeeConfirm,h=t.totalCarFee,f=t.totalTifuInsurance,y=t.totalXianInsurence;e.car.lastCar;return D.a.createElement("div",{className:H.a.tableFooter},D.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",r||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",i||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",o||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",s||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",d||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u57ab\u4ed8\u8fd0\u8d39\uff1a",c||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",l||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",y||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",f||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",u||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u5956\u91d1\uff1a",p||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",h||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),D.a.createElement("span",{className:H.a.footerSplit},"\u7968\u6570\uff1a",n||"0"))},a}return E()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){var t,a,n,r;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getCompanyList",payload:{}});case 3:return a=e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{}});case 6:n=e.sent,this.setCurrentCompany(a),n&&n.length>0&&(r=n.filter(function(e){return 3==e.site_type||2==e.site_type}),r.length>0&&this.setState({currentShipSite:r[0]})),this.getLastCarInfo(),this.getOrderList();case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.company.branchCompanyList,n=e.site,r=n.entrunkSiteList,o=n.siteList,i=(e.car.lastCar,this.state),c=(i.currentCompany,i.currentShipSite,{});c.initialValue=1==B["a"].company_type?"":B["a"].company_id;var l=!1,d={initialValue:U.site_id},u=[U];return 3!=U.site_type&&2!=U.site_type&&2!=B["a"].company_type||(u=o,l=!0,d={}),D.a.createElement(M["a"],{onSubmit:this.handleSearch,layout:"inline"},D.a.createElement(j,{label:"\u5206\u516c\u53f8"},t("company_id",c)(D.a.createElement(O["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:1==B["a"].company_type},(1==B["a"].company_type?a:[B["a"]]).map(function(e){return D.a.createElement(Y,{key:e.company_id,value:e.company_id},e.company_name)})))),D.a.createElement(j,{label:"\u7ad9\u70b9"},t("site_id",d)(D.a.createElement(O["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:l},u.map(function(e){return D.a.createElement(Y,{key:e.site_id,value:e.site_id},e.site_name)})))),D.a.createElement(j,{label:"\u914d\u8f7d\u90e8"},t("shipsite_id",{})(D.a.createElement(O["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},onSelect:this.onShipSiteSelect,allowClear:!0},(r||[]).map(function(e){return D.a.createElement(Y,{key:e.site_id,value:e.site_id},e.site_name)})))),D.a.createElement(j,{label:"\u8d27\u8f66\u7f16\u53f7"},t("car_code",{})(D.a.createElement(A["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100px"}}))),D.a.createElement(j,{label:"\u5f55\u5165\u65e5\u671f"},t("create_date",{initialValue:I()((new Date).getTime())})(D.a.createElement(T["a"],{placeholder:"\u5168\u90e8",locale:z["b"],format:"YYYY-MM-DD",style:{width:"130px"}}))),D.a.createElement(j,{label:"\u6258\u8fd0\u65e5\u671f"},t("entrunk_date",{})(D.a.createElement(K,{locale:z["b"],style:{width:"250px"}}))),D.a.createElement(j,{label:"\u6709\u65e0\u8d27\u6b3e"},t("order_amount",{initialValue:-1})(D.a.createElement(O["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},D.a.createElement(Y,{value:0},"\u65e0"),D.a.createElement(Y,{value:-1},"\u6709")))),D.a.createElement(j,{label:"\u8fd0\u8d39\u7c7b\u522b"},t("trans_type",{})(D.a.createElement(O["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},D.a.createElement(Y,{value:0},"\u63d0\u4ed8"),D.a.createElement(Y,{value:1},"\u73b0\u4ed8"),D.a.createElement(Y,{value:2},"\u56de\u4ed8")))),D.a.createElement(j,null,D.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.orderlist,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,d=i.selectedRows,u=i.current,p=i.pageSize,m=(i.currentCompany,i.departModalVisible);return D.a.createElement("div",null,D.a.createElement(l["a"],{bordered:!1},D.a.createElement("div",{className:H.a.tableList},D.a.createElement("div",{className:H.a.tableListForm},this.renderForm()),D.a.createElement("div",{className:H.a.tableListOperator},d.length>0&&D.a.createElement("span",null,D.a.createElement(s["a"],{onClick:this.onDownloadOrder},"\u8d27\u7269\u6e05\u5355\u4e0b\u8f7d"))),D.a.createElement(N["a"],{onRef:this.onRefTable,className:H.a.dataTable,selectedRows:d,loading:o,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},rowClassNameHandler:function(e,t){return 6===e.order_status?H.a.settleColor:7===e.order_status?H.a.payColor:""},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})),this.tableFooter()),D.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onDepartOk,onCancel:this.onDepartCancel},D.a.createElement("p",null),D.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d1\u8f66\u4e48\uff1f")))}}]),t}(V["PureComponent"]),o=i))||o)||o);t["default"]=q},IGtV:function(e,t,a){e.exports={fixedHeader:"antd-pro-layouts-header-fixedHeader"}},JwhZ:function(e,t,a){e.exports={head:"antd-pro-components-top-nav-header-index-head",light:"antd-pro-components-top-nav-header-index-light",main:"antd-pro-components-top-nav-header-index-main",wide:"antd-pro-components-top-nav-header-index-wide",left:"antd-pro-components-top-nav-header-index-left",right:"antd-pro-components-top-nav-header-index-right",rightMenu:"antd-pro-components-top-nav-header-index-rightMenu","ant-dropdown-trigger":"antd-pro-components-top-nav-header-index-ant-dropdown-trigger",logo:"antd-pro-components-top-nav-header-index-logo",menu:"antd-pro-components-top-nav-header-index-menu"}},KbBV:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-finance-finance-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-finance-finance-minusType",tableList:"antd-pro-pages-finance-finance-tableList",tableListOperator:"antd-pro-pages-finance-finance-tableListOperator",tableFooter:"antd-pro-pages-finance-finance-tableFooter",footerSplit:"antd-pro-pages-finance-finance-footerSplit",signColor:"antd-pro-pages-finance-finance-signColor",shipColor:"antd-pro-pages-finance-finance-shipColor",editOrderColor:"antd-pro-pages-finance-finance-editOrderColor",settleColor:"antd-pro-pages-finance-finance-settleColor",payColor:"antd-pro-pages-finance-finance-payColor",selectedColor:"antd-pro-pages-finance-finance-selectedColor",tableDetail:"antd-pro-pages-finance-finance-tableDetail",modalForm:"antd-pro-pages-finance-finance-modalForm",entrunkForm:"antd-pro-pages-finance-finance-entrunkForm",formItemFloat:"antd-pro-pages-finance-finance-formItemFloat",tableListForm:"antd-pro-pages-finance-finance-tableListForm",submitButtons:"antd-pro-pages-finance-finance-submitButtons",dataTable:"antd-pro-pages-finance-finance-dataTable","ant-form-item":"antd-pro-pages-finance-finance-ant-form-item","ant-select":"antd-pro-pages-finance-finance-ant-select",formItemNoBreak:"antd-pro-pages-finance-finance-formItemNoBreak"}},LTkr:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-search-search-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-search-search-minusType",tableList:"antd-pro-pages-search-search-tableList",tableListOperator:"antd-pro-pages-search-search-tableListOperator",tableFooter:"antd-pro-pages-search-search-tableFooter",footerSplit:"antd-pro-pages-search-search-footerSplit",signColor:"antd-pro-pages-search-search-signColor",shipColor:"antd-pro-pages-search-search-shipColor",editOrderColor:"antd-pro-pages-search-search-editOrderColor",settleColor:"antd-pro-pages-search-search-settleColor",payColor:"antd-pro-pages-search-search-payColor",selectedColor:"antd-pro-pages-search-search-selectedColor",tableDetail:"antd-pro-pages-search-search-tableDetail",modalForm:"antd-pro-pages-search-search-modalForm",entrunkForm:"antd-pro-pages-search-search-entrunkForm",formItemFloat:"antd-pro-pages-search-search-formItemFloat",tableListForm:"antd-pro-pages-search-search-tableListForm",submitButtons:"antd-pro-pages-search-search-submitButtons",dataTable:"antd-pro-pages-search-search-dataTable","ant-form-item":"antd-pro-pages-search-search-ant-form-item","ant-select":"antd-pro-pages-search-search-ant-select",formItemNoBreak:"antd-pro-pages-search-search-formItemNoBreak"}},OQ55:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=(a("2qtc"),a("kLXV")),w=(a("14J3"),a("BMrR")),v=(a("jCWc"),a("kPKH")),x=a("jehZ"),_=a.n(x),S=(a("5NDa"),a("5rEg")),C=(a("+L6B"),a("2/Rp")),E=(a("O3gP"),a("lrIw")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("B797"),U=a("CkN6"),q=a("mzDP"),Q=a.n(q),X=(a("S+eF"),a("7Qib")),G=a("XS0u"),W=z["a"].RangePicker,Z=N["a"].Item,J=I["a"].Option,$=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text})},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form;n.validateFields(function(e,a){e||t({transfer_money:a.transfer_money,transfer_status:0,transfer_user:a.transfer_user,remark:a.remark})})},a.renderCustomerOption=function(e){var t=E["a"].Option;return H.a.createElement(t,{key:e.incometype_id,incometype_id:e.incometype_id,text:e.incometype},e.incometype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=(e.selectedRows,e.form),r=(e.incomeTypes,e.record),o=void 0===r?{}:r;return H.a.createElement(g["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(C["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(C["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,_()({},this.formItemLayout,{label:"\u6253\u6b3e\u91d1\u989d"}),n.getFieldDecorator("transfer_money",{initialValue:o.transfer_money||"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6253\u6b3e\u91d1\u989d"}]})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,_()({},this.formItemLayout,{label:"\u6253\u6b3e\u4eba"}),n.getFieldDecorator("transfer_user",{initialValue:o.transfer_user||""})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},n.getFieldDecorator("remark",{initialValue:o.remark||""})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),ee=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.transfer,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,transfer:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},current:1,pageSize:20,record:{},orderModalVisible:!1,settleModalVisible:!1,cancelConfirmTransferModalVisible:!1,delTransferModalVisible:!1,addIncomeModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},a.btnClicked=!1,a.columns=[{title:"\u6253\u6b3e\u65e5\u671f",dataIndex:"transfer_date",width:"170px",render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u6253\u6b3e\u91d1\u989d",dataIndex:"transfer_money",width:"80px"},{title:"\u6253\u6b3e\u4eba",dataIndex:"transfer_user",width:"80px"},{title:"\u786e\u8ba4\u4eba",dataIndex:"confirm_operator_name",width:"80px"},{title:"\u786e\u8ba4\u65e5\u671f",dataIndex:"confirm_date",width:"170px",render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u6253\u6b3e\u516c\u53f8",dataIndex:"company_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchIncomeTypeList=function(){var e=b()(f.a.mark(function e(t){var n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.companyId,r=t.siteId,o=a.props.dispatch,o({type:"income/getIncomeTypesAction",payload:{company_id:n,site_id:r}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchCompanySiteList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;i.currentCompany;o.validateFields(function(n,o){if(!n){o.transfer_date&&o.transfer_date.length>0&&(o.transfer_date=o.transfer_date.map(function(e){return"".concat(e.valueOf())})),o.transfer_type=0;var i=Object.assign({filter:o},e);r({type:"transfer/getTransferAction",payload:m()({pageNo:t||c,pageSize:l},i)}),r({type:"transfer/getTransferStatisticAction",payload:m()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.state.pageSize,i={},c=1,r.field&&(i={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==o){e.next=10;break}return c=1,e.next=8,a.setState({pageSize:t.pageSize});case 8:e.next=11;break;case 10:t&&t.current&&(c=t.current);case 11:return e.next=13,a.setState({current:c});case 13:a.getOrderList(i,c);case 14:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:if(a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),n=a.props.dispatch,r=a.state.record,o=void 0===r?{}:r,o&&o.transfer_id){e.next=13;break}return e.next=9,n({type:"transfer/addTransferAction",payload:m()({},t,{company_id:G["a"].company_id,transfer_type:0,company_name:G["a"].company_name})});case 9:i=e.sent,0==i.code?u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"):u["a"].error(i.msg),e.next=18;break;case 13:return t.transfer_money=Number(t.transfer_money||0),e.next=16,n({type:"transfer/updateTransferAction",payload:{transfer:Object.assign({transfer_status:0},t),transfer_id:[o.transfer_id]}});case 16:c=e.sent,0==c.code?u["a"].success("\u7f16\u8f91\u6210\u529f\uff01"):u["a"].error(c.msg);case 18:a.handleSearch(),a.onCancelIncomeClick();case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddIncomeClick=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({record:{}}),a.setState({addIncomeModalVisible:!0});case 2:case"end":return e.stop()}},e)})),a.onCancelIncomeClick=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addIncomeModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onConfirmTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 1==e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u5df2\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u91cd\u590d\u786e\u8ba4\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,settleModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onSettleCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=9,t({type:"transfer/confirmTransferAction",payload:{transfer_id:r}});case 9:o=e.sent,0==o.code?(u["a"].success("\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.handleSearch(),a.onSettleCancel()):u["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onCancelConfirmTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 0==e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u672a\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u53d6\u6d88\u786e\u8ba4\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,cancelConfirmTransferModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onCancelConfirmTransferCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelConfirmTransferModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelConfirmTransferOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=9,t({type:"transfer/cancelConfirmTransferAction",payload:{transfer_id:r}});case 9:o=e.sent,0==o.code?(u["a"].success("\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.handleSearch(),a.onCancelConfirmTransferCancel()):u["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onDelTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 1===e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u5df2\u7ecf\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u5220\u9664\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,delTransferModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onDelConfirmTransferCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({delTransferModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDelConfirmTransferOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=5,t({type:"transfer/delTransferAction",payload:{transfer_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u5220\u9664\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.onDelConfirmTransferCancel(),a.getOrderList()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onCompanySelect=function(){var e=b()(f.a.mark(function e(t){var n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.company.branchCompanyList,r=n.filter(function(e){if(e.company_id==t)return e}),r.length>0&&a.setState({currentCompany:r[0]});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelSign=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelSignCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelSignOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onCancelSignCancel()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onTransferModalShow=function(){a.setState({orderModalVisible:!0})},a.onTransferModalCancel=function(){a.setState({orderModalVisible:!1})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){1!=e.transfer_status&&e.company_id==G["a"].company_id&&a.setState({record:e,addIncomeModalVisible:!0})},a.tableFooter=function(){var e=a.props.transfer,t=e.total,n=e.totalTransferAmount,r=e.totalTransferConfirmAmount,o=e.totalTransferUnConfirmAmount,i=e.totalShouldTransfer;return H.a.createElement("div",{className:Q.a.tableFooter},H.a.createElement("span",null,"\u6253\u6b3e\u603b\u989d\uff1a",n||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u672a\u786e\u8ba4\u6253\u6b3e\u603b\u989d\uff1a",o||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u5df2\u786e\u8ba4\u6253\u6b3e\u603b\u989d\uff1a",r||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u5e94\u6253\u6b3e\u603b\u989d\uff1a",i||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:m()({},G["a"])});case 3:a=e.sent,n=1==G["a"].company_type?a:[G["a"]],this.setState({currentCompany:n[0]}),this.handleSearch();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.company.branchCompanyList,n=1==G["a"].company_type?a:[G["a"]],r={};return 1!=G["a"].company_type&&(r.initialValue=G["a"].company_id),H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(Z,{label:"\u5206\u516c\u53f8"},t("company_id",r)(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},onSelect:this.onCompanySelect,allowClear:1==G["a"].company_type},n.map(function(e){return H.a.createElement(J,{key:e.company_id,value:e.company_id},e.company_name)})))),H.a.createElement(Z,{label:"\u786e\u8ba4\u6253\u6b3e"},t("transfer_status",{initialValue:"0"})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},H.a.createElement(J,{value:"1"},"\u5df2\u786e\u8ba4\u6253\u6b3e"),H.a.createElement(J,{value:"0"},"\u672a\u786e\u8ba4\u6253\u6b3e")))),H.a.createElement(Z,{label:"\u6253\u6b3e\u65e5\u671f"},t("transfer_date",{})(H.a.createElement(W,{locale:X["b"],style:{width:"250px"}}))),H.a.createElement(Z,null,H.a.createElement(C["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e,t=this,a=this.props,n=a.transfer,r=n.transferList,o=n.total,i=(n.totalOrderAmount,n.totalTransAmount,a.loading),c=this.state,l=c.selectedRows,s=(c.accountStatistic,c.current),u=c.pageSize,p=(c.orderModalVisible,c.settleModalVisible),m=c.cancelConfirmTransferModalVisible,h=c.delTransferModalVisible,f=c.addIncomeModalVisible,y=c.signModalVisible,b=c.cancelSignModalVisible,w=c.downloadModalVisible,v=c.printModalVisible,x=c.record;return l.length>0&&2==G["a"].company_type?e=H.a.createElement(C["a"],{onClick:this.onDelTransfer},"\u5220\u9664\u6253\u6b3e"):l.length>0&&1==G["a"].company_type&&(e=H.a.createElement("span",null,H.a.createElement(C["a"],{onClick:this.onConfirmTransfer},"\u786e\u8ba4\u6253\u6b3e"),H.a.createElement(C["a"],{onClick:this.onCancelConfirmTransfer},"\u53d6\u6d88\u786e\u8ba4"))),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:Q.a.tableList},H.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:Q.a.tableListOperator},2==G["a"].company_type?H.a.createElement(C["a"],{icon:"plus",type:"primary",onClick:this.onAddIncomeClick},"\u6dfb\u52a0"):null,e),H.a.createElement(U["a"],{onRef:this.onRefTable,selectedRows:l,className:Q.a.dataTable,loading:i,rowKey:"transfer_id",data:{list:r,pagination:{total:o,pageSize:u,current:s,onShowSizeChange:function(e,a){t.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){if(1===e.transfer_status)return Q.a.payColor}})),this.tableFooter()),H.a.createElement($,{modalVisible:f,record:x,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelIncomeClick,selectedRows:l}),H.a.createElement(g["a"],{title:"\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:p,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5bf9".concat(l.length,"\u6761\u8bb0\u5f55\u786e\u8ba4\u6253\u6b3e\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onCancelConfirmTransferOk,onCancel:this.onCancelConfirmTransferCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5bf9".concat(l.length,"\u6761\u8bb0\u5f55\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u5220\u9664\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onDelConfirmTransferOk,onCancel:this.onDelConfirmTransferCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664".concat(l.length,"\u6761\u786e\u8ba4\u6253\u6b3e\u8bb0\u5f55\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:v,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=ee},OYVh:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("5NDa"),a("5rEg")),p=(a("miYZ"),a("tsqr")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("p0pE"),g=a.n(b),w=a("rlhR"),v=a.n(w),x=(a("2qtc"),a("kLXV")),_=(a("14J3"),a("BMrR")),S=(a("jCWc"),a("kPKH")),C=a("jehZ"),E=a.n(C),k=(a("+L6B"),a("2/Rp")),O=(a("O3gP"),a("lrIw")),A=a("2Taf"),L=a.n(A),M=a("vZ4D"),T=a.n(M),V=a("l4Ni"),D=a.n(V),F=a("ujKo"),R=a.n(F),I=a("MhPg"),N=a.n(I),z=(a("iQDF"),a("+eQT")),P=(a("OaEy"),a("2fM7")),H=(a("y8nQ"),a("Vl3Y")),B=a("q1tI"),K=a.n(B),j=a("MuoO"),Y=a("wd/R"),U=a.n(Y),q=(a("B797"),a("CkN6")),Q=a("82qg"),X=a("9yR7"),G=a.n(X),W=a("7Qib"),Z=a("/mOS"),J=a("XS0u"),$=a("80Er"),ee=H["a"].Item,te=P["a"].Option,ae=z["a"].RangePicker,ne=(n=H["a"].create(),n((o=function(e){function t(e){var a;return L()(this,t),a=D()(this,R()(t).call(this,e)),a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.senderList,o=void 0===r?[]:r;n.validateFields(function(e,a){var n;e||(o.forEach(function(e){e.courier_id==a["courier_id"]&&(n=e)}),delete n["__typename"],t(n))})},a.renderCustomerOption=function(e){var t=O["a"].Option;return K.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return N()(t,e),T()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.senderList,r=e.form;return K.a.createElement(x["a"],{destroyOnClose:!0,title:"\u66f4\u6539\u9001\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[K.a.createElement(k["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),K.a.createElement(k["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:G.a.modalForm},K.a.createElement(H["a"],null,K.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(S["a"],null,K.a.createElement(ee,E()({},this.formItemLayout,{label:"\u9001\u8d27\u4eba"}),r.getFieldDecorator("courier_id",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u9001\u8d27\u4eba"}]})(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},n.map(function(e){return K.a.createElement(te,{key:e.courier_id,value:e.courier_id},e.courier_name)}))))))))}}]),t}(B["PureComponent"]),r=o))||r),re=(i=Object(j["connect"])(function(e){var t=e.customer,a=e.company,n=e.order,r=e.site,o=e.car,i=e.courier,c=e.loading;return{customer:t,company:a,order:n,site:r,car:o,courier:i,loading:c.models.rule}}),c=H["a"].create(),i(l=c((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state=g()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,downloadModalVisible:!1,addFormModalVisible:!1,addCourierModalVisible:!1,currentCompany:{}},$["a"]),a.columns=[{title:"\u9001\u8d27\u4eba",width:"80px",dataIndex:"sender_name",sorter:!0},{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount",sorter:!0},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return K.a.createElement("span",null,e&&U()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u7ed3\u7b97\u65f6\u95f4",width:"170px",dataIndex:"settle_date",render:function(e){return K.a.createElement("span",null,e&&U()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u4ed8\u6b3e\u65e5\u671f",width:"170px",dataIndex:"pay_date",render:function(e){return K.a.createElement("span",null,e&&U()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u5206\u516c\u53f8",width:"80px",dataIndex:"company_name"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u914d\u8f7d\u7ad9",width:"80px",dataIndex:"shipsite_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5f02\u5e38\u60c5\u51b5",width:"80px",dataIndex:"abnormal_type"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==J["a"].company_type?(a.setState({currentCompany:J["a"]}),J["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.getLastCarInfo=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i,c,l,s,d,u,p,m,f;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t&&t.isUseCarCode||!1,r=a.props,o=r.dispatch,i=r.form,c=a.state,l=c.currentCompany,s=void 0===l?{}:l,d=c.currentShipSite,u=void 0===d?{}:d,p=i.getFieldValue("car_code"),m={company_id:s.company_id,shipsite_id:u.site_id},p&&n&&(m.car_code=p),e.next=8,o({type:"car/getLastCarCodeAction",payload:m});case 8:return f=e.sent,e.abrupt("return",f);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onGetCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchGetCustomerList()},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchGetCustomerList=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,o=n.branchCompanyList,i=a.state.currentCompany,i&&i.company_id||(i=o&&o[0]),r({type:"customer/getCustomerListAction",payload:{filter:{company_id:t||i&&i.company_id||0}}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchSenderList=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i,c;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props,r=n.dispatch,o=n.branchCompanyList,i=n.courier.senderList,void 0===i?[]:i,c=a.state.currentCompany,c&&c.company_id||(c=o&&o[0]),e.next=5,r({type:"courier/getCourierListAction",payload:{pageNo:1,pageSize:100,type:"sender",filter:{company_id:c.company_id}}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchSendCustomerList=function(){var e=y()(h.a.mark(function e(t){var n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,n){var r,o,i,c;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.dispatch,i=r.company.branchCompanyList,r.car.lastCar,o({type:"customer/resetCustomerPageNo",payload:{type:"Get"}}),c=i.filter(function(e){if(e.company_id==t)return e}),c.length>0&&a.setState({currentCompany:c[0]}),a.fetchSenderList(),a.fetchGetCustomerList(t);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;a.getLastCarInfo({isUseCarCode:!0}),o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var s;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return Object.keys(i).forEach(function(e){var t=i[e];t||delete i[e]}),n.next=5,Object($["j"])(v()(a),i);case 5:return i=n.sent,n.next=8,Object($["k"])(v()(a),i);case 8:i=n.sent,s=Object.assign({filter:i},e),r({type:"courier/getOrderListAction",payload:g()({pageNo:t||c,pageSize:l},s)}),r({type:"courier/getOrderStatisticAction",payload:g()({},s)}),a.standardTable.cleanSelectedKeys();case 13:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onShipSiteSelect=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i,c;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.site.entrunkSiteList,r=void 0===n?[]:n,o={},i=0;case 3:if(!(i<r.length)){e.next=11;break}if(c=r[i],c.site_id!=t){e.next=8;break}return o=c,e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:return e.next=13,a.setState({currentShipSite:o});case 13:a.getLastCarInfo();case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onPrintCheckList=y()(h.a.mark(function e(){var t,n,r,o,i,c,l,s;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.props,n=t.company.branchCompanyList,r=t.site.siteList,o=t.dispatch,i=a.state.selectedRows,!(i.length<=0)){e.next=5;break}return p["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u6253\u5370\u7684\u8bb0\u5f55"),e.abrupt("return");case 5:c="",l=h.a.mark(function e(){var t,a,l,d,u,p,m;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=i[s],e.next=3,o({type:"customer/queryCustomerAction",payload:{getcustomer_id:t.getcustomer_id,sendcustomer_id:t.sendcustomer_id}});case 3:a=e.sent,l=a.getCustomer,d=void 0===l?{}:l,u=a.sendCustomer,p=void 0===u?{}:u,m={},n.forEach(function(e){e.company_id==t.company_id&&(m=e)}),c+=Object(Z["a"])({getCustomer:d,sendCustomer:p,data:t,printCompany:m,siteList:r,footer:!0});case 11:case"end":return e.stop()}},e)}),s=0;case 8:if(!(s<i.length)){e.next=13;break}return e.delegateYield(l(),"t0",10);case 10:s++,e.next=8;break;case 13:Object(Z["d"])(c);case 14:case"end":return e.stop()}},e)})),a.onArriveNotify=function(){},a.onPrint=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateSenderModal=function(){a.canEditSender()&&a.setState({addFormModalVisible:!0})},a.canEditSender=function(){var e=a.state.selectedRows,t=void 0===e?[]:e,n=[],r=[],o=U()(Number((new Date).getTime())),i=!1;return t.forEach(function(e){if(n.push(e.order_id),r.push(e.getcustomer_id),e.arrive_date){var t=U()(Number(e.arrive_date)),a=o.diff(t,"hours");a>=48&&(i=!0)}}),!i||(p["a"].error("\u5df2\u7ecf\u8d85\u51fa\u66f4\u6539\u65f6\u95f4\uff0c\u4e0d\u53ef\u66f4\u6539\u9001\u8d27\u4eba"),!1)},a.addFormDataHandle=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=void 0===r?[]:r,i=[],c=[],o.forEach(function(e){i.push(e.order_id),c.push(e.getcustomer_id)}),e.next=7,n({type:"courier/updateCustomerCourierAction",payload:{type:"sender",order_id:i,customer_id:c,courier:t}});case 7:l=e.sent,l&&0==l.code?(p["a"].success("\u66f4\u65b0\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},800),a.onCancelAddFormClick()):p["a"].error(l&&l.msg||"\u66f4\u65b0\u5931\u8d25");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelAddFormClick=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addFormModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDelSender=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.canEditSender()){e.next=2;break}return e.abrupt("return");case 2:x["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u52fe\u9009\u8ba2\u5355\u3001\u6536\u8d27\u5ba2\u6237\u5173\u8054\u7684\u9001\u8d27\u4eba\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onDelSenderConfirm});case 3:case"end":return e.stop()}},e)})),a.onDelSenderConfirm=y()(h.a.mark(function e(){var t,n,r,o,i,c;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=void 0===n?[]:n,o=[],i=[],r.forEach(function(e){o.push(e.order_id),i.push(e.getcustomer_id)}),e.next=7,t({type:"courier/updateCustomerCourierAction",payload:{type:"sender",order_id:o,customer_id:i,courier:{}}});case 7:c=e.sent,c&&0==c.code?(p["a"].success("\u53d6\u6d88\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},800)):p["a"].error(c&&c.msg||"\u53d6\u6d88\u5931\u8d25");case 9:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.courier,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalTifuTransAmount,s=e.totalXianTransAmount,d=e.totalLatefee,u=e.totalBonusfee,p=e.totalCarFeeConfirm,m=e.totalCarFee,h=e.totalTifuInsurance,f=e.totalXianInsurence;return K.a.createElement("div",{className:G.a.tableFooter},K.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",l||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",s||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u57ab\u4ed8\u8d27\u6b3e\uff1a",i||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",c||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",f||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",h||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",d||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5956\u91d1\uff1a",u||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",p||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return N()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t,a,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,t({type:"courier/initOrderListAction"}),e.next=4,t({type:"company/getBranchCompanyList",payload:g()({},J["a"])});case 4:return a=e.sent,e.next=7,t({type:"site/getSiteListAction",payload:{}});case 7:n=e.sent,n&&n.length>0&&(r=n.filter(function(e){return 3==e.site_type||2==e.site_type}),r.length>0&&this.setState({currentShipSite:r[0]})),o=this.setCurrentCompany(a),t({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:o.company_id}}}),this.fetchSenderList(),this.getLastCarInfo();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=n.getCustomerList,o=(n.sendCustomerList,t.company.branchCompanyList),i=t.courier.senderList,c=void 0===i?[]:i,l=t.site.entrunkSiteList,s=void 0===l?[]:l,d=t.car.lastCar,p=this.state.currentCompany,m={},h={};h.initialValue=p.company_id||"",1!=J["a"].company_type&&(h.initialValue=J["a"].company_id||"");var f=!1;return c.forEach(function(e){-1===e.courier_id&&(f=!0)}),f||c.unshift({courier_id:-1,courier_name:"\u672a\u9001\u8d27"}),K.a.createElement(H["a"],{onSubmit:this.handleSearch,layout:"inline"},K.a.createElement(ee,E()({label:"\u5206\u516c\u53f8"},m),a("company_id",h)(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:1==J["a"].company_type},(1==J["a"].company_type?o:[J["a"]]).map(function(e){return K.a.createElement(te,{key:e.company_id,value:e.company_id},e.company_name)})))),K.a.createElement(ee,{label:"\u8fd0\u5355\u65e5\u671f"},a("create_date",{})(K.a.createElement(ae,{locale:W["b"],style:{width:"250px"}}))),K.a.createElement(ee,E()({label:"\u8fd0\u5355\u53f7"},m),a("order_code",{})(K.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),K.a.createElement(ee,E()({label:"\u8d27\u8f66\u7f16\u53f7"},m),a("shipsite_id",s.length>0?{initialValue:s[0].site_id}:{})(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(s||[]).map(function(e){return K.a.createElement(te,{key:e.site_id,value:e.site_id},e.site_name)}))),a("car_code",{initialValue:d.car_code})(K.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"80px"}}))),K.a.createElement(ee,E()({label:"\u9001\u8d27\u4eba"},m),a("sender_id",{})(K.a.createElement(O["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=O["a"].Option;return K.a.createElement(t,{key:"".concat(e.courier_id),value:"".concat(e.courier_id),courierid:"".concat(e.courier_id),label:e.courier_name},e.courier_name)}),onSelect:function(t){Object($["e"])(e,t,"sender")},onChange:function(t){Object($["d"])(e,t,"sender")},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement(ee,E()({label:"\u6536\u8d27\u4eba\u59d3\u540d"},m),a("getcustomer_id")(K.a.createElement(O["a"],{size:"large",style:{width:"100%"},dataSource:r.map(function(e){var t=O["a"].Option;return K.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object($["g"])(e,t)},onChange:function(t){Object($["f"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement(H["a"].Item,m,K.a.createElement(k["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.courier,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.courier.senderList),i=t.loading,c=t.dispatch,l=(t.car.lastCar,this.state),s=l.selectedRows,u=l.current,p=l.pageSize,m=l.updateOrderModalVisible,h=l.downloadModalVisible,f=l.addFormModalVisible,y=l.record;return K.a.createElement("div",null,K.a.createElement(d["a"],{bordered:!1},K.a.createElement("div",{className:G.a.tableList},K.a.createElement("div",{className:G.a.tableListForm},this.renderForm()),K.a.createElement("div",{className:G.a.tableListOperator},s.length>0&&K.a.createElement("span",null,K.a.createElement(k["a"],{onClick:this.onUpdateSenderModal},"\u66f4\u6539\u9001\u8d27\u4eba"),K.a.createElement(k["a"],{onClick:this.onDelSender},"\u53d6\u6d88\u9001\u8d27\u4eba"),K.a.createElement(k["a"],{onClick:this.onDownload},"\u4e0b\u8f7d"),K.a.createElement(k["a"],{onClick:this.onPrintCheckList},"\u6258\u8fd0\u5355\u6253\u5370"),K.a.createElement(k["a"],{onClick:this.onArriveNotify},"\u5230\u8d27\u901a\u77e5"))),K.a.createElement(q["a"],{onRef:this.onRefTable,selectedRows:s,loading:i,className:G.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},rowClassNameHandler:function(e,t){return 6===e.order_status?G.a.settleColor:7===e.order_status?G.a.payColor:""},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),K.a.createElement(Q["a"],{modalVisible:m,record:y,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch,isEdit:0,dispatch:c}),K.a.createElement(ne,{modalVisible:f,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelAddFormClick,senderList:o,selectedRows:s}),K.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},K.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(B["PureComponent"]),l=s))||l)||l);t["default"]=re},PCNu:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=(a("2qtc"),a("kLXV")),w=(a("5NDa"),a("5rEg")),v=a("jehZ"),x=a.n(v),_=(a("14J3"),a("BMrR")),S=(a("jCWc"),a("kPKH")),C=(a("+L6B"),a("2/Rp")),E=(a("O3gP"),a("lrIw")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("B797"),U=a("CkN6"),q=a("82qg"),Q=a("b5ys"),X=a.n(Q),G=(a("S+eF"),a("7Qib")),W=a("XS0u"),Z=z["a"].RangePicker,J=N["a"].Item,$=I["a"].Option,ee=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){console.log("####",t.props.abnormal_type_id),a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text}),console.log(e,t),console.log(a.state)},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state,o=r.abnormal_type,i=r.abnormal_type_id;n.validateFields(function(e,a){console.log(a),e||(a.abnormal_type!=o&&(o=a.abnormal_type,i=0),t({abnormal_status:2,abnormal_reason:a.abnormal_reason,abnormal_amount:a.abnormal_amount,abnormal_resolve_type:a.abnormal_resolve_type,abnormal_remark:a.abnormal_remark,abnormal_type:o,abnormal_type_id:i}))})},a.renderCustomerOption=function(e){var t=E["a"].Option;return H.a.createElement(t,{key:e.abnormal_type_id,abnormal_type_id:e.abnormal_type_id,text:e.abnormal_type},e.abnormal_type)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=e.abnormalTypes;Object(Y["d"])(n),n.length>0&&n[0],this.state.agencyFee;return H.a.createElement(g["a"],{destroyOnClose:!0,title:"\u5904\u7406\u5f02\u5e38",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(C["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(C["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:X.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u5f02\u5e38\u5355\u53f7"},n.length))),H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,x()({},this.formItemLayout,{label:"\u5f02\u5e38\u7c7b\u578b"}),r.getFieldDecorator("abnormal_type",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5f02\u5e38\u7c7b\u578b"}]})(H.a.createElement(E["a"],{size:"large",style:{width:"100%"},dataSource:o.map(this.renderCustomerOption),onSelect:this.onAbnormalSelect,placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}))))),H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u5f02\u5e38\u539f\u56e0"},r.getFieldDecorator("abnormal_reason",{initialValue:""})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u4ea7\u751f\u91d1\u989d"},r.getFieldDecorator("abnormal_amount",{initialValue:""})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u5904\u7406\u65b9\u5f0f"},r.getFieldDecorator("abnormal_resolve_type",{initialValue:""})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(_["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(S["a"],null,H.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},r.getFieldDecorator("abnormal_remark",{initialValue:""})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),te=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.abnormal,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,abnormal:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",width:"80px",align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px"},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px"},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",width:"80px",render:function(e){return 1==e?"\u73b0\u4ed8":2==e?"\u56de\u4ed8":"\u63d0\u4ed8"}},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",width:"170px",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u5f02\u5e38\u7c7b\u578b",dataIndex:"abnormal_type",width:"80px"},{title:"\u5904\u7406\u65b9\u5f0f",dataIndex:"abnormal_resolve_type",width:"80px"},{title:"\u5f02\u5e38\u91d1\u989d",dataIndex:"abnormal_amount",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==W["a"].company_type?(a.setState({currentCompany:W["a"]}),W["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchGetCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=b()(f.a.mark(function e(t,n){var r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.company.branchCompanyList,o=r.filter(function(e){if(e.company_id==t)return e}),o.length>0&&a.setState({currentCompany:o[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.abnormal_status=2,o.entrunk_date&&o.entrunk_date.length,Object.keys(o).forEach(function(e){o[e]||delete o[e]});var i=Object.assign({filter:o},e);r({type:"abnormal/getOrderListAction",payload:m()({pageNo:t||c,pageSize:l},i)}),r({type:"abnormal/getOrderStatisticAction",payload:m()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onPrint=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.abnormal,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalAbnormalAmount;return H.a.createElement("div",{className:X.a.tableFooter},H.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u7968\u6570\uff1a",t||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u8d54\u4ed8\u91d1\u989d\uff1a",l||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){var t,a,n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"abnormal/initOrderListAction"});case 3:return e.next=5,t({type:"company/getBranchCompanyList",payload:m()({},W["a"])});case 5:return a=e.sent,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),n=this.setCurrentCompany(a),e.next=10,t({type:"abnormal/getAbnormalTypeListAction",payload:{pageNo:1,pageSize:100,company_id:n.company_id}});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.normalSiteList),r=e.company.branchCompanyList,o=e.abnormal.abnormalTypes,i={};r.length>0&&1!=W["a"].company_type&&(i.initialValue=r[0].company_id||""),1!=W["a"].company_type&&(i.initialValue=W["a"].company_id||"");var c=1==W["a"].company_type;return H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(J,{label:"\u5206\u516c\u53f8"},t("company_id",i)(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:c},(1==W["a"].company_type?r:[W["a"]]).map(function(e){return H.a.createElement($,{key:e.company_id,value:e.company_id},e.company_name)})))),H.a.createElement(J,{label:"\u8fd0\u5355\u53f7"},t("order_code",{})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),H.a.createElement(J,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:W["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},n.map(function(e){return H.a.createElement($,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(J,{label:"\u5f02\u5e38\u7c7b\u578b"},t("abnormal_type_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},o.map(function(e){return H.a.createElement($,{key:e.abnormal_type_id,value:e.abnormal_type_id},e.abnormal_type)})))),H.a.createElement(J,{label:"\u6258\u8fd0\u65e5\u671f"},t("entrunk_date",{})(H.a.createElement(Z,{locale:G["b"],style:{width:"250px"}}))),H.a.createElement(J,null,H.a.createElement(C["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.abnormal,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=t.abnormal.abnormalTypes,c=this.state,l=c.selectedRows,s=c.accountStatistic,u=c.current,p=c.pageSize,m=c.updateOrderModalVisible,h=c.settleModalVisible,f=c.downModalVisible,y=c.signModalVisible,b=c.cancelSignModalVisible,w=c.downloadModalVisible,v=c.printModalVisible,x=c.record;return H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:X.a.tableList},H.a.createElement("div",{className:X.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:X.a.tableListOperator},l.length>0&&H.a.createElement("span",null,H.a.createElement(C["a"],{onClick:this.onDownload},"\u4e0b\u8f7d"))),H.a.createElement(U["a"],{onRef:this.onRefTable,selectedRows:l,loading:o,className:X.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(q["a"],{modalVisible:m,record:x,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),H.a.createElement(ee,{modalVisible:f,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:l,abnormalTypes:i}),H.a.createElement(g["a"],{title:"\u53d6\u6d88\u7ed3\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(l.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(s.totalAccount," ")),H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:v,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=te},Pc1n:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=(a("2qtc"),a("kLXV")),f=(a("14J3"),a("BMrR")),y=(a("jCWc"),a("kPKH")),b=a("jehZ"),g=a.n(b),w=(a("5NDa"),a("5rEg")),v=(a("+L6B"),a("2/Rp")),x=(a("O3gP"),a("lrIw")),_=a("d6i3"),S=a.n(_),C=a("1l/V"),E=a.n(C),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("CkN6"),U=a("KbBV"),q=a.n(U),Q=a("7Qib"),X=a("XS0u"),G=z["a"].RangePicker,W=N["a"].Item,Z=I["a"].Option,J=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text})},a.ButtonClicked=!1,a.onAddHandler=function(){if(!a.ButtonClicked){a.ButtonClicked=!0,setTimeout(function(){a.ButtonClicked=!1},2e3);var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.incomeTypes,o=void 0===r?[]:r,i=e.record,c=void 0===i?{}:i;n.validateFields(function(){var e=E()(S.a.mark(function e(a,r){var i,l;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return i=!0,l="",o.forEach(function(e){e.incometype_id==r["incometype_id"]&&(i=!1,l=e.incometype)}),e.next=7,t({income_id:c.income_id||0,income_money:Number(r.income_money),incometype_id:i?"":r.incometype_id,incometype:i?r.incometype_id:l,income_reason:r.income_reason,remark:r.remark});case 7:c.income_id||n.setFieldsValue({income_money:"",income_reason:"",remark:""});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())}},a.renderCustomerOption=function(e){var t=x["a"].Option;return H.a.createElement(t,{key:e.incometype_id,incometype_id:e.incometype_id,value:"".concat(e.incometype_id),text:e.incometype},e.incometype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=void 0===n?{}:n,o=e.form,i=e.incomeTypes,c=void 0===i?[]:i;return H.a.createElement(h["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u6536\u5165",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(v["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(v["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u6536\u5165\u91d1\u989d"}),o.getFieldDecorator("income_money",{initialValue:r.income_money,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u5165\u91d1\u989d"}]})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u6536\u5165\u7c7b\u578b"}),o.getFieldDecorator("incometype_id",{initialValue:"".concat(r.incometype_id||""),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u5165\u7c7b\u578b"}]})(H.a.createElement(x["a"],{size:"large",style:{width:"280px"},dataSource:c.map(this.renderCustomerOption),placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",allowClear:!0}," "))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u6536\u5165\u539f\u56e0"}),o.getFieldDecorator("income_reason",{initialValue:r.income_reason})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},o.getFieldDecorator("remark",{initialValue:r.remark})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),$=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.income,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,income:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},settleModalVisible:!1,addIncomeModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u6536\u5165\u65e5\u671f",dataIndex:"income_date",width:"170px",sorter:!0,render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u6536\u5165\u91d1\u989d",width:"80px",sorter:!0,dataIndex:"income_money"},{title:"\u6536\u5165\u7c7b\u578b",width:"140px",dataIndex:"incometype",sorter:!0},{title:"\u6536\u5165\u539f\u56e0",width:"120px",dataIndex:"income_reason",sorter:!0},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name",sorter:!0},{title:"\u5206\u516c\u53f8",width:"80px",dataIndex:"company_name",sorter:!0},{title:"\u64cd\u4f5c\u7528\u6237",dataIndex:"operator_name",sorter:!0},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchIncomeTypeList=E()(S.a.mark(function e(){var t,n,r;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n={},n.company_id=X["a"].company_id||-1,1==X["a"].company_type&&(n.site_id=X["c"].site_id),e.next=6,t({type:"income/getIncomeTypesAction",payload:n});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)})),a.fetchCompanySiteList=function(){var e=E()(S.a.mark(function e(t){var n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=E()(S.a.mark(function e(t){var n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=E()(S.a.mark(function e(t,n){var r,o,i;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.normalSiteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]}),a.fetchIncomeTypeList({siteId:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.income_date&&o.income_date.length>0&&(o.income_date=o.income_date.map(function(e){return"".concat(e.valueOf())})),o.company_id=X["a"].company_id;var i=Object.assign({filter:o},e);r({type:"income/getIncomesAction",payload:m()({pageNo:t||c,pageSize:l},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=E()(S.a.mark(function e(t,n,r){var o,i,c,l;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=E()(S.a.mark(function e(t){var n,r,o;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=m()({},t,{company_id:X["a"].company_id,company_name:X["a"].company_name}),X["c"].site_id&&Object.assign(r,{site_id:X["c"].site_id,site_name:X["c"].site_name}),e.next=5,n({type:"income/addIncomeAction",payload:r});case 5:o=e.sent,o&&0==o.code?(u["a"].success(r.income_id?"\u7f16\u8f91\u6210\u529f":"\u6dfb\u52a0\u6210\u529f\uff01"),r.income_id&&a.onIncomeModalCancel(),a.handleSearch(),a.fetchIncomeTypeList()):u["a"].error(o&&o.msg||"\u6dfb\u52a0\u5931\u8d25");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddIncomeClick=E()(S.a.mark(function e(){var t,n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.currentSite,n=void 0===t?{}:t,1!=X["a"].company_id||n.site_id){e.next=4;break}return h["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"}),e.abrupt("return");case 4:a.setState({addIncomeModalVisible:!0,record:{}});case 5:case"end":return e.stop()}},e)})),a.onCancelIncomeClick=E()(S.a.mark(function e(){return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addIncomeModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onIncomeModalShow=function(){a.setState({addIncomeModalVisible:!0})},a.onIncomeModalCancel=function(){a.setState({addIncomeModalVisible:!1})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){var r=j()(Number(e.income_date)),o=j()(Number((new Date).getTime())),i=o.diff(r,"hours");["site_pay","company_account"].includes(X["b"].role_value)&&(i>=24?u["a"].error("\u8d85\u8fc724\u5c0f\u65f6\u8bb0\u5f55\u4e0d\u53ef\u7f16\u8f91"):(a.setState({record:e}),a.onIncomeModalShow()))},a.tableFooter=function(){var e=a.props.income,t=e.total,n=e.totalIncome;return H.a.createElement("div",{className:q.a.tableFooter},H.a.createElement("span",null,"\u6536\u5165\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=E()(S.a.mark(function e(){var t;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,this.fetchCompanySiteList(X["a"].company_id),e.next=4,this.fetchIncomeTypeList();case 4:return e.next=6,t({type:"income/getIncomeDetailsAction",payload:{}});case 6:this.getOrderList();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.normalSiteList,e.company.branchCompanyList),r=void 0===n?[]:n,o=e.income.incomeTypes,i=void 0===o?[]:o,c={};r.length>0&&(c.initialValue=r[0].company_id||"");return H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},1==X["a"].company_type&&H.a.createElement(W,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:X["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,style:{width:"150px"}},[X["c"]].map(function(e){return H.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(W,{label:"\u6536\u5165\u65e5\u671f"},t("income_date",{initialValue:[j()(new Date,"YYYY-MM-DD"),j()(new Date,"YYYY-MM-DD")]})(H.a.createElement(G,{locale:Q["b"],style:{width:"250px"}}))),H.a.createElement(W,{label:"\u6536\u5165\u5206\u7c7b"},t("incometype_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},i.map(function(e){return H.a.createElement(Z,{key:e.incometype_id,value:e.incometype_id},e.incometype)})))),H.a.createElement(W,null,H.a.createElement(v["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.income,n=a.incomeList,r=a.total,o=a.incomeTypes,i=(a.totalIncome,t.loading),c=this.state,l=c.selectedRows,s=c.current,u=c.pageSize,p=c.addIncomeModalVisible,m=c.downloadModalVisible,f=c.printModalVisible,y=c.record,b=!0;return["site_searchuser","site_admin"].indexOf(X["b"].role_value)>=0&&(b=!1),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:q.a.tableList},H.a.createElement("div",{className:q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:q.a.tableListOperator},b&&H.a.createElement(v["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddIncomeClick(!0)}},"\u6dfb\u52a0")),H.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:l,loading:i,className:q.a.dataTable,rowKey:"income_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(J,{modalVisible:p,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelIncomeClick,incomeTypes:o,selectedRows:l,record:y}),H.a.createElement(h["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(h["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=$},PyAq:function(e,t,a){"use strict";a.r(t);a("T2oS");var n,r,o,i,c=a("W9HT"),l=(a("2qtc"),a("kLXV")),s=(a("IzEo"),a("bx4M")),d=(a("+L6B"),a("2/Rp")),u=(a("5NDa"),a("5rEg")),p=a("jehZ"),m=a.n(p),h=(a("O3gP"),a("lrIw")),f=(a("miYZ"),a("tsqr")),y=a("d6i3"),b=a.n(y),g=a("1l/V"),w=a.n(g),v=a("p0pE"),x=a.n(v),_=a("2Taf"),S=a.n(_),C=a("vZ4D"),E=a.n(C),k=a("l4Ni"),O=a.n(k),A=a("ujKo"),L=a.n(A),M=a("rlhR"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=a("q1tI"),N=a.n(I),z=a("MuoO"),P=a("wd/R"),H=a.n(P),B=a("B797"),K=a("CkN6"),j=a("82qg"),Y=a("SLv7"),U=a.n(Y),q=a("XS0u"),Q=a("80Er"),X=a("/mOS"),G=R["a"].Item,W=F["a"].Option,Z=(n=Object(z["connect"])(function(e){var t=e.common,a=e.customer,n=e.company,r=e.unsettle,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{common:t,customer:a,company:n,unsettle:r,site:o,car:i,receiver:c,loading:l.models.rule}}),r=R["a"].create(),n(o=r((i=function(e){function t(){var e,a;S()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=O()(this,(e=L()(t)).call.apply(e,[this].concat(r))),a.state=x()({loading:!1,selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{},currentShipSite:{},getCustomerSearch:"",sendCustomerSearch:""},Q["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name",sorter:!0},{title:"\u6536\u83b7\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_real",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount",sorter:!0},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",sorter:!0,dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",sorter:!0,dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",sorter:!0,dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",sorter:!0,dataIndex:"create_date",render:function(e){return N.a.createElement("span",null,e&&H()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u6ede\u7eb3\u91d1",width:"80px",sorter:!0,dataIndex:"late_fee"},{title:"\u8d27\u8f66\u7f16\u53f7",width:"80px",dataIndex:"car_code"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=w()(b.a.mark(function e(t,n){var r,o,i;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]}),Object(Q["b"])(T()(a),{company_id:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({sorter:"create_date|ascend"},1)},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;i.sendCustomerSearch,i.getCustomerSearch;o.validateFields(function(){var n=w()(b.a.mark(function n(o,i){var s;return b.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(Q["k"])(T()(a),i);case 4:i=n.sent,s=Object.assign({filter:i},e),r({type:"unsettle/getOrderListAction",payload:x()({pageNo:t||c,pageSize:l},s)}),r({type:"unsettle/getOrderStatisticAction",payload:x()({},s)}),a.standardTable.cleanSelectedKeys();case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=w()(b.a.mark(function e(t,n,r){var o,i,c,l;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onSignOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/signAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(f["a"].success("\u7b7e\u5b57\u6210\u529f\uff01"),a.getOrderList(),a.onSignCancel()):f["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onSign=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onSignCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=w()(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(B["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.btnClicked=!1,a.onSettleOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),a.setState({loading:!0}),e.next=10,t({type:"unsettle/settleOrderAction",payload:{order_id:r}});case 10:o=e.sent,a.setState({loading:!1}),0==o.code?(f["a"].success("\u6838\u5bf9\u6210\u529f\uff01"),a.onSettleCancel(),setTimeout(function(){a.getOrderList()},800)):f["a"].error(o.msg);case 13:case"end":return e.stop()}},e)})),a.onCancelSign=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelSignCancel=w()(b.a.mark(function e(){return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelSignOk=w()(b.a.mark(function e(){var t,n,r,o;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(f["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},800),a.onCancelSignCancel()):f["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrintOrder=function(){var e=a.state.selectedRows;e.length<=0?f["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u6253\u5370\u7684\u6e05\u5355"):a.onPrintOrderConfirm()},a.onPrintOrderConfirm=w()(b.a.mark(function e(){var t,n,r=arguments;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:"",n=a.state.selectedRows,Object(X["b"])({selectedRows:n,lastCar:{},type:t});case 3:case"end":return e.stop()}},e)})),a.onDownloadOrder=function(){var e=a.state.selectedRows;e.length<=0?f["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u4e0b\u8f7d\u7684\u6e05\u5355"):a.onPrintOrderConfirm("pdf")},a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(){var e=w()(b.a.mark(function e(t,n,r){var o,i;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.props.dispatch,!["site_receipt"].includes(q["b"].role_value)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,o({type:"customer/getCustomerAction",payload:{getcustomer_id:t.getcustomer_id,sendcustomer_id:t.sendcustomer_id}});case 5:i=e.sent,a.setState({record:t,currentGetCustomer:i.getCustomer,currentSendCustomer:i.sendCustomer}),a.onUpdateOrderModalShow();case 8:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onRowClick=function(e,t,a){},a.onRefTable=function(e){a.standardTable=e},a.tableFooter=function(){var e=a.props.unsettle,t=e.total,n=e.totalOrderAmount,r=e.totalRealOrderAmount,o=e.totalTransAmount,i=e.totalInsurancefee,c=e.totalAdvancepayAmount,l=e.totalDeliverAmount,s=e.totalLatefee,d=e.totalBonusfee;return N.a.createElement("div",{className:U.a.tableFooter},N.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",r||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",o||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",c||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",l||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",i||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u7968\u6570\uff1a",t||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",s||"0"),N.a.createElement("span",{className:U.a.footerSplit},"\u5956\u91d1\uff1a",d||"0"))},a.renderCustomerOption=function(e){var t=h["a"].Option;return N.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)},a}return D()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=w()(b.a.mark(function e(){var t,a,n;return b.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:x()({},q["a"])});case 3:return e.sent,2==q["a"].company_type&&(Object(Q["b"])(this,{company_id:q["a"].company_id}),this.setState({currentCompany:q["a"]})),e.next=7,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 7:a=e.sent,Object(Q["c"])(this,{}),a&&a.length>0&&(n=a.filter(function(e){return 3==e.site_type||2==e.site_type}),n.length>0&&this.setState({currentShipSite:n[0]})),t({type:"common/initOrderListAction"});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=n.getCustomerList,o=void 0===r?[]:r,i=n.sendCustomerList,c=void 0===i?[]:i,l=t.company.branchCompanyList,s=t.site.entrunkSiteList,p=this.state,f=(p.currentShipSite,p.currentCompany,{}),y={};1!=q["a"].company_type&&(y.initialValue=q["a"].company_id||"");var b=1==q["a"].company_type;return N.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(G,m()({label:"\u5206\u516c\u53f8"},f),a("company_id",y)(N.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:b},(1==q["a"].company_type?l:[q["a"]]).map(function(e){return N.a.createElement(W,{key:e.company_id,value:e.company_id},e.company_name)})))),N.a.createElement(G,m()({label:"\u8d27\u8f66\u7f16\u53f7"},f),a("shipsite_id",{})(N.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(s||[]).map(function(e){return N.a.createElement(W,{key:e.site_id,value:e.site_id},e.site_name)}))),a("car_code",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"80px"}}))),N.a.createElement(G,m()({label:"\u6536\u8d27\u4eba\u59d3\u540d"},f),a("getcustomer_id")(N.a.createElement(h["a"],{size:"large",style:{width:"100%"},dataSource:o.map(function(e){var t=h["a"].Option;return N.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Q["g"])(e,t)},onChange:function(t){Object(Q["f"])(e,t)},allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),N.a.createElement(G,m()({label:"\u6536\u8d27\u4eba\u7535\u8bdd"},f),a("getcustomer_mobile",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),N.a.createElement(G,m()({label:"\u53d1\u8d27\u4eba\u59d3\u540d"},f),a("sendcustomer_id")(N.a.createElement(h["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=h["a"].Option;return N.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Q["i"])(e,t)},onChange:function(t){Object(Q["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),N.a.createElement(G,m()({label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},f),a("sendcustomer_mobile",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),N.a.createElement(G,m()({label:"\u8fd0\u5355\u53f7"},f),a("order_code",{})(N.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"220px"}}))),N.a.createElement(R["a"].Item,f,N.a.createElement(d["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"render",value:function(){var e=this,t=this.props,a=t.unsettle,n=a.orderList,r=a.total,o=t.loading,i=t.dispatch,u=this.state,p=u.selectedRows,m=u.accountStatistic,h=u.current,f=u.pageSize,y=u.updateOrderModalVisible,b=u.settleModalVisible,g=u.signModalVisible,w=u.cancelSignModalVisible,v=u.downloadModalVisible,x=u.printModalVisible,_=u.record,S=u.currentGetCustomer,C=void 0===S?{}:S,E=u.currentSendCustomer,k=void 0===E?{}:E,O=u.currentCompany,A=!0;return["site_admin","site_orderuser","site_pay","site_receipt","site_searchuser"].indexOf(q["b"].role_value)>=0&&(A=!1),N.a.createElement("div",null,N.a.createElement(s["a"],{bordered:!1},N.a.createElement("div",{className:U.a.tableList},N.a.createElement("div",{className:U.a.tableListForm},this.renderSimpleForm()),N.a.createElement("div",{className:U.a.tableListOperator},p.length>0&&A&&N.a.createElement("span",null,N.a.createElement(d["a"],{onClick:this.onSettle},"\u8d26\u76ee\u6838\u5bf9"),N.a.createElement(d["a"],{onClick:this.onSign},"\u7b7e\u5b57"),N.a.createElement(d["a"],{onClick:this.onCancelSign},"\u53d6\u6d88\u7b7e\u5b57"),N.a.createElement(d["a"],{onClick:this.onPrintOrder},"\u8d27\u7269\u6e05\u5355\u6253\u5370"),N.a.createElement(d["a"],{onClick:this.onDownloadOrder},"\u8d27\u7269\u6e05\u5355\u4e0b\u8f7d"))),N.a.createElement(K["a"],{onRef:this.onRefTable,selectedRows:p,loading:o,className:U.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:f,current:h,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 1==e.sign_status?U.a.signColor:""}})),this.tableFooter()),N.a.createElement(j["a"],{modalVisible:y,record:_,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.getOrderList,isEdit:["site_pay","site_receipt","company_account","company_admin"].indexOf(q["b"].role_value)>=0?1:0,dispatch:i,currentCompany:O,currentGetCustomer:C,currentSendCustomer:k}),N.a.createElement(c["a"],{spinning:this.state.loading},N.a.createElement(l["a"],{title:"\u786e\u8ba4\u7ed3\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onSettleOk,onCancel:this.onSettleCancel},N.a.createElement("p",null,"\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(p.length,"\uff0c\u7ed3\u7b97\u603b\u989d ").concat(m.totalAccount," ")),N.a.createElement("p",null,"\u5956\u91d1".concat(Object(B["a"])(p,O),"\uff0c\u6ede\u7eb3\u91d1 ").concat(Object(B["b"])(p,O)," ")),N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f"))),N.a.createElement(l["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onSignOk,onCancel:this.onSignCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),N.a.createElement(l["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),N.a.createElement(l["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:x,onOk:this.onPrintOk,onCancel:this.onPrintCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),N.a.createElement(l["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:v,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},N.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(I["PureComponent"]),o=i))||o)||o);t["default"]=Z},R1Dz:function(e,t,a){"use strict";var n=a("q1tI");t["a"]=Object(n["createContext"])()},SLv7:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-account-account-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-account-account-minusType",tableList:"antd-pro-pages-account-account-tableList",tableListOperator:"antd-pro-pages-account-account-tableListOperator",tableFooter:"antd-pro-pages-account-account-tableFooter",footerSplit:"antd-pro-pages-account-account-footerSplit",signColor:"antd-pro-pages-account-account-signColor",shipColor:"antd-pro-pages-account-account-shipColor",editOrderColor:"antd-pro-pages-account-account-editOrderColor",settleColor:"antd-pro-pages-account-account-settleColor",payColor:"antd-pro-pages-account-account-payColor",selectedColor:"antd-pro-pages-account-account-selectedColor",tableDetail:"antd-pro-pages-account-account-tableDetail",modalForm:"antd-pro-pages-account-account-modalForm",entrunkForm:"antd-pro-pages-account-account-entrunkForm",formItemFloat:"antd-pro-pages-account-account-formItemFloat",tableListForm:"antd-pro-pages-account-account-tableListForm",submitButtons:"antd-pro-pages-account-account-submitButtons",dataTable:"antd-pro-pages-account-account-dataTable","ant-form-item":"antd-pro-pages-account-account-ant-form-item","ant-select":"antd-pro-pages-account-account-ant-select",formItemNoBreak:"antd-pro-pages-account-account-formItemNoBreak"}},VlJg:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-trans-confirm-trans-confirm-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-trans-confirm-trans-confirm-minusType",tableList:"antd-pro-pages-trans-confirm-trans-confirm-tableList",tableListOperator:"antd-pro-pages-trans-confirm-trans-confirm-tableListOperator",tableFooter:"antd-pro-pages-trans-confirm-trans-confirm-tableFooter",footerSplit:"antd-pro-pages-trans-confirm-trans-confirm-footerSplit",signColor:"antd-pro-pages-trans-confirm-trans-confirm-signColor",shipColor:"antd-pro-pages-trans-confirm-trans-confirm-shipColor",editOrderColor:"antd-pro-pages-trans-confirm-trans-confirm-editOrderColor",settleColor:"antd-pro-pages-trans-confirm-trans-confirm-settleColor",payColor:"antd-pro-pages-trans-confirm-trans-confirm-payColor",selectedColor:"antd-pro-pages-trans-confirm-trans-confirm-selectedColor",tableDetail:"antd-pro-pages-trans-confirm-trans-confirm-tableDetail",modalForm:"antd-pro-pages-trans-confirm-trans-confirm-modalForm",entrunkForm:"antd-pro-pages-trans-confirm-trans-confirm-entrunkForm",formItemFloat:"antd-pro-pages-trans-confirm-trans-confirm-formItemFloat",tableListForm:"antd-pro-pages-trans-confirm-trans-confirm-tableListForm",submitButtons:"antd-pro-pages-trans-confirm-trans-confirm-submitButtons",dataTable:"antd-pro-pages-trans-confirm-trans-confirm-dataTable","ant-form-item":"antd-pro-pages-trans-confirm-trans-confirm-ant-form-item","ant-select":"antd-pro-pages-trans-confirm-trans-confirm-ant-select",formItemNoBreak:"antd-pro-pages-trans-confirm-trans-confirm-formItemNoBreak"}},W660:function(e,t,a){e.exports={content:"antd-pro-layouts-basic-layout-content"}},ZeH8:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-pay-pay-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-pay-pay-minusType",tableList:"antd-pro-pages-pay-pay-tableList",tableListOperator:"antd-pro-pages-pay-pay-tableListOperator",tableFooter:"antd-pro-pages-pay-pay-tableFooter",footerSplit:"antd-pro-pages-pay-pay-footerSplit",signColor:"antd-pro-pages-pay-pay-signColor",shipColor:"antd-pro-pages-pay-pay-shipColor",editOrderColor:"antd-pro-pages-pay-pay-editOrderColor",settleColor:"antd-pro-pages-pay-pay-settleColor",payColor:"antd-pro-pages-pay-pay-payColor",selectedColor:"antd-pro-pages-pay-pay-selectedColor",tableDetail:"antd-pro-pages-pay-pay-tableDetail",modalForm:"antd-pro-pages-pay-pay-modalForm",entrunkForm:"antd-pro-pages-pay-pay-entrunkForm",formItemFloat:"antd-pro-pages-pay-pay-formItemFloat",tableListForm:"antd-pro-pages-pay-pay-tableListForm",submitButtons:"antd-pro-pages-pay-pay-submitButtons",dataTable:"antd-pro-pages-pay-pay-dataTable","ant-form-item":"antd-pro-pages-pay-pay-ant-form-item","ant-select":"antd-pro-pages-pay-pay-ant-select",formItemNoBreak:"antd-pro-pages-pay-pay-formItemNoBreak"}},a0Pg:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("5NDa"),a("5rEg")),g=(a("14J3"),a("BMrR")),w=(a("jCWc"),a("kPKH")),v=a("jehZ"),x=a.n(v),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("p0pE"),E=a.n(C),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=(a("B797"),a("CkN6")),U=a("82qg"),q=a("b5ys"),Q=a.n(q),X=(a("S+eF"),a("7Qib")),G=a("XS0u"),W=z["a"].RangePicker,Z=N["a"].Item,J=I["a"].Option,$=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text})},a.onDownAccountHandler=function(){var e=a.props,t=e.onResolveAbnormal,n=e.form,r=e.abnormalTypes,o=void 0===r?[]:r;n.validateFields(function(e,a){var n;e||(o.forEach(function(e){e.abnormal_type_id==a.abnormal_type_id&&(n=e)}),n||(n={abnormal_type:a.abnormal_type,abnormal_type_id:0}),t(E()({abnormal_status:2,abnormal_reason:a.abnormal_reason,abnormal_amount:a.abnormal_amount,abnormal_resolve_type:a.abnormal_resolve_type,abnormal_remark:a.abnormal_remark},n)))})},a.renderCustomerOption=function(e){var t=S["a"].Option;return H.a.createElement(t,{key:e.abnormal_type_id,abnormal_type_id:e.abnormal_type_id,value:"".concat(e.abnormal_type_id),text:e.abnormal_type},e.abnormal_type)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onResolveAbnormalModalCancel,n=e.selectedRows,r=e.form,o=e.abnormalTypes;return console.log(n),H.a.createElement(y["a"],{destroyOnClose:!0,title:"\u5904\u7406\u5f02\u5e38",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(Z,x()({},this.formItemLayout,{label:"\u5f02\u5e38\u7c7b\u578b"}),r.getFieldDecorator("abnormal_type_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5f02\u5e38\u7c7b\u578b"}],initialValue:n.length>0?"".concat(n[0].abnormal_type_id):""})(H.a.createElement(S["a"],{size:"large",style:{width:"100%"},dataSource:o.map(this.renderCustomerOption),onSelect:this.onAbnormalSelect,placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u5f02\u5e38\u539f\u56e0"},r.getFieldDecorator("abnormal_reason",{initialValue:n.length>0?n[0].abnormal_reason:""})(H.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u4ea7\u751f\u91d1\u989d"},r.getFieldDecorator("abnormal_amount",{initialValue:""})(H.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u5904\u7406\u65b9\u5f0f"},r.getFieldDecorator("abnormal_resolve_type",{initialValue:""})(H.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},r.getFieldDecorator("abnormal_remark",{initialValue:""})(H.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),ee=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.abnormal,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,abnormal:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,abnormalModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",width:"80px",align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px"},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px"},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",width:"80px",render:function(e){return 1==e?"\u73b0\u4ed8":2==e?"\u56de\u4ed8":"\u63d0\u4ed8"}},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return H.a.createElement("span",null,e&&j()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u4e2d\u8f6c",dataIndex:"transfer_type",width:"80px",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.setCurrentCompany=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 2==G["a"].company_type?(a.setState({currentCompany:G["a"]}),G["a"]):e&&e.length>0?(a.setState({currentCompany:e[0]}),e[0]):{}},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.company.branchCompanyList,o=r.filter(function(e){if(e.company_id==t)return e}),o.length>0&&a.setState({currentCompany:o[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.abnormal_status=1,Object.keys(o).forEach(function(e){o[e]||delete o[e]}),o.entrunk_date&&o.entrunk_date.length;var i=Object.assign({filter:o},e);r({type:"abnormal/getOrderListAction",payload:E()({pageNo:t||c,pageSize:l},i)}),r({type:"abnormal/getOrderStatisticAction",payload:E()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onCancelAbnormal=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=5,n({type:"abnormal/cancelAbnormalAction",payload:{abnormal_status:0,order_id:o}});case 5:return i=e.sent,0==i.code?(u["a"].success("\u53d6\u6d88\u5f02\u5e38\u6210\u529f\uff01"),a.handleSearch()):u["a"].error(i.msg),e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelAbnormalModal=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:y["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u53d6\u6d88\u5f02\u5e38\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onCancelAbnormal});case 1:case"end":return e.stop()}},e)})),a.onResolveAbnormal=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=5,n({type:"abnormal/resolveAbnormalAction",payload:Object.assign(t,{order_id:o})});case 5:return i=e.sent,0==i.code?(u["a"].success("\u5904\u7406\u5f02\u5e38\u6210\u529f\uff01"),a.onResolveAbnormalModalCancel(),a.handleSearch()):u["a"].error(i.msg),e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onResolveAbnormalModal=function(){a.setState({abnormalModalVisible:!0})},a.onResolveAbnormalModalCancel=function(){a.setState({abnormalModalVisible:!1})},a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.abnormal,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return H.a.createElement("div",{className:Q.a.tableFooter},H.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),H.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"abnormal/initOrderListAction"});case 3:return e.next=5,t({type:"company/getBranchCompanyList",payload:E()({},G["a"])});case 5:return a=e.sent,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),n=this.setCurrentCompany(a),e.next=10,t({type:"abnormal/getAbnormalTypeListAction",payload:{pageNo:1,pageSize:100,company_id:n.company_id}});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.normalSiteList),r=e.company.branchCompanyList,o=e.abnormal.abnormalTypes,i={};r.length>0&&1!=G["a"].company_type&&(i.initialValue=r[0].company_id||""),1!=G["a"].company_type&&(i.initialValue=G["a"].company_id||"");var c=1==G["a"].company_type;return H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(Z,{label:"\u5206\u516c\u53f8"},t("company_id",i)(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:c},(1==G["a"].company_type?r:[G["a"]]).map(function(e){return H.a.createElement(J,{key:e.company_id,value:e.company_id},e.company_name)})))),H.a.createElement(Z,{label:"\u8fd0\u5355\u53f7"},t("order_code",{})(H.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),H.a.createElement(Z,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:G["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},n.map(function(e){return H.a.createElement(J,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(Z,{label:"\u5f02\u5e38\u7c7b\u578b"},t("abnormal_type_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},o.map(function(e){return H.a.createElement(J,{key:e.abnormal_type_id,value:e.abnormal_type_id},e.abnormal_type)})))),H.a.createElement(Z,{label:"\u6258\u8fd0\u65e5\u671f"},t("entrunk_date",{})(H.a.createElement(W,{locale:X["b"],style:{width:"250px"}}))),H.a.createElement(Z,null,H.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.abnormal,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=t.abnormal.abnormalTypes,c=this.state,l=c.selectedRows,s=c.accountStatistic,u=c.current,p=c.pageSize,m=c.updateOrderModalVisible,h=c.settleModalVisible,f=c.abnormalModalVisible,b=c.signModalVisible,g=c.cancelSignModalVisible,w=c.downloadModalVisible,v=c.printModalVisible,x=c.record,S=!0;return["site_searchuser"].indexOf(G["b"].role_value)>=0&&(S=!1),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:Q.a.tableList},H.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:Q.a.tableListOperator},l.length>0&&S&&H.a.createElement("span",null,H.a.createElement(_["a"],{onClick:this.onCancelAbnormalModal},"\u53d6\u6d88\u5f02\u5e38"),H.a.createElement(_["a"],{onClick:this.onResolveAbnormalModal},"\u5904\u7406\u5f02\u5e38"))),H.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:l,loading:o,className:Q.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){}})),this.tableFooter()),H.a.createElement(U["a"],{modalVisible:m,record:x,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),H.a.createElement($,{modalVisible:f,onResolveAbnormal:this.onResolveAbnormal,onResolveAbnormalModalCancel:this.onResolveAbnormalModalCancel,selectedRows:l,abnormalTypes:i}),H.a.createElement(y["a"],{title:"\u53d6\u6d88\u7ed3\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(l.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(s.totalAccount," ")),H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f")),H.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:v,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(y["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=ee},aGMH:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=(a("5NDa"),a("5rEg")),m=(a("miYZ"),a("tsqr")),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=a("p0pE"),w=a.n(g),v=a("rlhR"),x=a.n(v),_=(a("2qtc"),a("kLXV")),S=(a("14J3"),a("BMrR")),C=(a("jCWc"),a("kPKH")),E=a("jehZ"),k=a.n(E),O=(a("+L6B"),a("2/Rp")),A=a("2Taf"),L=a.n(A),M=a("vZ4D"),T=a.n(M),V=a("l4Ni"),D=a.n(V),F=a("ujKo"),R=a.n(F),I=a("MhPg"),N=a.n(I),z=(a("iQDF"),a("+eQT")),P=(a("OaEy"),a("2fM7")),H=(a("y8nQ"),a("Vl3Y")),B=a("q1tI"),K=a.n(B),j=a("MuoO"),Y=a("wd/R"),U=a.n(Y),q=(a("B797"),a("CkN6")),Q=a("82qg"),X=a("9yR7"),G=a.n(X),W=a("XS0u"),Z=a("80Er"),J=a("7Qib"),$=H["a"].Item,ee=P["a"].Option,te=z["a"].RangePicker,ae=(n=H["a"].create(),n((o=function(e){function t(e){var a;return L()(this,t),a=D()(this,R()(t).call(this,e)),a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.receiverList,o=void 0===r?[]:r;n.validateFields(function(e,a){var n;e||(o.forEach(function(e){e.courier_id==a["courier_id"]&&(n=e)}),delete n["__typename"],t(n))})},a.state={},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return N()(t,e),T()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.receiverList,r=e.form;return K.a.createElement(_["a"],{destroyOnClose:!0,title:"\u66f4\u6539\u63a5\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[K.a.createElement(O["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),K.a.createElement(O["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:G.a.modalForm},K.a.createElement(H["a"],null,K.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},K.a.createElement(C["a"],null,K.a.createElement($,k()({},this.formItemLayout,{label:"\u63a5\u8d27\u4eba"}),r.getFieldDecorator("courier_id",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u8d27\u4eba"}]})(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},n.map(function(e){return K.a.createElement(ee,{key:e.courier_id,value:e.courier_id},e.courier_name)}))))))))}}]),t}(B["PureComponent"]),r=o))||r),ne=(i=Object(j["connect"])(function(e){var t=e.customer,a=e.company,n=e.order,r=e.site,o=e.car,i=e.courier,c=e.loading;return{customer:t,company:a,order:n,site:r,car:o,courier:i,loading:c.models.rule}}),c=H["a"].create(),i(l=c((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state=w()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,downloadModalVisible:!1,addFormModalVisible:!1,currentSite:{}},Z["a"]),a.columns=[{title:"\u63a5\u8d27\u4eba",width:"80px",dataIndex:"receiver_name",sorter:!0},{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_real",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount",sorter:!0},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"250px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"190px",dataIndex:"create_date",render:function(e){return K.a.createElement("span",null,e&&U()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u7ed3\u7b97\u65f6\u95f4",width:"190px",dataIndex:"settle_date",render:function(e){return K.a.createElement("span",null,e&&U()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u4ed8\u6b3e\u65e5\u671f",width:"80px",dataIndex:"pay_date"},{title:"\u8d27\u8f66\u7f16\u53f7",width:"80px",dataIndex:"car_code"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u914d\u8f7d\u7ad9",width:"80px",dataIndex:"shipsite_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5f02\u5e38\u60c5\u51b5",width:"80px",dataIndex:"abnormal_type"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onGetCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchGetCustomerList()},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchGetCustomerList=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,o=n.branchCompanyList,i=a.state.currentCompany,i&&i.company_id||(i=o&&o[0]),r({type:"customer/getCustomerListAction",payload:{filter:{company_id:t||i&&i.company_id||0}}});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchReceiverList=function(){var e=b()(f.a.mark(function e(t){var n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,n.site.siteList,o=a.state.currentSite,r({type:"courier/getCourierListAction",payload:{pageNo:1,pageSize:100,type:"receiver",filter:{site_id:o.site_id}}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchSendCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=b()(f.a.mark(function e(){var t,n,r,o,i=arguments;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:"",i.length>1?i[1]:void 0,n=a.props,n.dispatch,r=n.site.siteList,o=r.filter(function(e){if(e.site_id==t)return e}),o.length>0?a.setState({currentSite:o[0]}):a.setState({currentSite:{}}),a.fetchReceiverList();case 6:case"end":return e.stop()}},e)})),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=b()(f.a.mark(function n(o,i){var s;return f.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return Object.keys(i).forEach(function(e){var t=i[e];t||delete i[e]}),n.next=5,Object(Z["j"])(x()(a),i);case 5:return i=n.sent,n.next=8,Object(Z["k"])(x()(a),i);case 8:i=n.sent,s=Object.assign({filter:i},e),r({type:"courier/getOrderListAction",payload:w()({pageNo:t||c,pageSize:l},s)}),r({type:"courier/getOrderStatisticAction",payload:w()({},s)}),a.standardTable.cleanSelectedKeys();case 13:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onPrint=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(m["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):m["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(m["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):m["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateReceiverModal=function(){var e=a.state.selectedRows,t=void 0===e?[]:e,n=!0;t.forEach(function(e){var t=U()(Number(e.depart_date)),a=U()((new Date).getTime()),r=a.diff(t,"days");r>2&&(n=!1)}),n?a.setState({addFormModalVisible:!0}):m["a"].info("\u8ba2\u5355\u5f55\u516548\u5c0f\u65f6\u540e\uff0c\u4e0d\u53ef\u4ee5\u66f4\u6539\u63a5\u8d27\u4eba")},a.addFormDataHandle=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i,c,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=void 0===r?[]:r,i=[],c=[],o.forEach(function(e){i.push(e.order_id),c.push(e.getcustomer_id)}),e.next=7,n({type:"courier/updateCustomerCourierAction",payload:{type:"receiver",order_id:i,customer_id:c,courier:t}});case 7:l=e.sent,l&&0==l.code?(m["a"].success("\u66f4\u65b0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelAddFormClick()):m["a"].error(l&&l.msg||"\u66f4\u65b0\u5931\u8d25");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCancelAddFormClick=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addFormModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDelReceiver=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:_["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u8981\u53d6\u6d88\u52fe\u9009\u8ba2\u5355\u3001\u53d1\u8d27\u5ba2\u6237\u5173\u8054\u7684\u63a5\u8d27\u4eba\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onDelReceiverConfirm});case 1:case"end":return e.stop()}},e)})),a.onDelReceiverConfirm=b()(f.a.mark(function e(){var t,n,r,o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=void 0===n?[]:n,o=[],i=[],r.forEach(function(e){o.push(e.order_id),i.push(e.getcustomer_id)}),e.next=7,t({type:"courier/updateCustomerCourierAction",payload:{type:"receiver",order_id:o,customer_id:i,courier:{}}});case 7:c=e.sent,c&&0==c.code?(m["a"].success("\u53d6\u6d88\u6210\u529f\uff01"),a.handleSearch()):m["a"].error(c&&c.msg||"\u53d6\u6d88\u5931\u8d25");case 9:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.courier,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalTifuTransAmount,s=e.totalXianTransAmount,d=e.totalLatefee,u=e.totalBonusfee,p=e.totalCarFeeConfirm,m=e.totalCarFee,h=e.totalTifuInsurance,f=e.totalXianInsurence;return K.a.createElement("div",{className:G.a.tableFooter},K.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",l||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",s||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u57ab\u4ed8\u8d27\u6b3e\uff1a",i||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",c||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",f||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",h||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",d||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5956\u91d1\uff1a",u||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",p||"0"),K.a.createElement("span",{className:G.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return N()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){var t,a;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,t({type:"courier/initOrderListAction"}),e.next=4,t({type:"company/getBranchCompanyList",payload:w()({},W["a"])});case 4:a=t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),a&&a.length>0&&this.setState({currentSite:a[0]}),this.fetchSendCustomerList(),this.fetchReceiverList();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.company.branchCompanyList,r=t.customer,o=(r.getCustomerList,r.sendCustomerList),i=t.site,c=i.siteList,l=i.entrunkSiteList,s=t.courier.receiverList,d={},m={};c.length>0&&(m.initialValue=c[0].company_id||"");var h={};return n.length>0&&(h.initialValue=n[0].company_id||""),1!=W["a"].company_type&&(h.initialValue=W["a"].company_id||""),K.a.createElement(H["a"],{onSubmit:this.handleSearch,layout:"inline"},K.a.createElement($,{label:"\u5206\u516c\u53f8"},a("company_id",h)(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:!0},(1==W["a"].company_type?n:[W["a"]]).map(function(e){return K.a.createElement(ee,{key:e.company_id,value:e.company_id},e.company_name)})))),K.a.createElement($,k()({label:"\u7ad9\u70b9"},d),a("site_id",m)(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,onChange:this.onSiteSelect,style:{width:"100px"},allowClear:!0},c.map(function(e){return K.a.createElement(ee,{key:e.site_id,value:e.site_id},e.site_name)})))),K.a.createElement($,{label:"\u8fd0\u5355\u65e5\u671f"},a("create_date",{})(K.a.createElement(te,{locale:J["b"],style:{width:"250px"}}))),K.a.createElement($,k()({label:"\u8fd0\u5355\u53f7"},d),a("order_code",{})(K.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),K.a.createElement($,k()({label:"\u8d27\u8f66\u7f16\u53f7"},d),a("shipsite_id",{})(K.a.createElement(P["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(l||[]).map(function(e){return K.a.createElement(ee,{key:e.site_id,value:e.site_id},e.site_name)}))),a("car_code",{})(K.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"80px"}}))),K.a.createElement($,k()({label:"\u63a5\u8d27\u4eba"},d),a("receiver_id",{})(K.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:s.map(function(e){var t=u["a"].Option;return K.a.createElement(t,{key:"".concat(e.courier_id),value:"".concat(e.courier_id),courierid:"".concat(e.courier_id),label:e.courier_name},e.courier_name)}),onSelect:function(t){Object(Z["e"])(e,t,"receiver")},onChange:function(t){Object(Z["d"])(e,t,"receiver")},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement($,k()({label:"\u53d1\u8d27\u4eba\u59d3\u540d"},d),a("sendcustomer_id")(K.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:o.map(function(e){var t=u["a"].Option;return K.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Z["i"])(e,t)},onChange:function(t){Object(Z["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),K.a.createElement(H["a"].Item,d,K.a.createElement(O["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.courier,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.courier.receiverList),i=t.loading,c=t.dispatch,l=this.state,s=l.selectedRows,u=l.current,p=l.pageSize,m=l.updateOrderModalVisible,h=l.downloadModalVisible,f=l.addFormModalVisible,y=l.record,b=!0;return["site_searchuser"].indexOf(W["b"].role_value)>=0&&(b=!1),K.a.createElement("div",null,K.a.createElement(d["a"],{bordered:!1},K.a.createElement("div",{className:G.a.tableList},K.a.createElement("div",{className:G.a.tableListForm},this.renderForm()),K.a.createElement("div",{className:G.a.tableListOperator},s.length>0&&b&&K.a.createElement("span",null,K.a.createElement(O["a"],{onClick:this.onUpdateReceiverModal},"\u66f4\u6539\u63a5\u8d27\u4eba"),K.a.createElement(O["a"],{onClick:this.onDelReceiver},"\u53d6\u6d88\u63a5\u8d27\u4eba"),K.a.createElement(O["a"],{onClick:this.onDownload},"\u4e0b\u8f7d"))),K.a.createElement(q["a"],{onRef:this.onRefTable,selectedRows:s,loading:i,className:G.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},rowClassNameHandler:function(e,t){return 6===e.order_status?G.a.settleColor:7===e.order_status?G.a.payColor:""},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),K.a.createElement(Q["a"],{modalVisible:m,record:y,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch,isEdit:0,dispatch:c}),K.a.createElement(ae,{modalVisible:f,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelAddFormClick,receiverList:o,selectedRows:s}),K.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:h,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},K.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(B["PureComponent"]),l=s))||l)||l);t["default"]=ne},b5ys:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-abnormal-abnormal-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-abnormal-abnormal-minusType",tableList:"antd-pro-pages-abnormal-abnormal-tableList",tableListOperator:"antd-pro-pages-abnormal-abnormal-tableListOperator",tableFooter:"antd-pro-pages-abnormal-abnormal-tableFooter",footerSplit:"antd-pro-pages-abnormal-abnormal-footerSplit",signColor:"antd-pro-pages-abnormal-abnormal-signColor",shipColor:"antd-pro-pages-abnormal-abnormal-shipColor",editOrderColor:"antd-pro-pages-abnormal-abnormal-editOrderColor",settleColor:"antd-pro-pages-abnormal-abnormal-settleColor",payColor:"antd-pro-pages-abnormal-abnormal-payColor",selectedColor:"antd-pro-pages-abnormal-abnormal-selectedColor",tableDetail:"antd-pro-pages-abnormal-abnormal-tableDetail",modalForm:"antd-pro-pages-abnormal-abnormal-modalForm",entrunkForm:"antd-pro-pages-abnormal-abnormal-entrunkForm",formItemFloat:"antd-pro-pages-abnormal-abnormal-formItemFloat",tableListForm:"antd-pro-pages-abnormal-abnormal-tableListForm",submitButtons:"antd-pro-pages-abnormal-abnormal-submitButtons",dataTable:"antd-pro-pages-abnormal-abnormal-dataTable","ant-form-item":"antd-pro-pages-abnormal-abnormal-ant-form-item","ant-select":"antd-pro-pages-abnormal-abnormal-ant-select",formItemNoBreak:"antd-pro-pages-abnormal-abnormal-formItemNoBreak"}},btmg:function(e,t,a){e.exports={popover:"antd-pro-components-notice-icon-index-popover",noticeButton:"antd-pro-components-notice-icon-index-noticeButton",icon:"antd-pro-components-notice-icon-index-icon",tabs:"antd-pro-components-notice-icon-index-tabs"}},cZlJ:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=(a("miYZ"),a("tsqr")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("p0pE"),g=a.n(b),w=a("rlhR"),v=a.n(w),x=(a("2qtc"),a("kLXV")),_=(a("5NDa"),a("5rEg")),S=(a("14J3"),a("BMrR")),C=(a("jCWc"),a("kPKH")),E=(a("+L6B"),a("2/Rp")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=a("q1tI"),P=a.n(z),H=a("MuoO"),B=a("wd/R"),K=a.n(B),j=a("B797"),Y=a("CkN6"),U=a("82qg"),q=a("ZeH8"),Q=a.n(q),X=(a("S+eF"),a("XS0u")),G=a("80Er"),W=N["a"].Item,Z=I["a"].Option,J=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAgencyFeeSelect=function(e,t){a.setState({agencyFee:parseFloat(e)})},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state.agencyFee;n.validateFields(function(e,a){console.log(a),e||t({rate:r,bank_account:a.bank_account})})},a.state={agencyFee:4},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=Object(j["d"])(n),i=n.length>0?n[0]:{},c=this.state.agencyFee;return P.a.createElement(x["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[P.a.createElement(E["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),P.a.createElement(E["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},P.a.createElement(N["a"],null,P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u6761\u6570"},n.length))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u603b\u91d1\u989d"},o.totalActualGoodsFund||"0"," - \u4ee3\u529e\u8d39 * \xa0",P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",defaultValue:"4",onSelect:this.onAgencyFeeSelect,style:{width:"80px"}},P.a.createElement(Z,{value:"0"},"0\u2030"),P.a.createElement(Z,{value:"1"},"1\u2030"),P.a.createElement(Z,{value:"2"},"2\u2030"),P.a.createElement(Z,{value:"3"},"3\u2030"),P.a.createElement(Z,{value:"4"},"4\u2030"),P.a.createElement(Z,{value:"5"},"5\u2030")),"\xa0-\xa0\u56de\u4ed8\u8fd0\u8d39 ",o.totalPayTransFunds,"\xa0-\xa0\u56de\u4ed8\u4fdd\u8d39 ",o.totalPayInsurance,"\xa0=\xa0",o.totalActualGoodsFund-Math.ceil(o.totalShouldGoodsFund*c/1e3)-o.totalPayTransFunds-o.totalPayInsurance))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u6237\u4e3b"},i.sendcustomer_name||"")),P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u8d26\u6237"},r.getFieldDecorator("bank_account",{initialValue:i.bank_account})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},className:Q.a.tableDetail,label:"\u660e\u7ec6"},P.a.createElement("table",null,P.a.createElement("thead",null,P.a.createElement("tr",null,P.a.createElement("th",null,"\u8fd0\u5355\u53f7"),P.a.createElement("th",null,"\u5b9e\u6536\u8d27\u6b3e"),P.a.createElement("th",null,"\u5e94\u6536\u8d27\u6b3e"),P.a.createElement("th",null,"\u8fd0\u8d39"),P.a.createElement("th",null,"\u4fdd\u4ef7\u8d39"))),P.a.createElement("tbody",null,n.map(function(e){return P.a.createElement("tr",null,P.a.createElement("td",null,e.order_code),P.a.createElement("td",null,e.order_real),P.a.createElement("td",null,e.order_amount),P.a.createElement("td",null,e.trans_discount||e.trans_amount),P.a.createElement("td",null,e.insurance_fee))}))))))))}}]),t}(z["PureComponent"]),r=o))||r),$=(i=Object(H["connect"])(function(e){var t=e.customer,a=e.company,n=e.pay,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,pay:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state=g()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{},sorter:"settle_date|ascend"},G["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"80px"},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px",sorter:!0},{title:"\u94f6\u884c\u8d26\u53f7",dataIndex:"bank_account",width:"200px",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8fd0\u8d39",dataIndex:"trans_discount",sorter:!0,width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t},width:"80px"},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u4ed8\u6b3e\u65f6\u95f4",dataIndex:"pay_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,a){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize,s=i.sorter;t=t||c,o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var d;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.pay_status=0,i.order_amount=-1,n.next=6,Object(G["k"])(v()(a),i);case 6:i=n.sent,d=Object.assign({filter:i},e),d.sorter=d.sorter||s||"settle_date|ascend",a.setState({sorter:d.sorter}),r({type:"pay/getOrderListAction",payload:g()({pageNo:t||c,pageSize:l},d)}),r({type:"pay/getOrderStatisticAction",payload:g()({},d)}),a.standardTable.cleanSelectedKeys();case 13:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.btnClicked=!1,a.downAccountHandle=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=9,n({type:"pay/downAccountAction",payload:{order_id:o,rate:t.rate,bank_account:t.bank_account}});case 9:i=e.sent,0==i.code?(p["a"].success("\u4e0b\u8d26\u6210\u529f\uff01"),a.onDownCancel(),setTimeout(function(){a.getOrderList()},1e3)):p["a"].error(i.msg);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDownAccount=y()(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=Object(j["d"])(t),n.isSameSendCustomer&&n.isSameBankAccount){e.next=5;break}return p["a"].error("\u8bf7\u9009\u62e9\u76f8\u540c\u5ba2\u6237/\u8d26\u53f7\u7684\u8ba2\u5355\u8fdb\u884c\u4e0b\u8d26"),e.abrupt("return");case 5:if(n.isSettled){e.next=8;break}return p["a"].error("\u53ea\u80fd\u9009\u62e9\u5df2\u7ecf\u7ed3\u7b97\u7684\u8ba2\u5355\u8fdb\u884c\u4e0b\u8d26"),e.abrupt("return");case 8:a.setState({downModalVisible:!0});case 9:case"end":return e.stop()}},e)})),a.onDownCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=y()(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(j["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSettleOrderAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(p["a"].success("\u53d6\u6d88\u7ed3\u7b97\u6210\u529f\uff01"),a.onSettleCancel(),setTimeout(function(){a.getOrderList()},500)):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddAbnormal=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/updatePayAbnormalAction",payload:{order_id:r,order:{pay_status:1}}});case 5:o=e.sent,0==o.code?(p["a"].success("\u6dfb\u52a0\u5f02\u5e38\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},500)):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddNormalModal=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:x["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5c06\u6240\u9009\u8ba2\u5355\u6dfb\u52a0\u4e3a\u5f02\u5e38\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onAddAbnormal});case 1:case"end":return e.stop()}},e)})),a.onCancelPay=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountOk=y()(h.a.mark(function e(){var t,n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.props.dispatch,n=a.state.selectedRows,r=!0,o=[],0,n.forEach(function(e){var t=K()((new Date).getTime()),a=t.subtract(K()(Number(e.pay_date)||0)).hours();a>=24&&(r=!1),o.push(e.order_id),Number(e.order_real||0)}),r){e.next=9;break}return p["a"].error("\u4e0b\u8d26\u8d85\u8fc724\u5c0f\u65f6\u4e0d\u53ef\u4ee5\u53d6\u6d88"),e.abrupt("return");case 9:return e.next=11,t({type:"pay/cancelDownAccountAction",payload:{order_id:o}});case 11:i=e.sent,i&&0==i.code?(p["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),setTimeout(function(){a.getOrderList()},500),a.onCancelDownAccountCancel()):p["a"].error(i.msg);case 13:case"end":return e.stop()}},e)})),a.onPrint=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"pay/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"pay/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){["site_receipt"].includes(X["b"].role_value)||(a.setState({record:e}),a.onUpdateOrderModalShow())},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.pay,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return P.a.createElement("div",{className:Q.a.tableFooter},P.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:g()({},X["a"])});case 3:t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),Object(G["c"])(this,{}),this.handleSearch();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.site,r=(n.entrunkSiteList,n.normalSiteList,n.siteList),o=void 0===r?[]:r,i=t.customer,c=(i.getCustomerList,i.sendCustomerList),l=t.company.branchCompanyList,s={};return P.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},P.a.createElement(W,{label:"\u5206\u516c\u53f8"},a("company_id",s)(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"80px"},allowClear:!0},l.map(function(e){return P.a.createElement(Z,{key:e.company_id,value:e.company_id},e.company_name)})))),P.a.createElement(W,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"100px"}}))),P.a.createElement(W,{label:"\u7ad9\u70b9"},a("site_id",{})(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},o.map(function(e){return P.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),P.a.createElement(W,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(P.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=u["a"].Option;return P.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(G["i"])(e,t)},onChange:function(t){Object(G["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),P.a.createElement(W,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),P.a.createElement(W,null,P.a.createElement(E["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.pay,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,c=i.selectedRows,l=i.accountStatistic,s=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.settleModalVisible,h=i.downModalVisible,f=i.signModalVisible,y=i.cancelDownAccountModalVisible,b=i.downloadModalVisible,g=i.printModalVisible,w=i.record,v=!0;return["site_searchuser","site_admin"].indexOf(X["b"].role_value)>=0&&(v=!1),P.a.createElement("div",null,P.a.createElement(d["a"],{bordered:!1},P.a.createElement("div",{className:Q.a.tableList},P.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),P.a.createElement("div",{className:Q.a.tableListOperator},c.length>0&&v&&P.a.createElement("span",null,P.a.createElement(E["a"],{onClick:this.onDownAccount},"\u4e0b\u8d26"),P.a.createElement(E["a"],{onClick:this.onAddNormalModal},"\u6dfb\u52a0\u5f02\u5e38"),P.a.createElement(E["a"],{onClick:this.onPrint},"\u6253\u5370"))),P.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:Q.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 6===e.order_status?Q.a.settleColor:7===e.order_status?Q.a.payColor:""}})),this.tableFooter()),P.a.createElement(U["a"],{modalVisible:p,record:w,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),P.a.createElement(J,{modalVisible:h,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:c}),P.a.createElement(x["a"],{title:"\u53d6\u6d88\u7ed3\u7b97",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onSettleOk,onCancel:this.onSettleCancel},P.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(c.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(l.totalAccount," ")),P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u7b97\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onCancelDownAccountOk,onCancel:this.onCancelDownAccountCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onPrintOk,onCancel:this.onPrintCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(z["PureComponent"]),l=s))||l)||l);t["default"]=$},ckwQ:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-components-editable-table-index-antd-pro-components-global-header-index-header",minusType:"antd-pro-components-editable-table-index-minusType",tableList:"antd-pro-components-editable-table-index-tableList",tableListOperator:"antd-pro-components-editable-table-index-tableListOperator",tableFooter:"antd-pro-components-editable-table-index-tableFooter",signColor:"antd-pro-components-editable-table-index-signColor",shipColor:"antd-pro-components-editable-table-index-shipColor",editOrderColor:"antd-pro-components-editable-table-index-editOrderColor",selectedColor:"antd-pro-components-editable-table-index-selectedColor",tableDetail:"antd-pro-components-editable-table-index-tableDetail",modalForm:"antd-pro-components-editable-table-index-modalForm",entrunkForm:"antd-pro-components-editable-table-index-entrunkForm",formItemFloat:"antd-pro-components-editable-table-index-formItemFloat",tableListForm:"antd-pro-components-editable-table-index-tableListForm","ant-select":"antd-pro-components-editable-table-index-ant-select",formItemNoBreak:"antd-pro-components-editable-table-index-formItemNoBreak",settleColor:"antd-pro-components-editable-table-index-settleColor",payColor:"antd-pro-components-editable-table-index-payColor",submitButtons:"antd-pro-components-editable-table-index-submitButtons",dataTable:"antd-pro-components-editable-table-index-dataTable",footerSplit:"antd-pro-components-editable-table-index-footerSplit","ant-form-item":"antd-pro-components-editable-table-index-ant-form-item"}},eprh:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c=a("bx4M"),l=(a("+L6B"),a("2/Rp")),s=(a("iQDF"),a("+eQT")),d=a("p0pE"),u=a.n(d),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=a("2Taf"),b=a.n(y),g=a("vZ4D"),w=a.n(g),v=a("l4Ni"),x=a.n(v),_=a("ujKo"),S=a.n(_),C=a("MhPg"),E=a.n(C),k=(a("OaEy"),a("2fM7")),O=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),L=a.n(A),M=a("MuoO"),T=a("wd/R"),V=a.n(T),D=a("CkN6"),F=(a("zHco"),a("gA67")),R=a.n(F),I=(a("17x9"),a("XS0u")),N=(a("S+eF"),a("/mOS")),z=a("7Qib"),P=O["a"].Item,H=k["a"].Option,B=(n=Object(M["connect"])(function(e){var t=e.customer,a=e.company,n=e.order,r=e.site,o=e.receiver,i=e.loading;return{customer:t,company:a,site:r,order:n,receiver:o,loading:i.models.rule}}),r=O["a"].create(),n(o=r((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=x()(this,(e=S()(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,selectedRows:[],formValues:{},current:1,pageSize:20,entrunkModalVisible:!1},a.columns=[{title:"\u5206\u516c\u53f8",width:"60px",dataIndex:"company_name",sorter:!0},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",sorter:!0,render:function(e){return L.a.createElement("span",null,V()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u8d27\u5355\u53f7",width:"70px",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0},{sorter:!0,title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name"},{sorter:!0,title:"\u6536\u8d27\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name"},{sorter:!0,title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount"},{sorter:!0,title:"\u8fd0\u8d39",width:"80px",dataIndex:"trans_amount"},{sorter:!0,title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount"},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"60px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{sorter:!0,title:"\u57ab\u4ed8",width:"80px",dataIndex:"order_advancepay_amount"},{sorter:!0,title:"\u9001\u8d27\u8d39",width:"80px",dataIndex:"deliver_amount"},{sorter:!0,title:"\u4fdd\u4ef7\u8d39",width:"80px",dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u7ecf\u529e\u4eba",width:"80px",dataIndex:"operator_name"},{sorter:!0,title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props.dispatch,r=a.state,o=r.current,i=r.pageSize,c=a.props.form;c.validateFields(function(a,r){if(!a){r.order_status=[0,8],r.create_date&&(r.create_date=["".concat(r.create_date.valueOf())]);var c=Object.assign({filter:r},e);n({type:"order/getOrderListAction",payload:u()({pageNo:t||o,pageSize:i},c)}),n({type:"order/getOrderStatisticAction",payload:u()({},c)})}})},a.handleModalVisible=function(e){a.setState({selectedOrder:{},modalVisible:!!e})},a.onPrintOrder=function(){var e=a.state.selectedRows;Object(N["b"])({selectedRows:e})},a.onDownloadOrder=function(){var e=a.state.selectedRows;Object(N["b"])({selectedRows:e,type:"pdf"})},a.tableFooter=function(){var e=a.props.order,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalTifuTransAmount,s=e.totalXianTransAmount,d=e.totalLatefee,u=e.totalBonusfee,p=e.totalCarFeeConfirm,m=e.totalCarFee,h=e.totalTifuInsurance,f=e.totalXianInsurence;return L.a.createElement("div",{className:R.a.tableFooter},L.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",l||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",s||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u57ab\u4ed8\u8d27\u6b3e\uff1a",i||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",c||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",f||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",h||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",d||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u5956\u91d1\uff1a",u||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",p||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return E()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:u()({},I["a"])});case 3:a=e.sent,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),t({type:"receiver/getReceiverListAction",payload:{pageNo:1,pageSize:100,type:"receiver",filter:{}}}),t({type:"customer/resetCustomerPageNoAction",payload:{}}),t({type:"customer/getCustomerListAction",payload:{filter:{company_id:a.length>0&&a[0].company_id||0}}}),t({type:"customer/sendCustomerListAction",payload:{filter:{}}}),this.getOrderList();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.company.branchCompanyList,n=e.site.siteList,r=this.state.selectedRows,o={},i=a,c=!0,d=!1,u={initialValue:I["c"].site_id},p=[I["c"]];return 3!=I["c"].site_type&&2!=I["c"].site_type&&2!=I["a"].company_type||(p=n,d=!0,u={}),2==I["a"].company_type&&(o={initialValue:I["a"].company_id},i=[I["a"]],c=!1),L.a.createElement(O["a"],{onSubmit:this.handleSearch,layout:"inline"},L.a.createElement(P,{label:"\u5206\u516c\u53f8"},t("company_id",o)(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,allowClear:c,style:{width:"100px"}},i.map(function(e){return L.a.createElement(H,{key:e.company_id,value:e.company_id},e.company_name)})))),L.a.createElement(P,{label:"\u7ad9\u70b9"},t("site_id",u)(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:d},p.map(function(e){return L.a.createElement(H,{value:e.site_id},e.site_name)})))),L.a.createElement(P,{label:"\u8fd0\u8d39\u7c7b\u522b"},t("trans_type",{})(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},L.a.createElement(H,{value:0},"\u63d0\u4ed8"),L.a.createElement(H,{value:1},"\u73b0\u4ed8"),L.a.createElement(H,{value:2},"\u56de\u4ed8")))),L.a.createElement(P,{label:"\u5f55\u5165\u65e5\u671f"},t("create_date",{initialValue:V()()})(L.a.createElement(s["a"],{locale:z["b"],format:"YYYY-MM-DD",allowClear:!1}))),L.a.createElement(P,null,L.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),"\xa0",r.length>0&&L.a.createElement("span",null,L.a.createElement(l["a"],{onClick:this.onPrintOrder},"\u6253\u5370\u6e05\u5355"),"\xa0",L.a.createElement(l["a"],{onClick:this.onDownloadOrder},"\u4e0b\u8f7d\u6e05\u5355"))))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.company.branchCompanyList,t.customer),i=(o.getCustomerList,o.sendCustomerList,o.getCustomerPageNo,o.sendCustomerPageNo,t.receiver.receiverList,t.site),l=(i.entrunkSiteList,i.siteList,t.loading),s=this.state,d=s.selectedRows,u=(s.selectedOrder,s.modalVisible,s.current),p=void 0===u?1:u,m=s.pageSize,h=void 0===m?2:m;s.entrunkModalVisible,this.handleAdd,this.handleModalVisible;return["site_searchuser"].indexOf(I["b"].role_value)>=0&&!1,L.a.createElement("div",null,L.a.createElement(c["a"],{bordered:!1},L.a.createElement("div",{className:R.a.tableList},L.a.createElement("div",{className:R.a.tableListForm},this.renderForm()),L.a.createElement(D["a"],{selectedRows:d,className:R.a.dataTable,loading:l,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:h,current:p,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})),this.tableFooter()))}}]),t}(A["PureComponent"]),o=i))||o)||o);t["default"]=B},fmXB:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("2Taf"),E=a.n(C),k=a("vZ4D"),O=a.n(k),A=a("l4Ni"),L=a.n(A),M=a("ujKo"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=(a("iQDF"),a("+eQT")),N=a("q1tI"),z=a.n(N),P=a("MuoO"),H=(a("wd/R"),a("CkN6")),B=a("o6JX"),K=a.n(B),j=(a("XS0u"),I["a"].RangePicker,R["a"].Item),Y=F["a"].Option,U=(n=R["a"].create(),n((o=function(e){function t(e){var a;return E()(this,t),a=L()(this,T()(t).call(this,e)),a.onAbnormalSelect=function(e,t){},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.record,o=void 0===r?{}:r;n.validateFields(function(e,a){if(!e){var n={user:a};o.user_id&&(n.ids=[o.user_id],a.user_id=o.user_id),t(n)}})},a.renderCustomerOption=function(e){var t=S["a"].Option;return z.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return D()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form,o=e.roleList,i=e.currentCompany;return z.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u7528\u6237",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[z.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),z.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:K.a.modalForm},z.a.createElement(R["a"],null,z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7528\u6237\u540d"}),r.getFieldDecorator("user_name",{initialValue:n.user_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u540d"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7528\u6237\u5bc6\u7801"}),r.getFieldDecorator("user_pass",{initialValue:n.user_pass?"******":"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u5bc6\u7801"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7528\u6237\u89d2\u8272"}),r.getFieldDecorator("role_id",{initialValue:n.role&&n.role.role_id||"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7528\u6237\u89d2\u8272"}]})(z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},o.map(function(e){return e.company_type==i.company_type&&z.a.createElement(Y,{key:e.role_id,value:e.role_id},e.role_name)})))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7528\u6237\u7535\u8bdd"}),r.getFieldDecorator("user_mobile",{initialValue:n.user_mobile,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7528\u6237\u7535\u8bdd"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(j,v()({},this.formItemLayout,{label:"\u7535\u8111\u9501\u5b9a"}),r.getFieldDecorator("lock_pc",{initialValue:n.lock_pc,rules:[{required:!0,message:""}]})(z.a.createElement(F["a"],{placeholder:"",style:{width:"80px"}},[0,1].map(function(e){return z.a.createElement(Y,{key:e,value:e},0==e?"\u5426":"\u662f")}))))))))}}]),t}(N["PureComponent"]),r=o))||r),q=(i=Object(P["connect"])(function(e){var t=e.customer,a=e.user,n=e.site,r=e.company,o=e.loading;return{customer:t,user:a,site:n,company:r,loading:o.models.rule}}),c=R["a"].create(),i(l=c((s=function(e){function t(){var e,a;E()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=L()(this,(e=T()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},addModalVisible:!1},a.columns=[{title:"\u7528\u6237\u540d",dataIndex:"user_name",width:"80px"},{title:"\u7528\u6237\u7535\u8bdd",dataIndex:"user_mobile",width:"130px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"100px"},{title:"\u89d2\u8272",dataIndex:"role.role_name",width:"100px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.companyList,r.form,a.fetchCompanySiteList(t),i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.siteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=a.props,n=t.dispatch,r=t.form,o=a.state,i=o.current,c=o.pageSize,l=o.currentCompany,s=void 0===l?{}:l,d=o.currentSite,u=void 0===d?{}:d;r.validateFields(function(t,r){if(!t){var o={company_id:s.company_id};1==s.company_type&&u.site_id&&(o.site_id=u.site_id),n({type:"user/getUserListAction",payload:{pageNo:e||i,pageSize:c,filter:o}}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i,c,l,s,d,p;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.user,r=t.ids,o=a.props.dispatch,i=a.state,c=i.currentCompany,l=void 0===c?{}:c,s=i.currentSite,d=void 0===s?{}:s,n.company_id||(n.company_id=l.company_id),!n.site_id&&1==l.company_type&&d.site_id&&(n.site_id=d.site_id),e.next=7,o({type:"user/addUserAction",payload:{user:n,ids:r}});case 7:p=e.sent,p&&0==p.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelModalClick()):u["a"].error(p&&p.msg||"\u6dfb\u52a0\u5931\u8d25");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddClick=f()(m.a.mark(function e(){var t,n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state,n=t.currentCompany,r=void 0===n?{}:n,o=t.currentSite,i=void 0===o?{}:o,r.company_id){e.next=4;break}return y["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u516c\u53f8"}),e.abrupt("return");case 4:if(1!=r.company_type||i.site_id){e.next=7;break}return y["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"}),e.abrupt("return");case 7:a.setState({addModalVisible:!0,record:{}});case 8:case"end":return e.stop()}},e)})),a.onCancelModalClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onModalShow=function(){a.setState({addModalVisible:!0})},a.onModalCancel=function(){a.setState({addModalVisible:!1})},a.onSiteChange=function(e){console.log("site",e),e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onModalShow()},a}return D()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getCompanyList",payload:{filter:{}}});case 3:return a=e.sent,e.next=6,t({type:"user/getRoleListAction",payload:{}});case 6:this.setState({currentCompany:a[0]});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.company.companyList,r=t.user,o=r.userList,i=r.total,c=r.roleList,l=t.site,s=l.siteList,u=(l.siteTotal,t.loading),p=this.state,m=p.selectedRows,h=p.current,f=p.pageSize,y=p.addModalVisible,b=p.record,g=p.currentCompany,w={};return n.length>0&&(w.initialValue=n[0].company_id||""),z.a.createElement("div",null,z.a.createElement(d["a"],{bordered:!1},z.a.createElement("div",{className:K.a.tableList},z.a.createElement("div",{className:K.a.tableListOperator},z.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},z.a.createElement(j,{label:"\u516c\u53f8"},a("company_id",w)(z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"150px"}},n.map(function(e){return z.a.createElement(Y,{key:e.company_id,value:e.company_id},e.company_name)})))),1==g.company_type&&z.a.createElement(j,{label:"\u7ad9\u70b9"},z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,style:{width:"150px"},allowClear:!0},s.map(function(e){return z.a.createElement(Y,{key:e.site_id,value:e.site_id},e.site_name)}))),z.a.createElement(j,null,z.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),z.a.createElement(j,null,z.a.createElement(_["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddClick(!0)}},"\u6dfb\u52a0")))),z.a.createElement(H["a"],{onRef:this.onRefTable,selectedRows:m,loading:u,className:K.a.dataTable,rowKey:"user_id",data:{list:o,pagination:{total:i,pageSize:f,current:h,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){}}))),z.a.createElement(U,{modalVisible:y,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelModalClick,record:b,selectedRows:m,roleList:c,currentCompany:g}))}}]),t}(N["PureComponent"]),l=s))||l)||l);t["default"]=q},gA67:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-order-order-list-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-order-order-list-minusType",tableList:"antd-pro-pages-order-order-list-tableList",tableListOperator:"antd-pro-pages-order-order-list-tableListOperator",tableFooter:"antd-pro-pages-order-order-list-tableFooter",footerSplit:"antd-pro-pages-order-order-list-footerSplit",signColor:"antd-pro-pages-order-order-list-signColor",shipColor:"antd-pro-pages-order-order-list-shipColor",editOrderColor:"antd-pro-pages-order-order-list-editOrderColor",settleColor:"antd-pro-pages-order-order-list-settleColor",payColor:"antd-pro-pages-order-order-list-payColor",selectedColor:"antd-pro-pages-order-order-list-selectedColor",tableDetail:"antd-pro-pages-order-order-list-tableDetail",modalForm:"antd-pro-pages-order-order-list-modalForm",entrunkForm:"antd-pro-pages-order-order-list-entrunkForm",formItemFloat:"antd-pro-pages-order-order-list-formItemFloat",tableListForm:"antd-pro-pages-order-order-list-tableListForm",submitButtons:"antd-pro-pages-order-order-list-submitButtons",dataTable:"antd-pro-pages-order-order-list-dataTable","ant-form-item":"antd-pro-pages-order-order-list-ant-form-item","ant-select":"antd-pro-pages-order-order-list-ant-select",formItemNoBreak:"antd-pro-pages-order-order-list-formItemNoBreak"}},h3zL:function(e,t,a){e.exports={header:"antd-pro-components-global-header-index-header",logo:"antd-pro-components-global-header-index-logo",navbar:"antd-pro-components-global-header-index-navbar",menu:"antd-pro-components-global-header-index-menu",trigger:"antd-pro-components-global-header-index-trigger","ant-dropdown-trigger":"antd-pro-components-global-header-index-ant-dropdown-trigger",right:"antd-pro-components-global-header-index-right",action:"antd-pro-components-global-header-index-action",search:"antd-pro-components-global-header-index-search",account:"antd-pro-components-global-header-index-account",avatar:"antd-pro-components-global-header-index-avatar",dark:"antd-pro-components-global-header-index-dark",rightMenu:"antd-pro-components-global-header-index-rightMenu",name:"antd-pro-components-global-header-index-name"}},hOu5:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("iQDF"),a("+eQT")),p=(a("O3gP"),a("lrIw")),m=(a("miYZ"),a("tsqr")),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=a("p0pE"),w=a.n(g),v=a("rlhR"),x=a.n(v),_=(a("2qtc"),a("kLXV")),S=(a("5NDa"),a("5rEg")),C=(a("14J3"),a("BMrR")),E=(a("jCWc"),a("kPKH")),k=(a("+L6B"),a("2/Rp")),O=a("2Taf"),A=a.n(O),L=a("vZ4D"),M=a.n(L),T=a("l4Ni"),V=a.n(T),D=a("ujKo"),F=a.n(D),R=a("MhPg"),I=a.n(R),N=(a("OaEy"),a("2fM7")),z=(a("y8nQ"),a("Vl3Y")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("B797"),U=a("CkN6"),q=a("82qg"),Q=a("ZeH8"),X=a.n(Q),G=(a("S+eF"),a("7Qib")),W=a("/mOS"),Z=a("XS0u"),J=a("80Er"),$=z["a"].Item,ee=N["a"].Option,te=(n=z["a"].create(),n((o=function(e){function t(e){var a;return A()(this,t),a=V()(this,F()(t).call(this,e)),a.onAgencyFeeSelect=function(e,t){a.setState({agencyFee:parseFloat(e)})},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state.agencyFee;n.validateFields(function(e,a){console.log(a),e||t({rate:r,bank_account:a.bank_account})})},a.state={agencyFee:0},a}return I()(t,e),M()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=Object(Y["d"])(n),i=n.length>0?n[0]:{},c=this.state.agencyFee;return H.a.createElement(_["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(k["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(k["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:X.a.modalForm},H.a.createElement(z["a"],null,H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement($,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u6761\u6570"},n.length))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement($,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u603b\u91d1\u989d"},o.totalActualGoodsFund||"0"," - \u4ee3\u529e\u8d39 *",H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",defaultValue:"0",onSelect:this.onAgencyFeeSelect,style:{width:"80px"}},H.a.createElement(ee,{value:"0"},"0\u2030"),H.a.createElement(ee,{value:"1"},"1\u2030"),H.a.createElement(ee,{value:"2"},"2\u2030"),H.a.createElement(ee,{value:"3"},"3\u2030"),H.a.createElement(ee,{value:"4"},"4\u2030"),H.a.createElement(ee,{value:"5"},"5\u2030")),o.totalTransFunds?H.a.createElement("span",null," `- (\u8fd0\u8d39) $",o.totalTransFunds,"`"):H.a.createElement("span",null),"="," ",o.totalActualGoodsFund-Math.ceil(o.totalActualGoodsFund*c/1e3)-o.totalTransFunds||0))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement($,{labelCol:{span:3,offset:2},label:"\u6237\u4e3b"},i.getcustomer_name||"")),H.a.createElement(E["a"],null,H.a.createElement($,{labelCol:{span:3,offset:2},label:"\u8d26\u6237"},r.getFieldDecorator("bank_account",{initialValue:i.bank_account})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(E["a"],null,H.a.createElement($,{labelCol:{span:3,offset:2},className:X.a.tableDetail,label:"\u660e\u7ec6"},H.a.createElement("table",null,H.a.createElement("thead",null,H.a.createElement("tr",null,H.a.createElement("th",null,"\u8fd0\u5355\u53f7"),H.a.createElement("th",null,"\u5b9e\u6536\u8d27\u6b3e"),H.a.createElement("th",null,"\u5e94\u6536\u8d27\u6b3e"))),H.a.createElement("tbody",null,n.map(function(e){return H.a.createElement("tr",null,H.a.createElement("td",null,e.order_code),H.a.createElement("td",null,e.order_real),H.a.createElement("td",null,e.order_amount))}))))))))}}]),t}(P["PureComponent"]),r=o))||r),ae=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.pay,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,pay:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=z["a"].create(),i(l=c((s=function(e){function t(){var e,a;A()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=V()(this,(e=F()(t)).call.apply(e,[this].concat(r))),a.state=w()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},J["a"]),a.columns=[{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px"},{title:"\u5408\u8ba1\u7968\u6570",dataIndex:"order_code",width:"80px",render:function(e){return H.a.createElement("span",null,e&&e.split(",").length||"")}},{title:"\u5408\u8ba1\u8d27\u6b3e",dataIndex:"order_amount",width:"80px"},{title:"\u5408\u8ba1\u4ed8\u6b3e",dataIndex:"pay_amount",width:"80px"},{title:"\u4ee3\u529e\u8d39",dataIndex:"agency_fee",width:"80px"},{title:"\u5185\u6263\u8d39",dataIndex:"trans_amount",width:"80px",render:function(e,t,a){return H.a.createElement("span",null,Number(t.trans_amount||0)+Number(t.insurance_amount))}},{title:"\u94f6\u884c\u8d26\u53f7",dataIndex:"bank_account",width:"200px"},{title:"\u4ed8\u6b3e\u65f6\u95f4",dataIndex:"pay_date",width:"170px",render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u7968\u53f7",dataIndex:"order_code",width:"250px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchSendCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=b()(f.a.mark(function e(t,a){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=b()(f.a.mark(function n(o,i){var s;return f.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.pay_date?i.pay_date=i.pay_date.valueOf():delete i.pay_date,n.next=5,Object(J["k"])(x()(a),i);case 5:i=n.sent,i.sendcustomer_id&&(i.sendcustomer_id="".concat(i.sendcustomer_id)),s=Object.assign({filter:i},e),r({type:"pay/getTodayPayListAction",payload:w()({pageNo:t||c,pageSize:l},s)}),r({type:"pay/getTodayPayStatisticAction",payload:w()({},s)}),a.standardTable.cleanSelectedKeys();case 11:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c,l;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.downAccountHandle=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=5,n({type:"pay/downAccountAction",payload:{order_id:o,rate:t.rate,bank_account:t.bank_account}});case 5:i=e.sent,0==i.code?(m["a"].success("\u4e0b\u8d26\u6210\u529f\uff01"),a.onDownCancel(),a.handleSearch()):m["a"].error(i.msg);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDownAccount=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=b()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(Y["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSettleOrderAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(m["a"].success("\u53d6\u6d88\u7ed3\u7b97\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddAbnormal=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/updatePayAbnormalAction",payload:{order_id:r,order:{pay_status:0}}});case 5:o=e.sent,0==o.code?(m["a"].success("\u53d6\u6d88\u5f02\u5e38\u6210\u529f\uff01"),a.handleSearch()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddNormalModal=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:_["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5c06\u6240\u9009\u8ba2\u5355\u53d6\u6d88\u5f02\u5e38\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onAddAbnormal});case 1:case"end":return e.stop()}},e)})),a.onCancelSign=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/cancelDownAccountAction",payload:{order_id:r}});case 5:o=e.sent,o&&0==o.code?(m["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),a.handleSearch(),a.onCancelDownAccountCancel()):m["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){var t;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,Object(W["e"])({selectedRows:t});case 2:case"end":return e.stop()}},e)})),a.onPrint=b()(f.a.mark(function e(){var t;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,Object(W["e"])({selectedRows:t,type:"print"});case 2:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e})},a.btnClicked=!1,a.onCancelPay=b()(f.a.mark(function e(){var t,n,r,o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.props.dispatch,n=a.state.selectedRows,r=x()(a),o=!0,i=[],c=0,n.forEach(function(e){var t=j()(j()(Number(e.pay_date)||0)),a=j()((new Date).getTime()),n=a.diff(t,"hours");n>=24&&(o=!1),i.push(e.pay_id),c+=Number(e.pay_amount||0)}),o){e.next=10;break}return m["a"].error("\u4e0b\u8d26\u8d85\u8fc724\u5c0f\u65f6\u4e0d\u53ef\u4ee5\u53d6\u6d88"),e.abrupt("return");case 10:_["a"].confirm({content:H.a.createElement("div",null,"\u786e\u5b9a\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f\u4e0b\u8d26\u6761\u6570\uff1a",n.length,"\uff1b\u4e0b\u8d26\u603b\u989d\uff1a",c),onOk:function(){var e=b()(f.a.mark(function e(){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),e.next=6,t({type:"pay/cancelTodayDownAccountOrderAction",payload:{pay_id:i}});case 6:n=e.sent,n&&0==n.code?(m["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),r.handleSearch()):m["a"].error(n.msg);case 8:case"end":return e.stop()}},e)}));function n(){return e.apply(this,arguments)}return n}()});case 11:case"end":return e.stop()}},e)})),a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.pay,t=e.todayPayTotal,n=e.todayPayStatistic,r=void 0===n?{}:n;return H.a.createElement("div",{className:X.a.tableFooter},H.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",r.totalOrderAmount||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u4ed8\u6b3e\u603b\u989d\uff1a",r.totalPayAmount||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u4ee3\u529e\u8d39\u603b\u989d\uff1a",r.totalAgencyFee||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u5185\u6263\u603b\u989d\uff1a",r.totalTransAmount||"0"),H.a.createElement("span",{className:X.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return I()(t,e),M()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){var t;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:w()({},Z["a"])});case 3:t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),this.fetchSendCustomerList(),this.getOrderList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.site,r=(n.entrunkSiteList,n.siteList),o=void 0===r?[]:r,i=t.customer,c=(i.getCustomerList,i.sendCustomerList),l=t.company.branchCompanyList,s={};return H.a.createElement(z["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement($,{label:"\u5206\u516c\u53f8"},a("company_id",s)(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"80px"},allowClear:!0},l.map(function(e){return H.a.createElement(ee,{key:e.company_id,value:e.company_id},e.company_name)})))),H.a.createElement($,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),H.a.createElement($,{label:"\u7ad9\u70b9"},a("site_id",{})(H.a.createElement(N["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},o.map(function(e){return H.a.createElement(ee,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement($,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(H.a.createElement(p["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=p["a"].Option;return H.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(J["i"])(e,t)},onChange:function(t){Object(J["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),H.a.createElement($,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),H.a.createElement($,{label:"\u4ed8\u6b3e\u65e5\u671f"},a("pay_date",{initialValue:j()((new Date).getTime())})(H.a.createElement(u["a"],{locale:G["b"],format:"YYYY-MM-DD"}))),H.a.createElement($,null,H.a.createElement(k["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.pay,n=a.todayPayList,r=a.todayPayTotal,o=t.loading,i=this.state,c=i.selectedRows,l=i.accountStatistic,s=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.settleModalVisible,h=i.downModalVisible,f=i.signModalVisible,y=(i.cancelDownAccountModalVisible,i.downloadModalVisible,i.printModalVisible,i.record);return H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:X.a.tableList},H.a.createElement("div",{className:X.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:X.a.tableListOperator},c.length>0&&"site_admin"!=Z["b"].role_value&&H.a.createElement("span",null,H.a.createElement(k["a"],{onClick:this.onCancelPay},"\u53d6\u6d88\u4e0b\u8d26"),H.a.createElement(k["a"],{onClick:this.onDownload},"\u4e0b \u8f7d"),H.a.createElement(k["a"],{onClick:this.onPrint},"\u6253 \u5370"))),H.a.createElement(U["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:X.a.dataTable,rowKey:"pay_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(q["a"],{modalVisible:p,record:y,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),H.a.createElement(te,{modalVisible:h,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:c}),H.a.createElement(_["a"],{title:"\u53d6\u6d88\u7ed3\u7b97",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(c.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(l.totalAccount," ")),H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u7b97\u4e48\uff1f")),H.a.createElement(_["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=ae},"hqF/":function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=(a("miYZ"),a("tsqr")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("p0pE"),g=a.n(b),w=a("rlhR"),v=a.n(w),x=(a("2qtc"),a("kLXV")),_=(a("5NDa"),a("5rEg")),S=(a("14J3"),a("BMrR")),C=(a("jCWc"),a("kPKH")),E=(a("+L6B"),a("2/Rp")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=a("q1tI"),P=a.n(z),H=a("MuoO"),B=a("wd/R"),K=a.n(B),j=a("B797"),Y=a("CkN6"),U=a("82qg"),q=a("ZeH8"),Q=a.n(q),X=(a("S+eF"),a("XS0u")),G=a("80Er"),W=N["a"].Item,Z=I["a"].Option,J=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAgencyFeeSelect=function(e,t){a.setState({agencyFee:parseFloat(e)})},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state.agencyFee;n.validateFields(function(e,a){console.log(a),e||t({rate:r,bank_account:a.bank_account})})},a.state={agencyFee:4},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=Object(j["d"])(n),i=n.length>0?n[0]:{},c=this.state.agencyFee;return P.a.createElement(x["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[P.a.createElement(E["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),P.a.createElement(E["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},P.a.createElement(N["a"],null,P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u6761\u6570"},n.length))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u603b\u91d1\u989d"},o.totalActualGoodsFund||"0"," - \u4ee3\u529e\u8d39 * \xa0",P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",defaultValue:"4",onSelect:this.onAgencyFeeSelect,style:{width:"80px"}},P.a.createElement(Z,{value:"0"},"0\u2030"),P.a.createElement(Z,{value:"1"},"1\u2030"),P.a.createElement(Z,{value:"2"},"2\u2030"),P.a.createElement(Z,{value:"3"},"3\u2030"),P.a.createElement(Z,{value:"4"},"4\u2030"),P.a.createElement(Z,{value:"5"},"5\u2030")),"\xa0-\xa0\u56de\u4ed8\u8fd0\u8d39 ",o.totalPayTransFunds,"\xa0-\xa0\u56de\u4ed8\u4fdd\u8d39 ",o.totalPayInsurance,"\xa0=\xa0",o.totalActualGoodsFund-Math.ceil(o.totalShouldGoodsFund*c/1e3)-o.totalPayTransFunds-o.totalPayInsurance))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u6237\u4e3b"},i.getcustomer_name||"")),P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u8d26\u6237"},r.getFieldDecorator("bank_account",{initialValue:i.bank_account})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),P.a.createElement(S["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(C["a"],null,P.a.createElement(W,{labelCol:{span:3,offset:2},className:Q.a.tableDetail,label:"\u660e\u7ec6"},P.a.createElement("table",null,P.a.createElement("thead",null,P.a.createElement("tr",null,P.a.createElement("th",null,"\u8fd0\u5355\u53f7"),P.a.createElement("th",null,"\u5b9e\u6536\u8d27\u6b3e"),P.a.createElement("th",null,"\u5e94\u6536\u8d27\u6b3e"),P.a.createElement("th",null,"\u8fd0\u8d39"),P.a.createElement("th",null,"\u4fdd\u4ef7\u8d39"))),P.a.createElement("tbody",null,n.map(function(e){return P.a.createElement("tr",null,P.a.createElement("td",null,e.order_code),P.a.createElement("td",null,e.order_real),P.a.createElement("td",null,e.order_amount),P.a.createElement("td",null,e.trans_discount||e.trans_amount),P.a.createElement("td",null,e.insurance_fee))}))))))))}}]),t}(z["PureComponent"]),r=o))||r),$=(i=Object(H["connect"])(function(e){var t=e.customer,a=e.company,n=e.pay,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,pay:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state=g()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},G["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"80px"},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px",sorter:!0},{title:"\u6536\u8d27\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",sorter:!0,width:"80px"},{title:"\u5b9e\u6536\u8fd0\u8d39",dataIndex:"trans_discount",sorter:!0,width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t},width:"80px"},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px"},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px"},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u4ed8\u6b3e\u65f6\u95f4",dataIndex:"pay_date",render:function(e){return P.a.createElement("span",null,e&&K()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onSendCustomerScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchSendCustomerList()},a.fetchSendCustomerList=function(){var e=y()(h.a.mark(function e(t){var n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/sendCustomerListAction",payload:{filter:{}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,a){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var s;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return i.pay_status=1,n.next=5,Object(G["k"])(v()(a),i);case 5:i=n.sent,s=Object.assign({filter:i},e),r({type:"pay/getOrderListAction",payload:g()({pageNo:t||c,pageSize:l},s)}),r({type:"pay/getOrderStatisticAction",payload:g()({},s)}),a.standardTable.cleanSelectedKeys();case 10:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.btnClicked=!1,a.downAccountHandle=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=9,n({type:"pay/downAccountAction",payload:{order_id:o,rate:t.rate,bank_account:t.bank_account}});case 9:i=e.sent,0==i.code?(p["a"].success("\u4e0b\u8d26\u6210\u529f\uff01"),a.onDownCancel(),a.handleSearch()):p["a"].error(i.msg);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDownAccount=y()(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=Object(j["d"])(t),n.isSameSendCustomer){e.next=5;break}return p["a"].error("\u8bf7\u9009\u62e9\u76f8\u540c\u5ba2\u6237\u7684\u8ba2\u5355\u8fdb\u884c\u4e0b\u8d26"),e.abrupt("return");case 5:if(n.isSettled){e.next=8;break}return p["a"].error("\u53ea\u80fd\u9009\u62e9\u5df2\u7ecf\u7ed3\u7b97\u7684\u8ba2\u5355\u8fdb\u884c\u4e0b\u8d26"),e.abrupt("return");case 8:a.setState({downModalVisible:!0});case 9:case"end":return e.stop()}},e)})),a.onDownCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=y()(h.a.mark(function e(){var t,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(j["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSettleOrderAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(p["a"].success("\u53d6\u6d88\u7ed3\u7b97\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddAbnormal=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/updatePayAbnormalAction",payload:{order_id:r,order:{pay_status:0}}});case 5:o=e.sent,0==o.code?(p["a"].success("\u53d6\u6d88\u5f02\u5e38\u6210\u529f\uff01"),a.handleSearch()):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onAddNormalModal=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:x["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5c06\u6240\u9009\u8ba2\u5355\u53d6\u6d88\u5f02\u5e38\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onAddAbnormal});case 1:case"end":return e.stop()}},e)})),a.onCancelSign=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"pay/cancelDownAccountAction",payload:{order_id:r}});case 5:o=e.sent,o&&0==o.code?(p["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),a.handleSearch(),a.onCancelDownAccountCancel()):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"pay/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"pay/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){["site_receipt"].includes(X["b"].role_value)||(a.setState({record:e}),a.onUpdateOrderModalShow())},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.pay,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=e.totalInsurancefee,i=e.totalAdvancepayAmount,c=e.totalDeliverAmount;return P.a.createElement("div",{className:Q.a.tableFooter},P.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",i||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",c||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",o||"0"),P.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:g()({},X["a"])});case 3:t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}}),this.fetchSendCustomerList(),this.getOrderList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.site,r=(n.entrunkSiteList,n.siteList),o=void 0===r?[]:r,i=t.customer,c=(i.getCustomerList,i.sendCustomerList),l=t.company.branchCompanyList,s={};return P.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},P.a.createElement(W,{label:"\u5206\u516c\u53f8"},a("company_id",s)(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"80px"},allowClear:!0},l.map(function(e){return P.a.createElement(Z,{key:e.company_id,value:e.company_id},e.company_name)})))),P.a.createElement(W,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"150px"}}))),P.a.createElement(W,{label:"\u7ad9\u70b9"},a("site_id",{})(P.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},o.map(function(e){return P.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),P.a.createElement(W,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(P.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:c.map(function(e){var t=u["a"].Option;return P.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(G["i"])(e,t)},onChange:function(t){Object(G["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),P.a.createElement(W,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(P.a.createElement(_["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),P.a.createElement(W,null,P.a.createElement(E["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.pay,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,c=i.selectedRows,l=i.accountStatistic,s=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.settleModalVisible,h=i.downModalVisible,f=i.signModalVisible,y=i.cancelDownAccountModalVisible,b=i.downloadModalVisible,g=i.printModalVisible,w=i.record,v=!0;return["site_searchuser","site_admin"].indexOf(X["b"].role_value)>=0&&(v=!1),P.a.createElement("div",null,P.a.createElement(d["a"],{bordered:!1},P.a.createElement("div",{className:Q.a.tableList},P.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),P.a.createElement("div",{className:Q.a.tableListOperator},c.length>0&&v&&P.a.createElement("span",null,P.a.createElement(E["a"],{onClick:this.onDownAccount},"\u4e0b\u8d26"),P.a.createElement(E["a"],{onClick:this.onAddNormalModal},"\u53d6\u6d88\u5f02\u5e38"),P.a.createElement(E["a"],{onClick:this.onPrint},"\u6253\u5370"))),P.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:Q.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 6===e.order_status?Q.a.settleColor:7===e.order_status?Q.a.payColor:""}})),this.tableFooter()),P.a.createElement(U["a"],{modalVisible:p,record:w,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),P.a.createElement(J,{modalVisible:h,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:c}),P.a.createElement(x["a"],{title:"\u53d6\u6d88\u7ed3\u7b97",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onSettleOk,onCancel:this.onSettleCancel},P.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(c.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(l.totalAccount," ")),P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u7b97\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onCancelDownAccountOk,onCancel:this.onCancelDownAccountCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onPrintOk,onCancel:this.onPrintCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),P.a.createElement(x["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},P.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(z["PureComponent"]),l=s))||l)||l);t["default"]=$},ilQV:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c=a("bx4M"),l=(a("+L6B"),a("2/Rp")),s=(a("iQDF"),a("+eQT")),d=a("p0pE"),u=a.n(d),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=a("2Taf"),b=a.n(y),g=a("vZ4D"),w=a.n(g),v=a("l4Ni"),x=a.n(v),_=a("ujKo"),S=a.n(_),C=a("MhPg"),E=a.n(C),k=(a("OaEy"),a("2fM7")),O=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),L=a.n(A),M=a("MuoO"),T=a("wd/R"),V=a.n(T),D=(a("B797"),a("CkN6"),a("82qg"),a("LTkr")),F=a.n(D),R=(a("S+eF"),a("7Qib")),I=a("XS0u"),N=O["a"].Item,z=k["a"].Option,P=(n=Object(M["connect"])(function(e){var t=e.customer,a=e.company,n=e.courier,r=e.site,o=e.search,i=e.receiver,c=e.loading;return{customer:t,company:a,courier:n,site:r,search:o,receiver:i,loading:c.models.rule}}),r=O["a"].create(),n(o=r((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=x()(this,(e=S()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},a.columns=[{title:"\u6536\u652f",dataIndex:"account_type",sorter:!0},{title:"\u7c7b\u578b\u9879\u76ee",dataIndex:"account_name"},{title:"\u91d1\u989d",dataIndex:"account_amount",sorter:!0},{title:"\u7528\u6237\u540d",dataIndex:"operator_name",sorter:!0},{title:"\u7ad9\u70b9",dataIndex:"site_name",sorter:!0},{title:"\u5206\u516c\u53f8",dataIndex:"company_name",sorter:!0},{title:"\u65e5\u671f",dataIndex:"account_date",render:function(e){return L.a.createElement("span",null,e&&V()(e).format("YYYY-MM-DD HH:mm:ss")||"")}}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=f()(m.a.mark(function e(){var t;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.props.dispatch,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:I["a"].company_id}}});case 2:case"end":return e.stop()}},e)})),a.fetchOperatorList=function(){var e=f()(m.a.mark(function e(t){var n,r,o;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,r=a.state.currentSite,o={},o.company_id=I["a"].company_id,r&&r.site_id&&(o.site_id=r.site_id),n({type:"courier/getOperatorListAction",payload:{pageNo:1,pageSize:100,filter:o}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,a){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],a.props),n=t.dispatch,r=t.form,o=a.state;o.current,o.pageSize;r.validateFields(function(t,a){if(!t){a.company_id=I["a"].company_id,a.account_date&&a.account_date.valueOf&&(a.account_date=["".concat(new Date(0).getTime()),"".concat(a.account_date.valueOf())]);var r=Object.assign({filter:a},e);n({type:"search/getTodayAccountStatisticAction",payload:u()({},r)})}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onRowDoubleClick=function(e,t,n){a.setState({record:e})},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.search,t=e.totalAccount,n=e.totalIncomeAccount,r=e.totalExpenseAccount;return L.a.createElement("div",null,L.a.createElement("span",null,"\u5e93\u5b58\u603b\u989d\uff1a",t||""),L.a.createElement("span",{className:F.a.footerSplit},"\u6536\u5165\u603b\u989d\uff1a",n||""),L.a.createElement("span",{className:F.a.footerSplit},"\u652f\u51fa\u603b\u989d\uff1a",r||""))},a}return E()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.props.dispatch,this.fetchCompanySiteList(),this.fetchOperatorList(),this.getOrderList();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=a.siteList,r=void 0===n?[]:n;a.normalSiteList,e.courier.operatorList;return L.a.createElement(O["a"],{onSubmit:this.handleSearch,layout:"inline"},1==I["a"].company_type&&L.a.createElement(N,{label:"\u7ad9\u70b9"},t("site_id",{})(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},r.map(function(e){return L.a.createElement(z,{key:e.site_id,value:e.site_id},e.site_name)})))),L.a.createElement(N,{label:"\u65e5\u671f"},t("account_date",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65e5\u671f"}],initialValue:V()((new Date).getTime())})(L.a.createElement(s["a"],{placeholder:"\u8bf7\u586b\u5199\u65e5\u671f",locale:R["b"],format:"YYYY-MM-DD",style:{width:"100%"}}))),L.a.createElement(N,null,L.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this.props,t=e.search,a=(t.accounts,t.accountTotal,e.loading,this.state);a.selectedRows,a.current,a.pageSize;return L.a.createElement("div",null,L.a.createElement(c["a"],{bordered:!1},L.a.createElement("div",{className:F.a.tableList},L.a.createElement("div",{className:F.a.tableListForm},this.renderForm()),this.tableFooter())))}}]),t}(A["PureComponent"]),o=i))||o)||o);t["default"]=P},j6ho:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("2Taf"),E=a.n(C),k=a("vZ4D"),O=a.n(k),A=a("l4Ni"),L=a.n(A),M=a("ujKo"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=(a("iQDF"),a("+eQT")),N=a("q1tI"),z=a.n(N),P=a("MuoO"),H=(a("wd/R"),a("CkN6")),B=a("9yR7"),K=a.n(B),j=a("XS0u"),Y=(I["a"].RangePicker,R["a"].Item),U=F["a"].Option,q=(n=R["a"].create(),n((o=function(e){function t(e){var a;return E()(this,t),a=L()(this,T()(t).call(this,e)),a.onAbnormalSelect=function(e,t){},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.record,o=void 0===r?{}:r;n.validateFields(function(e,a){if(!e){var n={courier:a};o.courier_id&&(n.ids=[o.courier_id],a.courier_id=o.courier_id),t(n)}})},a.renderCustomerOption=function(e){var t=S["a"].Option;return z.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return D()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form;e.roleList;return z.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u9001\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[z.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),z.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:K.a.modalForm},z.a.createElement(R["a"],null,z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(Y,v()({},this.formItemLayout,{label:"\u59d3\u540d"}),r.getFieldDecorator("courier_name",{initialValue:n.courier_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(Y,v()({},this.formItemLayout,{label:"\u7535\u8bdd"}),r.getFieldDecorator("courier_mobile",{initialValue:n.courier_mobile,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7535\u8bdd"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(N["PureComponent"]),r=o))||r),Q=(i=Object(P["connect"])(function(e){var t=e.customer,a=e.courier,n=e.site,r=e.company,o=e.loading;return{customer:t,courier:a,site:n,company:r,loading:o.models.rule}}),c=R["a"].create(),i(l=c((s=function(e){function t(){var e,a;E()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=L()(this,(e=T()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},addModalVisible:!1},a.columns=[{title:"\u59d3\u540d",dataIndex:"courier_name",width:"100px"},{title:"\u7528\u6237\u7535\u8bdd",dataIndex:"courier_mobile",width:"150px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.companyList,r.form,a.fetchCompanySiteList(t),i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.siteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=a.props,n=t.dispatch,r=t.form,o=a.state,i=o.current,c=o.pageSize;r.validateFields(function(t,r){t||(n({type:"courier/getCourierListAction",payload:{pageNo:e||i,pageSize:c,type:"sender",filter:{company_id:j["a"].company_id}}}),a.standardTable.cleanSelectedKeys())})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.courier,r=t.ids,o=a.props.dispatch,console.log(n,r),n.company_id||(n.company_id=j["a"].company_id),e.next=6,o({type:"courier/updateCourierAction",payload:{courier:n,ids:r,type:"sender"}});case 6:i=e.sent,i&&0==i.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelModalClick()):u["a"].error(i&&i.msg||"\u6dfb\u52a0\u5931\u8d25");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!0,record:{}});case 1:case"end":return e.stop()}},e)})),a.onCancelModalClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onModalShow=function(){a.setState({addModalVisible:!0})},a.onModalCancel=function(){a.setState({addModalVisible:!1})},a.onSiteChange=function(e){console.log("site",e),e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onModalShow()},a}return D()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=(t.company.companyList,t.courier),n=a.senderList,r=a.senderTotal,o=t.loading,i=this.state,c=i.selectedRows,l=i.current,s=i.pageSize,u=i.addModalVisible,p=i.record;i.currentCompany;return z.a.createElement("div",null,z.a.createElement(d["a"],{bordered:!1},z.a.createElement("div",{className:K.a.tableList},z.a.createElement("div",{className:K.a.tableListOperator},z.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},z.a.createElement(Y,{label:"\u516c\u53f8"},z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},defaultValue:j["a"].company_id},[j["a"]].map(function(e){return z.a.createElement(U,{key:e.company_id,value:e.company_id},e.company_name)}))),z.a.createElement(Y,null,z.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),z.a.createElement(Y,null,z.a.createElement(_["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddClick(!0)}},"\u6dfb\u52a0")))),z.a.createElement(H["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:K.a.dataTable,rowKey:"courier_id",data:{list:n,pagination:{total:r,pageSize:s,current:l,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){}}))),z.a.createElement(q,{modalVisible:u,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelModalClick,record:p,selectedRows:c}))}}]),t}(N["PureComponent"]),l=s))||l)||l);t["default"]=Q},kLEI:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=a("d6i3"),p=a.n(u),m=a("1l/V"),h=a.n(m),f=(a("2qtc"),a("kLXV")),y=(a("7Kak"),a("9yH6")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=(a("miYZ"),a("tsqr")),E=a("2Taf"),k=a.n(E),O=a("vZ4D"),A=a.n(O),L=a("l4Ni"),M=a.n(L),T=a("ujKo"),V=a.n(T),D=a("MhPg"),F=a.n(D),R=(a("OaEy"),a("2fM7")),I=(a("y8nQ"),a("Vl3Y")),N=(a("iQDF"),a("+eQT")),z=a("q1tI"),P=a.n(z),H=a("MuoO"),B=(a("wd/R"),a("CkN6")),K=a("o6JX"),j=a.n(K),Y=(a("XS0u"),N["a"].RangePicker,I["a"].Item),U=R["a"].Option,q=(n=I["a"].create(),n((o=function(e){function t(e){var a;return k()(this,t),a=M()(this,V()(t).call(this,e)),a.onAbnormalSelect=function(e,t){},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.record,o=void 0===r?{}:r;n.validateFields(function(e,a){if(e)for(var n=["1","2"],r=0;r<2;r++){var i=n[r];if(e["sendfee_ratio_".concat(i)]){var c=e["sendfee_ratio_".concat(i)].errors[0]||{};return void C["a"].error(c.message)}}else{a.trans_regional_ratio=Number(a.trans_regional_ratio||1),a.remember_sender=Number(a.remember_sender),a.late_fee_days=Number(a.late_fee_days),a.late_fee_beginamount=Number(a.late_fee_beginamount),a.late_fee_rate=Number(a.late_fee_rate),a.rewards_24h=Number(a.rewards_24h),a.rewards_48h=Number(a.rewards_48h),a.rewards_72h=Number(a.rewards_72h),a.alarm_days=Number(a.alarm_days),a.agency_fee=Number(a.agency_fee),a.bonus_type=Number(a.bonus_type),a.insurance_ratio=Number(a.insurance_ratio),3==a.bonus_type?a.transfee_ratio=Number(a.transfee_ratio):(a.sendfee_ratio=Number(a["sendfee_ratio_".concat(a.bonus_type)]),a.unsendfee_ratio=Number(a["unsendfee_ratio_".concat(a.bonus_type)])),["1","2"].forEach(function(e){delete a["sendfee_ratio_".concat(e)],delete a["unsendfee_ratio_".concat(e)]});var l={company:a};o.company_id&&(l.ids=[o.company_id]),t(l)}})},a.renderCustomerOption=function(e){var t=S["a"].Option;return P.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:6},sm:{span:3}},wrapperCol:{xs:{span:30},sm:{span:20}}},a}return F()(t,e),A()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form;return P.a.createElement(f["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u516c\u53f8",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[P.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),P.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:900,className:j.a.modalForm},P.a.createElement(I["a"],null,P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u516c\u53f8\u540d\u79f0"}),r.getFieldDecorator("company_name",{initialValue:n.company_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u516c\u53f8\u540d\u79f0"}]})(P.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u5e94\u6253\u6b3e"}),r.getFieldDecorator("bonus_type",{initialValue:n.bonus_type,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5e94\u6253\u6b3e"},{pattern:/^\d+(\.\d+)?$/,message:"\u5e94\u6253\u6b3e\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(y["a"].Group,null,P.a.createElement(y["a"],{value:1},P.a.createElement("strong",null,"\u5e73\u5206\u6cd5\uff1a")," (\u8fd0\u8d39\u603b\u989d-\u5927\u8f66\u8fd0\u8d39+\u4fdd\u8d39\u603b\u989d)/2 + \u9001\u8d27\u8fd0\u8d39 \u2715",r.getFieldDecorator("sendfee_ratio_1",{initialValue:1==n.bonus_type&&n.sendfee_ratio||.06,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u9001\u8d27\u8fd0\u8d39\u7387"},{pattern:/^\d+(\.\d+)?$/,message:"\u9001\u8d27\u8fd0\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}})),"+ \u4e0d\u9001\u8d27\u8fd0\u8d39 \u2715",r.getFieldDecorator("unsendfee_ratio_1",{initialValue:1==n.bonus_type&&n.unsendfee_ratio||.11,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4e0d\u9001\u8d27\u8fd0\u8d39\u7387"},{pattern:/^\d+(\.\d+)?$/,message:"\u4e0d\u9001\u8d27\u8fd0\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}})),"- \u897f\u5b89\u6536\u8fd0\u8d39 - \u897f\u5b89\u6536\u4fdd\u4ef7\u8d39 + \u57ab\u4ed8 +  \u5b9e\u6536\u8d27\u6b3e - \u6253\u6b3e\u603b\u989d"),P.a.createElement(y["a"],{value:2},P.a.createElement("strong",null,"\u591a\u52b3\u591a\u5f97\uff1a")," \u8fd0\u8d39\u603b\u989d - \u9001\u8d27\u8fd0\u8d39 \u2715",r.getFieldDecorator("sendfee_ratio_2",{initialValue:2==n.bonus_type&&n.sendfee_ratio||.22,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u9001\u8d27\u8fd0\u8d39\u7387"},{pattern:/^\d+(\.\d+)?$/,message:"\u9001\u8d27\u8fd0\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}})),"- \u4e0d\u9001\u8d27\u8fd0\u8d39 \u2715",r.getFieldDecorator("unsendfee_ratio_2",{initialValue:2==n.bonus_type&&n.unsendfee_ratio||.12,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4e0d\u9001\u8d27\u8fd0\u8d39\u7387"},{pattern:/^\d+(\.\d+)?$/,message:"\u4e0d\u9001\u8d27\u8fd0\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}})),"- \u5927\u8f66\u8fd0\u8d39 - \u897f\u5b89\u6536\u8fd0\u8d39 - \u897f\u5b89\u6536\u4fdd\u4ef7\u8d39 + \u603b\u4fdd\u4ef7\u8d39/2 + \u57ab\u4ed8 + \u5b9e\u6536\u8d27\u6b3e - \u6253\u6b3e\u603b\u989d"),P.a.createElement(y["a"],{value:3},P.a.createElement("strong",null,"\u4f18\u60e0\u6cd5\uff1a")," \u8fd0\u8d39\u603b\u989d \u2715",r.getFieldDecorator("transfee_ratio",{initialValue:3==n.bonus_type&&n.transfee_ratio||.38,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8fd0\u8d39\u8d39\u7387"},{pattern:/^\d+(\.\d+)?$/,message:"\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"60px"}})),"- \u897f\u5b89\u8fd0\u8d39 - \u897f\u5b89\u4fdd\u4ef7\u8d39 + \u603b\u4fdd\u4ef7\u8d39/2 + \u57ab\u4ed8 + \u5b9e\u6536\u8d27\u6b3e - \u6253\u6b3e\u603b\u989d")))))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u8fd0\u8d39\u8d39\u7387"}),r.getFieldDecorator("trans_regional_ratio",{initialValue:n.trans_regional_ratio||1,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u8fd0\u8d39\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u4ee3\u529e\u8d39\u7387\uff1a"),r.getFieldDecorator("agency_fee",{initialValue:n.agency_fee||.4,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u4ee3\u529e\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"62px"}})),"\u2030",P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u62a5\u8b66\u5929\u6570\uff1a"),r.getFieldDecorator("alarm_days",{initialValue:n.alarm_days||0,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u62a5\u8b66\u5929\u6570\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}}))))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"24H\u5956\u91d1"}),r.getFieldDecorator("rewards_24h",{initialValue:n.rewards_24h||1,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u5956\u91d1\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"62px"}})),"\u2030",P.a.createElement("strong",{className:"inner-form-label"},"\xa048H\u5956\u91d1\uff1a"),r.getFieldDecorator("rewards_48h",{initialValue:n.rewards_48h||.04,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u5956\u91d1\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"62px"}})),"\u2030",P.a.createElement("strong",{className:"inner-form-label"},"\xa072H\u5956\u91d1\uff1a"),r.getFieldDecorator("rewards_72h",{initialValue:n.rewards_72h||.01,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u5956\u91d1\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),"\u2030"))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u6ede\u7eb3\u91d1\u5929\u6570"}),r.getFieldDecorator("late_fee_days",{initialValue:n.late_fee_days||12,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u6ede\u7eb3\u91d1\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u6ede\u7eb3\u91d1\u8d77\u59cb\u91d1\u989d\uff1a"),r.getFieldDecorator("late_fee_beginamount",{initialValue:n.late_fee_beginamount||10,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u6ede\u7eb3\u91d1\u91d1\u989d\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u6ede\u7eb3\u91d1\u8d39\u7387\uff1a"),r.getFieldDecorator("late_fee_rate",{initialValue:n.late_fee_rate||.5,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u6ede\u7eb3\u91d1\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),"\u2030"))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u516c\u53f8\u7535\u8bdd"}),r.getFieldDecorator("company_mobile",{initialValue:n.company_mobile,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u516c\u53f8\u7535\u8bdd"}]})(P.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})),P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u9001\u8d27\u4eba\u662f\u5426\u8bb0\u5fc6\uff1a"),r.getFieldDecorator("remember_sender",{initialValue:n.remember_sender,rules:[{required:!0,message:""}]})(P.a.createElement(R["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"}},P.a.createElement(U,{value:1},"\u662f"),P.a.createElement(U,{value:0},"\u5426")))))),P.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},P.a.createElement(g["a"],null,P.a.createElement(Y,v()({},this.formItemLayout,{label:"\u5730\u5740"}),r.getFieldDecorator("company_address",{initialValue:n.company_address})(P.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})),P.a.createElement("strong",{className:"inner-form-label"},"\xa0\u4fdd\u4ef7\u8d39\u7387\uff1a"),r.getFieldDecorator("insurance_ratio",{initialValue:n.insurance_ratio||2,rules:[{required:!0,message:""},{pattern:/^\d+(\.\d+)?$/,message:"\u4fdd\u4ef7\u8d39\u7387\u683c\u5f0f\u9519\u8bef"}]})(P.a.createElement(x["a"],{placeholder:"",style:{width:"80px"}})),"\u2030")))))}}]),t}(z["PureComponent"]),r=o))||r),Q=(i=Object(H["connect"])(function(e){var t=e.customer,a=e.company,n=e.loading;return{customer:t,company:a,loading:n.models.rule}}),c=I["a"].create(),i(l=c((s=function(e){function t(){var e,a;k()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=M()(this,(e=V()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},addModalVisible:!1},a.columns=[{title:"\u516c\u53f8\u540d\u79f0",width:"100px",dataIndex:"company_name"},{title:"\u516c\u53f8\u7535\u8bdd",dataIndex:"company_mobile",width:"130px"},{title:"\u5730\u57df\u7cfb\u6570",dataIndex:"trans_regional_ratio",width:"80px"},{title:"\u5730\u5740",dataIndex:"company_address",width:"100px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=function(){var e=h()(p.a.mark(function e(t){var n;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=h()(p.a.mark(function e(t){var n;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=h()(p.a.mark(function e(t,n){var r,o,i;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.branchCompanyList,r.form,a.fetchCompanySiteList(t),i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=h()(p.a.mark(function e(t,n){var r,o,i;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.normalSiteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]}),a.fetchExpenseTypeList({siteId:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=a.props,t=e.dispatch,n=e.form,r=a.state;r.current,r.pageSize,r.currentCompany;n.validateFields(function(e,n){e||(t({type:"company/getBranchCompanyList",payload:{company_type:1}}),a.standardTable.cleanSelectedKeys())})},a.handleStandardTableChange=function(){var e=h()(p.a.mark(function e(t,n,r){var o,i,c,l;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=h()(p.a.mark(function e(t){var n,r,o,i;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.company,r=t.ids,o=a.props.dispatch,e.next=4,o({type:"company/addCompany",payload:{company:n,ids:r}});case 4:i=e.sent,i&&0==i.code?(C["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelModalClick()):C["a"].error(i&&i.msg||"\u6dfb\u52a0\u5931\u8d25");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddClick=h()(p.a.mark(function e(){return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!0,record:{}});case 1:case"end":return e.stop()}},e)})),a.onCancelModalClick=h()(p.a.mark(function e(){return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onModalShow=function(){a.setState({addModalVisible:!0})},a.onModalCancel=function(){a.setState({addModalVisible:!1})},a.onSiteChange=function(e){console.log("site",e),e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onModalShow()},a}return F()(t,e),A()(t,[{key:"componentDidMount",value:function(){var e=h()(p.a.mark(function e(){var t;return p.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.props.dispatch,t({type:"company/getBranchCompanyList",payload:{company_type:1}}),this.getOrderList();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.company,n=a.branchCompanyList,r=a.branchTotal,o=t.loading,i=this.state,c=i.selectedRows,l=i.current,s=i.pageSize,u=i.addModalVisible,p=i.record;return P.a.createElement("div",null,P.a.createElement(d["a"],{bordered:!1},P.a.createElement("div",{className:j.a.tableList},P.a.createElement("div",{className:j.a.tableListOperator},P.a.createElement(_["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddClick(!0)}},"\u6dfb\u52a0")),P.a.createElement(B["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:j.a.dataTable,rowKey:"company_id",data:{list:n,pagination:{total:r,pageSize:s,current:l,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,footer:function(){}}))),P.a.createElement(q,{modalVisible:u,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelModalClick,record:p,selectedRows:c}))}}]),t}(z["PureComponent"]),l=s))||l)||l);t["default"]=Q},"lh+i":function(e,t,a){e.exports={main:"antd-pro-components-page-header-wrapper-grid-content-main",wide:"antd-pro-components-page-header-wrapper-grid-content-wide"}},lvrh:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=(a("2qtc"),a("kLXV")),f=(a("5NDa"),a("5rEg")),y=a("jehZ"),b=a.n(y),g=(a("14J3"),a("BMrR")),w=(a("jCWc"),a("kPKH")),v=(a("+L6B"),a("2/Rp")),x=a("d6i3"),_=a.n(x),S=a("1l/V"),C=a.n(S),E=(a("O3gP"),a("lrIw")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=(a("B797"),a("CkN6")),U=a("KbBV"),q=a.n(U),Q=a("7Qib"),X=(a("S+eF"),a("XS0u")),G=z["a"].RangePicker,W=N["a"].Item,Z=I["a"].Option,J=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.ButtonClicked=!1,a.onAddHandler=function(){if(!a.ButtonClicked){a.ButtonClicked=!0,setTimeout(function(){a.ButtonClicked=!1},2e3);var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.debtTypes,o=e.debtUserList;n.validateFields(function(e,a){var n,i;e||(r.forEach(function(e){e.debttype_id==a["debttype_id"]&&(n=e)}),n?(a.debttype_id=Number(a.debttype_id),a.debttype=n.debttype,a.debttype_type=n.debttype_type):(a.debttype=a.debttype_id,a.debttype_id=0),o.forEach(function(e){e.debtuser_id==a.debtuser_id&&(i=e)}),i?a.debtuser_name=i.debtuser_name:(a.debtuser_name=a.debtuser_id,a.debtuser_id=0),t(a))})}},a.renderCustomerOption=function(e){var t=E["a"].Option;return H.a.createElement(t,{key:e.debttype_id,debttype_id:e.debttype_id,text:e.debttype},e.debttype)},a.onDebtTypeSelect=function(e){var t=a.props,n=t.debtTypes,r=void 0===n?[]:n,o=t.form;r.forEach(function(t){t.debttype_id==e&&o.setFieldsValue({debttype_type:t.debttype_type})})},a.onDebtUserSearch=function(){var e=C()(_.a.mark(function e(t){return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t&&a.setState({currentDebtUserName:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDebtUserBlur=function(e){for(var t,n=a.props,r=n.form,o=n.debtUserList,i=a.state.currentDebtUserName,c=0;c<o.length;c++){var l=o[c];if(l.debtuser_name==i||l.debtuser_name==e||l.debtuser_id==e){t=l;break}}t||r.setFieldsValue({debtuser_id:i})},a.state={currentDebtUserName:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.onCustomerScroll,r=e.form,o=e.debtUserList,i=void 0===o?[]:o,c=e.debtTypes,l=void 0===c?[]:c;return H.a.createElement(h["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u6536\u6b20\u6761",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(v["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(v["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(W,{labelCol:{span:5},wrapperCol:{span:14},label:"\u7c7b\u578b"},r.getFieldDecorator("debttype_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7c7b\u578b"}]})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},l.map(function(e){return H.a.createElement(Z,{key:e.debttype_id,value:e.debttype_id},e.debttype)})))))),"\u3001",H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(W,b()({},this.formItemLayout,{label:"\u59d3\u540d"}),r.getFieldDecorator("debtuser_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onGetCustomerSelect,style:{width:"150px"},allowClear:!0,showSearch:!0,onSearch:this.onDebtUserSearch,onBlur:this.onDebtUserBlur,optionLabelProp:"children",onPopupScroll:n,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},i.map(function(e){return H.a.createElement(Z,{key:e.debtuser_id,value:e.debtuser_id},e.debtuser_name)})))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(W,b()({},this.formItemLayout,{label:"\u91d1\u989d"}),r.getFieldDecorator("debt_money",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u91d1\u989d"}]})(H.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(w["a"],null,H.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},r.getFieldDecorator("remark",{initialValue:""})(H.a.createElement(f["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),$=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.debt,r=e.site,o=e.loading;return{customer:t,company:a,debt:n,site:r,loading:o.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentDebtUserName:"",currentSite:{},addDebtModalVisible:!1},a.columns=[{title:"\u65e5\u671f",dataIndex:"debt_date",width:"170px",sorter:!0,render:function(e){return e&&H.a.createElement("span",null,j()(Number(e)).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u91d1\u989d",dataIndex:"debt_money",width:"80px",sorter:!0},{title:"\u7c7b\u578b",dataIndex:"debttype",width:"80px",sorter:!0},{title:"\u5ba2\u6237\u59d3\u540d",dataIndex:"debtuser_name",width:"80px",sorter:!0},{title:"\u5f52\u96f6\u65e5\u671f",dataIndex:"settle_date",width:"170px",sorter:!0,render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchDebtTypeList=C()(_.a.mark(function e(){var t,n;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.props.dispatch,n=a.state.currentSite,t({type:"debt/getDebtTypesAction",payload:{company_id:X["a"].company_id,site_id:n&&n.site_id||0}});case 3:case"end":return e.stop()}},e)})),a.fetchCompanySiteList=function(){var e=C()(_.a.mark(function e(t){var n,r;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,e.next=3,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 3:r=e.sent,r.length>0&&a.setState({currentSite:r[0]});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchDebtUserList=function(){var e=C()(_.a.mark(function e(t){var n,r,o,i;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,r=a.state.currentSite,o=void 0===r?{}:r,i={company_id:X["a"].company_id},o.site_id&&(i.site_id=o.site_id),n({type:"debt/getDebtUsersAction",payload:{filter:i}});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=C()(_.a.mark(function e(t,n){var r,o,i,c,l;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.site.normalSiteList,i=void 0===o?[]:o,c=r.dispatch,l=i.filter(function(e){if(e.site_id==t)return e}),l.length>0&&a.setState({currentSite:l[0]}),c({type:"debt/resetDebtUserPageNoAction",payload:{}}),a.fetchDebtTypeList(),a.fetchDebtUserList();case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=n.debt.debtUserList,c=void 0===i?[]:i,l=a.state,s=l.current,d=l.pageSize;o.validateFields(function(n,o){if(!n){o.debt_date&&o.debt_date.length>0&&(o.debt_date=o.debt_date.map(function(e){return"".concat(e.valueOf())}));var i=!1;c.forEach(function(e){e.debtuser_id==o.debtuser_id&&(i=!0)}),i||(o.debtuser_name=o.debtuser_id,delete o.debtuser_id),o.company_id=X["a"].company_id;var l=Object.assign({filter:o},e);r({type:"debt/getDebtsAction",payload:m()({pageNo:t||s,pageSize:d},l)}),r({type:"debt/getDebtsStatisticAction",payload:m()({},l)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=C()(_.a.mark(function e(t,n,r){var o,i,c,l;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=C()(_.a.mark(function e(t){var n,r,o,i;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.currentSite,o=void 0===r?{}:r,e.next=4,n({type:"debt/addDebtAction",payload:m()({},t,{company_id:X["a"].company_id,site_id:o.site_id})});case 4:i=e.sent,i&&0==i.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelDebtClick(),a.fetchDebtTypeList()):u["a"].error(i.msg);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddDebtClick=C()(_.a.mark(function e(){var t;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.currentSite,1!=X["a"].company_type||t&&t.site_id){e.next=4;break}return h["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"}),e.abrupt("return");case 4:a.setState({addDebtModalVisible:!0});case 5:case"end":return e.stop()}},e)})),a.onCancelDebtClick=C()(_.a.mark(function e(){return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addDebtModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,a){},a.onDebtUserScroll=function(e){e.target.scrollHeight<=e.target.scrollTop+e.currentTarget.scrollHeight&&a.fetchDebtUserList()},a.onDebtUserSearch=function(){var e=C()(_.a.mark(function e(t){return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t&&a.setState({currentDebtUserName:t});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDebtUserBlur=function(e){for(var t,n=a.props,r=n.form,o=n.debt.debtUserList,i=a.state.currentDebtUserName,c=0;c<o.length;c++){var l=o[c];if(l.debtuser_name==i||l.debtuser_name==e||l.debtuser_id==e){t=l;break}}t||r.setFieldsValue({debtuser_id:i})},a.onDebtUserSelect=function(){},a.onSettleModal=function(){h["a"].confirm({title:"\u786e\u8ba4",content:"\u786e\u5b9a\u5c06\u52fe\u9009\u8bb0\u5f55\u5f52\u96f6\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:a.onSettleDebt})},a.onSettleDebt=C()(_.a.mark(function e(){var t,n,r,o;return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.debt_id}),e.next=5,t({type:"debt/settleDebtAction",payload:{debt_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u5f52\u96f6\u6210\u529f\uff01"),a.handleSearch()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.tableFooter=function(){var e=a.props.debt,t=e.debtTotal,n=(e.totalDebtMoney,e.totalIncome),r=e.totalExpense;return console.log(a.props.debt,r),H.a.createElement("div",{className:q.a.tableFooter},H.a.createElement("span",null,"\u6536\u5165\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:q.a.footerSplit},"\u652f\u51fa\u603b\u989d\uff1a",r||"0"),H.a.createElement("span",{className:q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=C()(_.a.mark(function e(){return _.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCompanySiteList(X["a"].company_id);case 2:return e.next=4,this.fetchDebtUserList();case 4:return e.next=6,this.fetchDebtTypeList({});case 6:this.getOrderList();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.normalSiteList,e.debt),r=n.debtTypes,o=n.debtUserList,i=this.state,c=(i.currentSite,i.currentDebtUserName,[X["a"]]),l={};return c.length>0&&(l.initialValue=c[0].company_id||""),H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},1==X["a"].company_type&&H.a.createElement(W,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:X["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,onChange:this.onSiteChange,style:{width:"100px"}},[X["c"]].map(function(e){return H.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(W,{label:"\u59d3\u540d"},t("debtuser_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onDebtUserSelect,style:{width:"100px"},allowClear:!0,showSearch:!0,onBlur:this.onDebtUserBlur,onSearch:this.onDebtUserSearch,optionLabelProp:"children",onPopupScroll:this.onDebtUserScroll,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},o.map(function(e){return H.a.createElement(Z,{key:e.debtuser_id,value:e.debtuser_id},e.debtuser_name)})))),H.a.createElement(W,{label:"\u65e5\u671f"},t("debt_date",{})(H.a.createElement(G,{locale:Q["b"],style:{width:"250px"}}))),H.a.createElement(W,{label:"\u5206\u7c7b"},t("debttype_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},r.map(function(e){return H.a.createElement(Z,{key:e.debttype_id,value:e.debttype_id},e.debttype)})))),H.a.createElement(W,{label:"\u5f52\u96f6\u9879"},t("debt_status")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"80px"},allowClear:!0},H.a.createElement(Z,{value:0},"\u672a\u5f52\u96f6"),H.a.createElement(Z,{value:1},"\u5df2\u5f52\u96f6")))),H.a.createElement(W,null,H.a.createElement(v["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.debt,n=a.debtList,r=a.debtTotal,o=a.debtTypes,i=a.debtUserList,c=t.loading,l=this.state,s=l.selectedRows,u=l.current,p=l.pageSize,m=l.addDebtModalVisible,h=(l.record,!0);return["site_searchuser","site_admin"].indexOf(X["b"].role_value)>=0&&(h=!1),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:q.a.tableList},H.a.createElement("div",{className:q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:q.a.tableListOperator},h&&H.a.createElement(v["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddDebtClick(!0)}},"\u6dfb\u52a0"),s.length>0&&h&&H.a.createElement("span",null,H.a.createElement(v["a"],{onClick:this.onSettleModal},"\u5f52\u96f6"))),H.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:s,loading:c,className:q.a.dataTable,rowKey:"debt_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 1===e.debt_status?q.a.payColor:""}})),this.tableFooter()),H.a.createElement(J,{modalVisible:m,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelDebtClick,selectedRows:s,debtTypes:o,onCustomerScroll:this.onGetDebtUserScroll,debtUserList:i}))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=$},m8Tn:function(e,t,a){"use strict";a.r(t);a("T2oS");var n=a("W9HT"),r=a("p0pE"),o=a.n(r),i=a("jehZ"),c=a.n(i),l=a("2Taf"),s=a.n(l),d=a("vZ4D"),u=a.n(d),p=a("l4Ni"),m=a.n(p),h=a("ujKo"),f=a.n(h),y=a("MhPg"),b=a.n(y),g=(a("B9cy"),a("Ol7k")),w=a("q1tI"),v=a.n(w),x=a("ZFw/"),_=a.n(x),S=a("Y+p1"),C=a.n(S),E=a("Wwog"),k=a("MuoO"),O=a("E6Dt"),A=a("TSYQ"),L=a.n(A),M=a("bALw"),T=a.n(M),V=a("lU33"),D=a("LLXN"),F=a("HZnN"),R=a("zwU1"),I=a.n(R),N=(a("Pwec"),a("CtXQ")),z=a("ggcP"),P=g["a"].Footer,H=function(){return v.a.createElement(P,{style:{padding:0,display:"none"}},v.a.createElement(z["a"],{links:[],copyright:v.a.createElement(w["Fragment"],null,"Copyright ",v.a.createElement(N["a"],{type:"copyright"})," 2019 \u8fdc\u8bda\u5b9d\u8def\u901a")}))},B=H,K=(a("miYZ"),a("tsqr")),j=a("MFj2"),Y=a("3a4m"),U=a.n(Y),q=a("SQvw"),Q=a.n(q),X=a("wY1l"),G=a.n(X),W=a("fqkP"),Z=a.n(W),J=a("h3zL"),$=a.n(J),ee=(a("lUTK"),a("BvKs")),te=(a("+BJd"),a("mr32")),ae=a("qIgq"),ne=a.n(ae),re=a("wd/R"),oe=a.n(re),ie=a("bt/X"),ce=a.n(ie),le=(a("Awhp"),a("KrTs")),se=(a("Znn+"),a("ZTPi")),de=a("i8i4"),ue=a.n(de),pe=a("+jAw"),me=(a("cWXX"),a("/ezw")),he=(a("Mwp2"),a("VXEj")),fe=(a("Telt"),a("Tckk")),ye=a("eHn4"),be=a.n(ye),ge=a("gWZ8"),we=a.n(ge),ve=a("BsfW"),xe=a.n(ve),_e=null;function Se(e){var t=e.data,a=void 0===t?[]:t,n=e.onClick,r=e.onClear,o=e.title,i=e.locale,l=e.emptyText,s=e.emptyImage,d=e.loading,u=e.onLoadMore,p=e.visible,m=e.loadedAll,h=void 0===m||m,f=e.scrollToLoad,y=void 0===f||f,b=e.showClear,g=void 0===b||b,w=e.skeletonCount,x=void 0===w?5:w,_=e.skeletonProps,S=void 0===_?{}:_;if(0===a.length)return v.a.createElement("div",{className:xe.a.notFound},s?v.a.createElement("img",{src:s,alt:"not found"}):null,v.a.createElement("div",null,l||i.emptyText));var C=Array.from({length:d?x:0}).map(function(){return{loading:d}}),E=h?v.a.createElement("div",{className:L()(xe.a.loadMore,xe.a.loadedAll)},v.a.createElement("span",null,i.loadedAll)):v.a.createElement("div",{className:xe.a.loadMore,onClick:u},v.a.createElement("span",null,i.loadMore)),k=function(e){if(y&&!d&&!h&&"function"===typeof u){var t=e.currentTarget;t.scrollHeight-t.scrollTop-t.clientHeight<=40&&(u(e),_e=t)}};if(!p&&_e)try{_e.scrollTo(null,0)}catch(e){_e=null}return v.a.createElement("div",null,v.a.createElement(he["a"],{className:xe.a.list,loadMore:E,onScroll:k},[].concat(we()(a),we()(C)).map(function(e,t){var a=L()(xe.a.item,be()({},xe.a.read,e.read)),r=e.avatar?"string"===typeof e.avatar?v.a.createElement(fe["a"],{className:xe.a.avatar,src:e.avatar}):v.a.createElement("span",{className:xe.a.iconElement},e.avatar):null;return v.a.createElement(he["a"].Item,{className:a,key:e.key||t,onClick:function(){return n(e)}},v.a.createElement(me["a"],c()({avatar:!0,title:!1,active:!0},S,{loading:e.loading}),v.a.createElement(he["a"].Item.Meta,{className:xe.a.meta,avatar:r,title:v.a.createElement("div",{className:xe.a.title},e.title,v.a.createElement("div",{className:xe.a.extra},e.extra)),description:v.a.createElement("div",null,v.a.createElement("div",{className:xe.a.description,title:e.description},e.description),v.a.createElement("div",{className:xe.a.datetime},e.datetime))})))})),g?v.a.createElement("div",{className:xe.a.clear,onClick:r},i.clear," ",o):null)}var Ce=a("btmg"),Ee=a.n(Ce),ke=se["a"].TabPane,Oe=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.state={visible:!1},a.onItemClick=function(e,t){var n=a.props.onItemClick,r=e.clickClose;n(e,t),r&&a.popover.click()},a.onClear=function(e){var t=a.props,n=t.onClear,r=t.clearClose;n(e),r&&a.popover.click()},a.onTabChange=function(e){var t=a.props.onTabChange;t(e)},a.onLoadMore=function(e,t){var n=a.props.onLoadMore;n(e,t)},a.handleVisibleChange=function(e){var t=a.props.onPopupVisibleChange;a.setState({visible:e}),t(e)},a}return b()(t,e),u()(t,[{key:"getNotificationBox",value:function(){var e=this,t=this.state.visible,a=this.props,r=a.children,o=a.loading,i=a.locale;if(!r)return null;var c=v.a.Children.map(r,function(a){var n=a.props,r=n.list,o=n.title,c=n.name,l=n.count,s=n.emptyText,d=n.emptyImage,u=n.showClear,p=n.loadedAll,m=n.scrollToLoad,h=n.skeletonCount,f=n.skeletonProps,y=n.loading,b=r&&r.length?r.length:0,g=l||0===l?l:b,w=g>0?"".concat(o," (").concat(g,")"):o;return v.a.createElement(ke,{tab:w,key:c},v.a.createElement(Se,{data:r,emptyImage:d,emptyText:s,loadedAll:p,loading:y,locale:i,onClear:function(){return e.onClear(c)},onClick:function(t){return e.onItemClick(t,a.props)},onLoadMore:function(t){return e.onLoadMore(a.props,t)},scrollToLoad:m,showClear:u,skeletonCount:h,skeletonProps:f,title:o,visible:t}))});return v.a.createElement(w["Fragment"],null,v.a.createElement(n["a"],{spinning:o,delay:0},v.a.createElement(se["a"],{className:Ee.a.tabs,onChange:this.onTabChange},c)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.count,r=t.popupVisible,o=t.bell,i=this.state.visible,l=L()(a,Ee.a.noticeButton),s=this.getNotificationBox(),d=o||v.a.createElement(N["a"],{type:"bell",className:Ee.a.icon}),u=v.a.createElement("span",{className:L()(l,{opened:i})},v.a.createElement(le["a"],{count:n,style:{boxShadow:"none"},className:Ee.a.badge},d));if(!s)return u;var p={};return"popupVisible"in this.props&&(p.visible=r),v.a.createElement(pe["a"],c()({placement:"bottomRight",overlay:s,overlayClassName:Ee.a.popover,trigger:["click"],visible:i,onVisibleChange:this.handleVisibleChange},p,{ref:function(t){return e.popover=ue.a.findDOMNode(t)}}),u)}}]),t}(w["PureComponent"]);Oe.Tab=ke,Oe.defaultProps={onItemClick:function(){},onPopupVisibleChange:function(){},onTabChange:function(){},onClear:function(){},loading:!1,clearClose:!1,locale:{emptyText:"No notifications",clear:"Clear",loadedAll:"Loaded",loadMore:"Loading more"},emptyImage:"https://gw.alipayobjects.com/zos/rmsportal/wAhyIChODzsoKIOBHcBk.svg"};a("O3gP");var Ae,Le,Me,Te,Ve,De,Fe,Re,Ie=a("lrIw"),Ne=(a("5NDa"),a("5rEg")),ze=a("Y/ft"),Pe=a.n(ze),He=(a("17x9"),a("UjoV")),Be=a.n(He),Ke=a("G3lK"),je=a.n(Ke),Ye=(Ae=Be()(),Le=Z()(500,{leading:!0,trailing:!1}),Ve=Te=function(e){function t(e){var a;return s()(this,t),a=m()(this,f()(t).call(this,e)),a.onKeyDown=function(e){if("Enter"===e.key){var t=a.props.onPressEnter,n=a.state.value;a.timeout=setTimeout(function(){t(n)},0)}},a.onChange=function(e){var t=a.props,n=t.onSearch,r=t.onChange;a.setState({value:e}),n&&n(e),r&&r(e)},a.enterSearchMode=function(){var e=a.props.onVisibleChange;e(!0),a.setState({searchMode:!0},function(){var e=a.state.searchMode;e&&a.input.focus()})},a.leaveSearchMode=function(){a.setState({searchMode:!1,value:""})},a.state={searchMode:e.defaultOpen,value:""},a}return b()(t,e),u()(t,null,[{key:"getDerivedStateFromProps",value:function(e){return"open"in e?{searchMode:e.open}:null}}]),u()(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"debouncePressEnter",value:function(){var e=this.props.onPressEnter,t=this.state.value;e(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.placeholder,r=(t.open,Pe()(t,["className","placeholder","open"])),o=this.state,i=o.searchMode,l=o.value;delete r.defaultOpen;var s=L()(je.a.input,be()({},je.a.show,i));return v.a.createElement("span",{className:L()(a,je.a.headerSearch),onClick:this.enterSearchMode,onTransitionEnd:function(t){var a=t.propertyName;if("width"===a&&!i){var n=e.props.onVisibleChange;n(i)}}},v.a.createElement(N["a"],{type:"search",key:"Icon"}),v.a.createElement(Ie["a"],c()({key:"AutoComplete"},r,{className:s,value:l,onChange:this.onChange}),v.a.createElement(Ne["a"],{ref:function(t){e.input=t},"aria-label":n,placeholder:n,onKeyDown:this.onKeyDown,onBlur:this.leaveSearchMode})))}}]),t}(w["PureComponent"]),Te.defaultProps={defaultActiveFirstOption:!1,onPressEnter:function(){},onSearch:function(){},onChange:function(){},className:"",placeholder:"",dataSource:[],defaultOpen:!1,onVisibleChange:function(){}},Me=Ve,Q()(Me.prototype,"debouncePressEnter",[Ae,Le],Object.getOwnPropertyDescriptor(Me.prototype,"debouncePressEnter"),Me.prototype),a("bfXr"),function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.getUnreadData=function(e){var t={};return Object.entries(e).forEach(function(e){var a=ne()(e,2),n=a[0],r=a[1];t[n]||(t[n]=0),Array.isArray(r)&&(t[n]=r.filter(function(e){return!e.read}).length)}),t},a.changeReadState=function(e){var t=e.id,n=a.props.dispatch;n({type:"global/changeNoticeReadState",payload:t})},a.fetchMoreNotices=function(e){var t=e.list,n=e.name,r=a.props,o=r.dispatch,i=r.notices,c=void 0===i?[]:i,l=c[c.length-1].id;o({type:"global/fetchMoreNotices",payload:{lastItemId:l,type:n,offset:t.length}})},a}return b()(t,e),u()(t,[{key:"getNoticeData",value:function(){var e=this.props.notices,t=void 0===e?[]:e;if(0===t.length)return{};var a=t.map(function(e){var t=o()({},e);if(t.datetime&&(t.datetime=oe()(e.datetime).fromNow()),t.id&&(t.key=t.id),t.extra&&t.status){var a={todo:"",processing:"blue",urgent:"red",doing:"gold"}[t.status];t.extra=v.a.createElement(te["a"],{color:a,style:{marginRight:0}},t.extra)}return t});return ce()(a,"type")}},{key:"render",value:function(){var e=this.props,t=(e.currentUser,e.fetchingMoreNotices,e.fetchingNotices,e.loadedAllNotices,e.onNoticeVisibleChange,e.onMenuClick),a=(e.onNoticeClear,e.skeletonCount,e.theme),n=v.a.createElement(ee["a"],{className:$.a.menu,selectedKeys:[],onClick:t},v.a.createElement(ee["a"].Item,{key:"logout"},v.a.createElement(N["a"],{type:"logout"}),v.a.createElement(D["FormattedMessage"],{id:"menu.account.logout",defaultMessage:"\u9000\u51fa"}))),r=this.getNoticeData(),o=(this.getUnreadData(r),$.a.right);return"dark"===a&&(o="".concat($.a.right,"  ").concat($.a.dark)),v.a.createElement("div",{className:o},v.a.createElement(pe["a"],{overlay:n,placement:"bottomRight"},v.a.createElement("span",{className:$.a.rightMenu},v.a.createElement(N["a"],{type:"logout",title:Object(D["formatMessage"])({id:"navBar.lang"})}))))}}]),t}(w["PureComponent"])),Ue=(De=Z()(600),Re=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.toggle=function(){var e=a.props,t=e.collapsed,n=e.onCollapse;n(!t),a.triggerResizeEvent()},a}return b()(t,e),u()(t,[{key:"componentWillUnmount",value:function(){this.triggerResizeEvent.cancel()}},{key:"triggerResizeEvent",value:function(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}},{key:"render",value:function(){var e=this.props,t=e.collapsed,a=e.isMobile,n=e.logo,r=e.CacheSite,o=void 0===r?{}:r,i=e.CacheUser,c=void 0===i?{}:i;return v.a.createElement("div",{className:$.a.header},a&&v.a.createElement(G.a,{to:"/",className:$.a.logo,key:"logo"},v.a.createElement("img",{src:n,alt:"logo",width:"32"})),v.a.createElement("span",{className:$.a.trigger,onClick:this.toggle},v.a.createElement(N["a"],{type:t?"menu-unfold":"menu-fold"})),v.a.createElement("span",{className:$.a.navbar},o.site_name?"".concat(o.site_name,"\u2014\u2014"):"",c.user_name?c.user_name:""),v.a.createElement(Ye,this.props))}}]),t}(w["PureComponent"]),Fe=Re,Q()(Fe.prototype,"triggerResizeEvent",[De],Object.getOwnPropertyDescriptor(Fe.prototype,"triggerResizeEvent"),Fe.prototype),Fe),qe=a("oFg3"),Qe=a("pMM0"),Xe=a("JwhZ"),Ge=a.n(Xe),We=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.state={maxWidth:void 0},a}return b()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.theme,n=t.contentWidth,r=t.menuData,o=t.logo,i=this.state.maxWidth,l=Object(Qe["b"])(r);return v.a.createElement("div",{className:"".concat(Ge.a.head," ").concat("light"===a?Ge.a.light:"")},v.a.createElement("div",{ref:function(t){e.maim=t},className:"".concat(Ge.a.main," ").concat("Fixed"===n?Ge.a.wide:"")},v.a.createElement("div",{className:Ge.a.left},v.a.createElement("div",{className:Ge.a.logo,key:"logo",id:"logo"},v.a.createElement(G.a,{to:"/"},v.a.createElement("img",{src:o,alt:"logo"}),v.a.createElement("h1",null,"\u8fdc\u8bda\u5b9d\u8def\u901a"))),v.a.createElement("div",{style:{maxWidth:i}},v.a.createElement(qe["default"],c()({},this.props,{flatMenuKeys:l,className:Ge.a.menu})))),v.a.createElement(Ye,c()({},this.props,{className:Ge.a.rightMenu}))))}}],[{key:"getDerivedStateFromProps",value:function(e){return{maxWidth:("Fixed"===e.contentWidth?1200:window.innerWidth)-280-165-40}}}]),t}(w["PureComponent"]),Ze=a("IGtV"),Je=a.n(Ze),$e=g["a"].Header,et=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(r))),a.state={visible:!0},a.getHeadWidth=function(){var e=a.props,t=e.isMobile,n=e.collapsed,r=e.setting,o=r.fixedHeader,i=r.layout;return t||!o||"topmenu"===i?"100%":n?"calc(100% - 80px)":"calc(100% - 256px)"},a.handleNoticeClear=function(e){K["a"].success("".concat(Object(D["formatMessage"])({id:"component.noticeIcon.cleared"})," ").concat(Object(D["formatMessage"])({id:"component.globalHeader.".concat(e)})));var t=a.props.dispatch;t({type:"global/clearNotices",payload:e})},a.handleMenuClick=function(e){var t=e.key,n=a.props.dispatch;"userCenter"!==t?"triggerError"!==t?"userinfo"!==t?"logout"===t&&n({type:"login/logout"}):U.a.push("/account/settings/base"):U.a.push("/exception/trigger"):U.a.push("/account/center")},a.handleNoticeVisibleChange=function(e){if(e){var t=a.props.dispatch;t({type:"global/fetchNotices"})}},a.handScroll=function(){var e=a.props.autoHideHeader,t=a.state.visible;if(e){var n=document.body.scrollTop+document.documentElement.scrollTop;a.ticking||(a.ticking=!0,requestAnimationFrame(function(){a.oldScrollTop>n?a.setState({visible:!0}):n>300&&t?a.setState({visible:!1}):n<300&&!t&&a.setState({visible:!0}),a.oldScrollTop=n,a.ticking=!1}))}},a}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.handScroll,{passive:!0})}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.handScroll)}},{key:"render",value:function(){var e=this.props,t=e.isMobile,a=e.handleMenuCollapse,n=e.setting,r=n.navTheme,o=n.layout,i=n.fixedHeader,l=this.state.visible,s="topmenu"===o,d=this.getHeadWidth(),u=l?v.a.createElement($e,{style:{padding:0,width:d},className:i?Je.a.fixedHeader:""},s&&!t?v.a.createElement(We,c()({theme:r,mode:"horizontal",onCollapse:a,onNoticeClear:this.handleNoticeClear,onMenuClick:this.handleMenuClick,onNoticeVisibleChange:this.handleNoticeVisibleChange},this.props)):v.a.createElement(Ue,c()({onCollapse:a,onNoticeClear:this.handleNoticeClear,onMenuClick:this.handleMenuClick,onNoticeVisibleChange:this.handleNoticeVisibleChange},this.props))):null;return v.a.createElement(j["a"],{component:"",transitionName:"fade"},u)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.autoHideHeader||t.visible?null:{visible:!0}}}]),t}(w["PureComponent"]),tt=Object(k["connect"])(function(e){var t=e.user,a=e.global,n=e.setting,r=e.loading;return{currentUser:t.currentUser,collapsed:a.collapsed,fetchingMoreNotices:r.effects["global/fetchMoreNotices"],fetchingNotices:r.effects["global/fetchNotices"],loadedAllNotices:a.loadedAllNotices,notices:a.notices,setting:n}})(et),at=a("R1Dz"),nt=a("Y5yc"),rt=a("xqX8"),ot=(a("bbsP"),a("/wGt")),it=a("mR0u"),ct=a.n(it),lt=v.a.lazy(function(){return Promise.resolve().then(a.bind(null,"oFg3"))}),st=g["a"].Sider,dt=function(e){function t(e){var a;return s()(this,t),a=m()(this,f()(t).call(this,e)),a.isMainMenu=function(e){var t=a.props.menuData;return t.some(function(t){return!!e&&(t.key===e||t.path===e)})},a.handleOpenChange=function(e){var t=e.filter(function(e){return a.isMainMenu(e)}).length>1;a.setState({openKeys:t?[e.pop()]:we()(e)})},a.state={openKeys:Object(Qe["a"])(e)},a}return b()(t,e),u()(t,[{key:"render",value:function(){var e,t=this.props,a=t.logo,n=t.collapsed,r=t.onCollapse,o=t.fixSiderbar,i=t.theme,l=this.state.openKeys,s=n?{}:{openKeys:l},d=L()(ct.a.sider,(e={},be()(e,ct.a.fixSiderbar,o),be()(e,ct.a.light,"light"===i),e));return v.a.createElement(st,{trigger:null,collapsible:!0,collapsed:n,breakpoint:"lg",onCollapse:r,width:256,theme:i,className:d},v.a.createElement("div",{className:ct.a.logo,id:"logo"},v.a.createElement(G.a,{to:"/"},v.a.createElement("img",{src:a,alt:"logo"}),v.a.createElement("h1",null,"\u8fdc\u8bda\u5b9d\u8def\u901a"))),v.a.createElement(w["Suspense"],{fallback:v.a.createElement(rt["default"],null)},v.a.createElement(lt,c()({},this.props,{mode:"inline",handleOpenChange:this.handleOpenChange,onOpenChange:this.handleOpenChange,style:{padding:"16px 0",width:"100%"}},s))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=t.pathname;return e.location.pathname!==a?{pathname:e.location.pathname,openKeys:Object(Qe["a"])(e)}:null}}]),t}(w["PureComponent"]),ut=v.a.memo(function(e){var t=e.isMobile,a=e.menuData,n=e.collapsed,r=e.onCollapse,o=Object(Qe["b"])(a);return t?v.a.createElement(ot["a"],{visible:!n,placement:"left",onClose:function(){return r(!0)},style:{padding:0,height:"100vh"}},v.a.createElement(dt,c()({},e,{flatMenuKeys:o,collapsed:!t&&n}))):v.a.createElement(dt,c()({},e,{flatMenuKeys:o}))}),pt=ut,mt=a("T+dw"),ht=a("XS0u"),ft=a("W660"),yt=a.n(ft),bt=(v.a.lazy(function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,"PceP"))}),g["a"].Content),gt={"screen-xs":{maxWidth:575},"screen-sm":{minWidth:576,maxWidth:767},"screen-md":{minWidth:768,maxWidth:991},"screen-lg":{minWidth:992,maxWidth:1199},"screen-xl":{minWidth:1200,maxWidth:1599},"screen-xxl":{minWidth:1600}},wt=function(e){function t(e){var a;return s()(this,t),a=m()(this,f()(t).call(this,e)),a.matchParamsPath=function(e,t){var a=Object.keys(t).find(function(t){return T()(t).test(e)});return t[a]},a.getRouterAuthority=function(e,t){var a=["noAuthority"],n=function e(t,n){return n.forEach(function(n){return n.path&&T()(n.path).test(t)?a=n.authority:n.routes&&(a=e(t,n.routes)),n}),a};return n(e,t)},a.getPageTitle=function(e,t){var n=a.matchParamsPath(e,t);if(!n)return mt["title"];var r=mt["menu"].disableLocal?n.name:Object(D["formatMessage"])({id:n.locale||n.name,defaultMessage:n.name});return"".concat(r," - ").concat(mt["title"])},a.getLayoutStyle=function(){var e=a.props,t=e.fixSiderbar,n=e.isMobile,r=e.collapsed,o=e.layout;return t&&"topmenu"!==o&&!n?{paddingLeft:r?"80px":"256px"}:null},a.handleMenuCollapse=function(e){var t=a.props.dispatch;t({type:"global/changeLayoutCollapsed",payload:e})},a.renderSettingDrawer=function(){return null},a.getPageTitle=Object(E["a"])(a.getPageTitle),a.matchParamsPath=Object(E["a"])(a.matchParamsPath,C.a),a}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.route,n=a.routes,r=a.authority;t({type:"setting/getSetting"}),t({type:"menu/getMenuData",payload:{routes:n,authority:r}}),t({type:"comapny/getCompanyList",payload:{}})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.collapsed,n=t.isMobile;!n||e.isMobile||a||this.handleMenuCollapse(!1)}},{key:"getContext",value:function(){var e=this.props,t=e.location,a=e.breadcrumbNameMap;return{location:t,breadcrumbNameMap:a}}},{key:"render",value:function(){var e=this,t=this.props,a=t.navTheme,r=t.layout,i=t.children,l=t.location.pathname,s=t.isMobile,d=t.menuData,u=t.breadcrumbNameMap,p=t.route.routes,m=t.fixedHeader,h=t.isShowLoading,f="topmenu"===r,y=this.getRouterAuthority(l,p),b=m?{}:{paddingTop:0},x=v.a.createElement(n["a"],{tip:"\u52a0\u8f7d\u4e2d...",spinning:h},v.a.createElement(g["a"],null,f&&!s?null:v.a.createElement(pt,c()({logo:I.a,theme:a,onCollapse:this.handleMenuCollapse,menuData:d,isMobile:s},this.props)),v.a.createElement(g["a"],{style:o()({},this.getLayoutStyle(),{minHeight:"100vh"})},v.a.createElement(tt,c()({menuData:d,handleMenuCollapse:this.handleMenuCollapse,logo:I.a,isMobile:s,CacheSite:ht["c"],CacheUser:ht["d"]},this.props)),v.a.createElement(bt,{className:yt.a.content,style:b},v.a.createElement(F["a"],{authority:y,noMatch:v.a.createElement(nt["default"],null)},i)),v.a.createElement(B,null))));return v.a.createElement(v.a.Fragment,null,v.a.createElement(_.a,{title:this.getPageTitle(l,u)},v.a.createElement(O["ContainerQuery"],{query:gt},function(t){return v.a.createElement(at["a"].Provider,{value:e.getContext()},v.a.createElement("div",{className:L()(t)},x))})),v.a.createElement(w["Suspense"],{fallback:v.a.createElement(rt["default"],null)},this.renderSettingDrawer()))}}]),t}(v.a.PureComponent);t["default"]=Object(k["connect"])(function(e){var t=e.global,a=e.setting,n=e.company,r=e.menu,i=e.ajaxLoading;return o()({collapsed:t.collapsed,layout:a.layout,menuData:r.menuData,breadcrumbNameMap:r.breadcrumbNameMap},a,{branchCompanyList:n.branchCompanyList,isShowLoading:i.isShowLoading})})(function(e){return v.a.createElement(V["a"],{query:"(max-width: 599px)"},function(t){return v.a.createElement(wt,c()({},e,{isMobile:t}))})})},mR0u:function(e,t,a){e.exports={logo:"antd-pro-components-sider-menu-index-logo",sider:"antd-pro-components-sider-menu-index-sider",fixSiderbar:"antd-pro-components-sider-menu-index-fixSiderbar",light:"antd-pro-components-sider-menu-index-light",icon:"antd-pro-components-sider-menu-index-icon"}},mwKL:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=a("d6i3"),f=a.n(h),y=a("1l/V"),b=a.n(y),g=(a("2qtc"),a("kLXV")),w=(a("14J3"),a("BMrR")),v=(a("jCWc"),a("kPKH")),x=a("jehZ"),_=a.n(x),S=(a("5NDa"),a("5rEg")),C=(a("+L6B"),a("2/Rp")),E=(a("O3gP"),a("lrIw")),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("B797"),U=a("CkN6"),q=a("mzDP"),Q=a.n(q),X=a("7Qib"),G=(a("S+eF"),a("XS0u")),W=z["a"].RangePicker,Z=N["a"].Item,J=I["a"].Option,$=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){console.log("####",t.props.abnormal_type_id),a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text}),console.log(e,t),console.log(a.state)},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form;n.validateFields(function(e,a){console.log(a),e||t({transfer_money:a.transfer_money,transfer_status:0,transfer_user:a.transfer_user,remark:a.remark})})},a.renderCustomerOption=function(e){var t=E["a"].Option;return H.a.createElement(t,{key:e.incometype_id,incometype_id:e.incometype_id,text:e.incometype},e.incometype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=(e.selectedRows,e.form);e.incomeTypes;return H.a.createElement(g["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u6253\u6b3e",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(C["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(C["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:Q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,_()({},this.formItemLayout,{label:"\u6253\u6b3e\u91d1\u989d"}),n.getFieldDecorator("transfer_money",{initialValue:"",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6253\u6b3e\u91d1\u989d"}]})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,_()({},this.formItemLayout,{label:"\u6253\u6b3e\u4eba"}),n.getFieldDecorator("transfer_user",{initialValue:""})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(w["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(v["a"],null,H.a.createElement(Z,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},n.getFieldDecorator("remark",{initialValue:""})(H.a.createElement(S["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),ee=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.transfer,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,transfer:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},current:1,pageSize:20,record:{},currentSite:{},orderModalVisible:!1,settleModalVisible:!1,cancelConfirmTransferModalVisible:!1,delTransferModalVisible:!1,addIncomeModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u6253\u6b3e\u65e5\u671f",dataIndex:"transfer_date",render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u6253\u6b3e\u91d1\u989d",dataIndex:"transfer_money",width:"80px"},{title:"\u6253\u6b3e\u4eba",dataIndex:"transfer_user",width:"80px"},{title:"\u786e\u8ba4\u4eba",dataIndex:"confirm_operator_name",width:"80px"},{title:"\u786e\u8ba4\u65e5\u671f",dataIndex:"confirm_date",render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u6253\u6b3e\u516c\u53f8",dataIndex:"site_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.btnClicked=!1,a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchIncomeTypeList=function(){var e=b()(f.a.mark(function e(t){var n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.companyId,r=t.siteId,o=a.props.dispatch,o({type:"income/getIncomeTypesAction",payload:{company_id:n,site_id:r}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchCompanySiteList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=b()(f.a.mark(function e(t){var n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onSiteSelect=function(){var e=b()(f.a.mark(function e(t,n){var r,o,i;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.siteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.transfer_date&&o.transfer_date.length>0&&(o.transfer_date=o.transfer_date.map(function(e){return"".concat(e.valueOf())})),o.company_id=G["a"].company_id,o.transfer_type=1;var i=Object.assign({filter:o},e);r({type:"transfer/getTransferAction",payload:m()({pageNo:t||c,pageSize:l},i)}),r({type:"transfer/getTransferStatisticAction",payload:m()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=b()(f.a.mark(function e(t,n,r){var o,i,c;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=a.state.pageSize,i={},c=1,r.field&&(i={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==o){e.next=10;break}return c=1,e.next=8,a.setState({pageSize:t.pageSize});case 8:e.next=11;break;case 10:t&&t.current&&(c=t.current);case 11:return e.next=13,a.setState({current:c});case 13:a.getOrderList(i,c);case 14:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=b()(f.a.mark(function e(t){var n,r,o,i;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),n=a.props.dispatch,r=a.state.currentSite,o=void 0===r?{}:r,e.next=8,n({type:"transfer/addTransferAction",payload:m()({},t,{company_id:G["a"].company_id,company_name:G["a"].company_name,transfer_type:1,site_id:o.site_id,site_name:o.site_name})});case 8:i=e.sent,0==i.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelIncomeClick()):u["a"].error(i.msg);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddIncomeClick=b()(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.currentSite,n=void 0===t?{}:t,1!=G["a"].company_id||n.site_id){e.next=4;break}return g["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"}),e.abrupt("return");case 4:a.setState({addIncomeModalVisible:!0});case 5:case"end":return e.stop()}},e)})),a.onCancelIncomeClick=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addIncomeModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onConfirmTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 1==e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u5df2\u7ecf\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u91cd\u590d\u786e\u8ba4\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,settleModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onSettleCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettleOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=9,t({type:"transfer/confirmTransferAction",payload:{transfer_id:r}});case 9:o=e.sent,0==o.code?(u["a"].success("\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):u["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onCancelConfirmTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 0==e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u672a\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u53d6\u6d88\u786e\u8ba4\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,cancelConfirmTransferModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onCancelConfirmTransferCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelConfirmTransferModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelConfirmTransferOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=9,t({type:"transfer/cancelConfirmTransferAction",payload:{transfer_id:r}});case 9:o=e.sent,0==o.code?(u["a"].success("\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.handleSearch(),a.onCancelConfirmTransferCancel()):u["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onDelTransfer=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=t.filter(function(e){return 1==e.transfer_status}),!(n.length>0)){e.next=5;break}return g["a"].info({content:"\u5df2\u7ecf\u786e\u8ba4\u7684\u6253\u6b3e\u4e0d\u80fd\u5220\u9664\uff01"}),e.abrupt("return");case 5:r=Object(Y["c"])(t),a.setState({accountStatistic:r,delTransferModalVisible:!0});case 7:case"end":return e.stop()}},e)})),a.onDelConfirmTransferCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({delTransferModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDelConfirmTransferOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.transfer_id}),e.next=5,t({type:"transfer/delTransferAction",payload:{transfer_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u5220\u9664\u786e\u8ba4\u6253\u6b3e\u6210\u529f\uff01"),a.onDelConfirmTransferCancel()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onCancelSign=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelSignCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelSignOk=b()(f.a.mark(function e(){var t,n,r,o;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(u["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onCancelSignCancel()):u["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=b()(f.a.mark(function e(){var t,n,r;return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(u["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):u["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){e.site_id==G["c"].site_id&&a.setState({record:e})},a.tableFooter=function(){var e=a.props.transfer,t=e.total,n=e.totalTransferAmount,r=e.totalTransferConfirmAmount,o=e.totalTransferUnConfirmAmount,i=e.totalShouldTransfer;return H.a.createElement("div",{className:Q.a.tableFooter},H.a.createElement("span",null,"\u6253\u6b3e\u603b\u989d\uff1a",n||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u672a\u786e\u8ba4\u6253\u6b3e\u603b\u989d\uff1a",o||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u5df2\u786e\u8ba4\u6253\u6b3e\u603b\u989d\uff1a",r||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u5e94\u6253\u6b3e\u603b\u989d\uff1a",i||0),H.a.createElement("span",{className:Q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=b()(f.a.mark(function e(){return f.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.props.dispatch,this.fetchCompanySiteList(G["a"].company_id),this.setState({currentSite:G["c"]}),this.handleSearch();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site.siteList,n=void 0===a?[]:a,r=e.company.branchCompanyList,o=void 0===r?[]:r,i={};return o.length>0&&(i.initialValue=o[0].company_id||""),H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},H.a.createElement(Z,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:G["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},onSelect:this.onSiteSelect,allowClear:"site_pay"==G["b"].role_value},("site_pay"==G["b"].role_value?n:[G["c"]]).map(function(e){return H.a.createElement(J,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(Z,{label:"\u786e\u8ba4\u6253\u6b3e"},t("transfer_status",{initialValue:"0"})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},H.a.createElement(J,{value:"1"},"\u5df2\u786e\u8ba4\u6253\u6b3e"),H.a.createElement(J,{value:"0"},"\u672a\u786e\u8ba4\u6253\u6b3e")))),H.a.createElement(Z,{label:"\u6253\u6b3e\u65e5\u671f"},t("transfer_date",{})(H.a.createElement(W,{locale:X["b"],style:{width:"250px"}}))),H.a.createElement(Z,null,H.a.createElement(C["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.transfer,n=a.transferList,r=a.total,o=t.loading,i=this.state,c=i.selectedRows,l=(i.accountStatistic,i.current),s=i.pageSize,u=(i.orderModalVisible,i.settleModalVisible),p=i.cancelConfirmTransferModalVisible,m=i.delTransferModalVisible,h=i.addIncomeModalVisible,f=i.signModalVisible,y=i.cancelSignModalVisible,b=i.downloadModalVisible,w=i.printModalVisible,v=(i.record,!1);["site_pay"].indexOf(G["b"].role_value)>=0&&(v=!0);var x=!0;return["site_searchuser","site_pay"].indexOf(G["b"].role_value)>=0&&(x=!1),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:Q.a.tableList},H.a.createElement("div",{className:Q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:Q.a.tableListOperator},x&&H.a.createElement(C["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddIncomeClick(!0)}},"\u6dfb\u52a0"),c.length>0&&v&&H.a.createElement("div",null,H.a.createElement(C["a"],{onClick:this.onConfirmTransfer},"\u6253\u6b3e\u786e\u8ba4"),H.a.createElement(C["a"],{onClick:this.onCancelConfirmTransfer},"\u53d6\u6d88\u786e\u8ba4")),c.length>0&&x&&H.a.createElement(C["a"],{onClick:this.onDelTransfer},"\u5220\u9664\u6253\u6b3e")),H.a.createElement(U["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:Q.a.dataTable,rowKey:"transfer_id",data:{list:n,pagination:{total:r,pageSize:s,current:l,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){if(1===e.transfer_status)return Q.a.payColor}})),this.tableFooter()),H.a.createElement($,{modalVisible:h,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelIncomeClick,selectedRows:c}),H.a.createElement(g["a"],{title:"\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:u,onOk:this.onSettleOk,onCancel:this.onSettleCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5bf9".concat(c.length,"\u6761\u8bb0\u5f55\u786e\u8ba4\u6253\u6b3e\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:p,onOk:this.onCancelConfirmTransferOk,onCancel:this.onCancelConfirmTransferCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5bf9".concat(c.length,"\u6761\u8bb0\u5f55\u53d6\u6d88\u786e\u8ba4\u6253\u6b3e\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u5220\u9664\u786e\u8ba4\u6253\u6b3e",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onDelConfirmTransferOk,onCancel:this.onDelConfirmTransferCancel},H.a.createElement("p",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664".concat(c.length,"\u6761\u786e\u8ba4\u6253\u6b3e\u8bb0\u5f55\u4e48\uff1f "))),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(g["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=ee},mzDP:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-transfer-transfer-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-transfer-transfer-minusType",tableList:"antd-pro-pages-transfer-transfer-tableList",tableListOperator:"antd-pro-pages-transfer-transfer-tableListOperator",tableFooter:"antd-pro-pages-transfer-transfer-tableFooter",footerSplit:"antd-pro-pages-transfer-transfer-footerSplit",signColor:"antd-pro-pages-transfer-transfer-signColor",shipColor:"antd-pro-pages-transfer-transfer-shipColor",editOrderColor:"antd-pro-pages-transfer-transfer-editOrderColor",settleColor:"antd-pro-pages-transfer-transfer-settleColor",payColor:"antd-pro-pages-transfer-transfer-payColor",selectedColor:"antd-pro-pages-transfer-transfer-selectedColor",tableDetail:"antd-pro-pages-transfer-transfer-tableDetail",modalForm:"antd-pro-pages-transfer-transfer-modalForm",entrunkForm:"antd-pro-pages-transfer-transfer-entrunkForm",formItemFloat:"antd-pro-pages-transfer-transfer-formItemFloat",tableListForm:"antd-pro-pages-transfer-transfer-tableListForm",submitButtons:"antd-pro-pages-transfer-transfer-submitButtons",dataTable:"antd-pro-pages-transfer-transfer-dataTable","ant-form-item":"antd-pro-pages-transfer-transfer-ant-form-item","ant-select":"antd-pro-pages-transfer-transfer-ant-select",formItemNoBreak:"antd-pro-pages-transfer-transfer-formItemNoBreak"}},o6JX:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-system-system-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-system-system-minusType",tableList:"antd-pro-pages-system-system-tableList",tableListOperator:"antd-pro-pages-system-system-tableListOperator",tableFooter:"antd-pro-pages-system-system-tableFooter",footerSplit:"antd-pro-pages-system-system-footerSplit",signColor:"antd-pro-pages-system-system-signColor",shipColor:"antd-pro-pages-system-system-shipColor",editOrderColor:"antd-pro-pages-system-system-editOrderColor",settleColor:"antd-pro-pages-system-system-settleColor",payColor:"antd-pro-pages-system-system-payColor",selectedColor:"antd-pro-pages-system-system-selectedColor",tableDetail:"antd-pro-pages-system-system-tableDetail",modalForm:"antd-pro-pages-system-system-modalForm",entrunkForm:"antd-pro-pages-system-system-entrunkForm",formItemFloat:"antd-pro-pages-system-system-formItemFloat",tableListForm:"antd-pro-pages-system-system-tableListForm",submitButtons:"antd-pro-pages-system-system-submitButtons",dataTable:"antd-pro-pages-system-system-dataTable","ant-form-item":"antd-pro-pages-system-system-ant-form-item","ant-select":"antd-pro-pages-system-system-ant-select",formItemNoBreak:"antd-pro-pages-system-system-formItemNoBreak"}},o9hN:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d,u,p,m,h,f,y,b,g,w,v,x,_,S=a("bx4M"),C=a("p0pE"),E=a.n(C),k=(a("fOrg"),a("+KLJ")),O=(a("iQDF"),a("+eQT")),A=(a("2qtc"),a("kLXV")),L=(a("giR+"),a("fyUT")),M=(a("5NDa"),a("5rEg")),T=(a("14J3"),a("BMrR")),V=(a("jCWc"),a("kPKH")),D=a("jehZ"),F=a.n(D),R=(a("+L6B"),a("2/Rp")),I=(a("O3gP"),a("lrIw")),N=(a("+BJd"),a("mr32")),z=a("d6i3"),P=a.n(z),H=(a("miYZ"),a("tsqr")),B=a("1l/V"),K=a.n(B),j=a("2Taf"),Y=a.n(j),U=a("vZ4D"),q=a.n(U),Q=a("l4Ni"),X=a.n(Q),G=a("ujKo"),W=a.n(G),Z=a("rlhR"),J=a.n(Z),$=a("MhPg"),ee=a.n($),te=(a("OaEy"),a("2fM7")),ae=(a("y8nQ"),a("Vl3Y")),ne=a("q1tI"),re=a.n(ne),oe=a("MuoO"),ie=a("wd/R"),ce=a.n(ie),le=a("CkN6"),se=(a("zHco"),a("gA67")),de=a.n(se),ue=(a("17x9"),a("XS0u")),pe=a("80Er"),me=a("7Qib"),he=(a("S+eF"),a("/mOS")),fe=a("Bm+a"),ye=window.require("electron"),be=(ye.ipcRenderer,ae["a"].Item),ge=te["a"].Option,we=(n=Object(oe["connect"])(function(e){var t=e.customer;return{customer:t}}),r=ae["a"].create(),n(o=r((i=function(e){function t(e){var a;return Y()(this,t),a=X()(this,W()(t).call(this,e)),a.okHandle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,n=t.form,r=t.handleAdd,o=t.selectedOrder,i=t.branchCompanyList,c=t.customer,l=(c.getCustomerList,c.sendCustomerList,a.state);l.currentSendCustomer,l.currentGetCustomer;n.validateFields(function(){var t=K()(P.a.mark(function t(c,l){var s;return P.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!c){t.next=2;break}return t.abrupt("return");case 2:if(!l.order_amount||l.bank_account){t.next=5;break}return H["a"].error("\u8bf7\u586b\u5199\u94f6\u884c\u8d26\u53f7"),t.abrupt("return");case 5:return s=i.find(function(e){return e.company_id==l.company_id}),l.company_name=s.company_name,Object.keys(l).forEach(function(e){e.indexOf("amount")>=0&&(l[e]=Number(l[e]||0))}),l["trans_discount"]||(l["trans_discount"]=l["trans_amount"]),l.order_num=Number(l.order_num||0),l.order_label_num=Number(l.order_label_num||0),l.transfer_type&&(l.transfer_type=Number(l.transfer_type)),t.next=14,Object(pe["k"])(J()(a),l,"edit");case 14:if(l=t.sent,!(Number(l.getcustomer_name)>=0||Number(l.sendcustomer_name))){t.next=18;break}return H["a"].error("\u5ba2\u6237\u59d3\u540d\u4e0d\u80fd\u4e3a\u6570\u5b57\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9/\u8f93\u5165"),t.abrupt("return");case 18:l.site_name=ue["c"].site_name,r(l,o,e),n.resetFields(),a.setState({currentSendCustomer:{},currentGetCustomer:{},initGetCustomerValue:"",initSendCustomerValue:""});case 22:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}())},a.fetchGetCustomerList=K()(P.a.mark(function e(){var t,n,r=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=a.props.dispatch,e.next=4,n({type:"customer/getCustomerListAction",payload:{filter:t}});case 4:case"end":return e.stop()}},e)})),a.fetchSendCustomerList=K()(P.a.mark(function e(){var t,n,r=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=a.props.dispatch,e.next=4,n({type:"customer/sendCustomerListAction",payload:{filter:t}});case 4:case"end":return e.stop()}},e)})),a.onCompanySelect=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c,l;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props,r=n.branchCompanyList,o=n.dispatch,c=0;case 2:if(!(c<r.length)){e.next=10;break}if(l=r[c],l.company_id!=t){e.next=7;break}return i=l,e.abrupt("break",10);case 7:c++,e.next=2;break;case 10:if(!i){e.next=17;break}return e.next=13,a.setState({currentCompany:i});case 13:o({type:"customer/resetCustomerPageNoAction",payload:{type:"Get"}}),a.fetchGetCustomerList({company_id:i.company_id}),a.computeInsuranceFee(),a.computeTransDiscount();case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.setSelectedCustomer=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=a.props.form,{},o=r.getFieldValue("order_amount"),"sendcustomer_id"!=t){e.next=9;break}+o>0&&r.setFieldsValue({bank_account:n.bank_account||""}),a.setState({initSendCustomerValue:n.customer_id}),e.next=12;break;case 9:return e.next=11,a.setState({currentGetCustomer:n,initGetCustomerValue:n.customer_id});case 11:a.computeTransDiscount();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSendCustomerMobileBlur=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.currentCompany,!1,o=t&&t.target&&t.target.value,e.next=6,n({type:"customer/queryCustomerAction",payload:{type:1,customer_mobile:o,company_id:r.company_id}});case 6:i=e.sent,i.sendCustomer&&i.sendCustomer.customer_id&&(a.setSelectedCustomer("sendcustomer_id",i.sendCustomer||{}),a.setState({currentSendCustomer:i.sendCustomer||{}}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onGetCustomerMobileBlur=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.currentCompany,!1,o=t&&t.target&&t.target.value,e.next=6,n({type:"customer/queryCustomerAction",payload:{type:0,customer_mobile:o,company_id:r.company_id}});case 6:i=e.sent,i.getCustomer&&i.getCustomer.customer_id&&(a.setSelectedCustomer("getcustomer_id",i.getCustomer||{}),a.setState({currentGetCustomer:i.getCustomer||{}}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSendCustomerSelect=function(){var e=K()(P.a.mark(function e(t,n){var r,o,i,c,l,s,d,u;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.customer,o.getCustomerList,i=o.sendCustomerList,c=r.form,l=c.getFieldValue("order_amount"),d=0;case 3:if(!(d<i.length)){e.next=12;break}if(u=i[d],u.customer_id!=t){e.next=9;break}return s=u,c.setFieldsValue({sendcustomer_mobile:u.customer_mobile}),e.abrupt("break",12);case 9:d++,e.next=3;break;case 12:if(!s){e.next=16;break}return+l>0&&c.setFieldsValue({bank_account:s.bank_account}),e.next=16,a.setState({currentSendCustomer:s});case 16:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onGetCustomerSelect=function(){var e=K()(P.a.mark(function e(t,n){var r,o,i,c,l,s,d;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.customer,i=o.getCustomerList,o.sendCustomerList,c=r.form,s=0;case 2:if(!(s<i.length)){e.next=11;break}if(d=i[s],d.customer_id!=t){e.next=8;break}return l=d,c.setFieldsValue({getcustomer_mobile:d.customer_mobile}),e.abrupt("break",11);case 8:s++,e.next=2;break;case 11:if(!l){e.next=15;break}return e.next=14,a.setState({currentGetCustomer:l});case 14:a.computeTransDiscount();case 15:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSendCustomerChange=function(){var e=K()(P.a.mark(function e(t){return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({sendCustomerNameChangeTimer:(new Date).getTime()}),setTimeout(function(){var e=a.state.sendCustomerNameChangeTimer;(new Date).getTime()-e>300&&a.fetchSendCustomerList({customer_name:t})},350);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onGetCustomerChange=function(){var e=K()(P.a.mark(function e(t){return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({getCustomerNameChangeTimer:(new Date).getTime()}),setTimeout(function(){var e=a.state,n=e.getCustomerNameChangeTimer,r=e.currentCompany;(new Date).getTime()-n>300&&a.fetchGetCustomerList({customer_name:t,company_id:r.company_id})},350);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.computeInsuranceFee=function(){var e=a.props.form,t=a.state.currentCompany,n=void 0===t?{}:t,r=e.getFieldValue("insurance_amount")||0,o=Math.ceil(r*(n.insurance_ratio||2)/1e3);e.setFieldsValue({insurance_fee:o})},a.computeTransDiscount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.changeType,n=void 0===t?"":t,r=(a.props.branchCompanyList,a.state),o=r.currentCompany,i=r.currentGetCustomer,c=r.currentSendCustomer,l=a.props.form,s=l.getFieldValue("trans_originalamount")||0,d=l.getFieldValue("trans_amount")||0,u=l.getFieldValue("trans_type")||0,p=i.trans_vip_ratio||1,m=c.trans_vip_ratio||1,h=o.trans_regional_ratio||1;"transAmount"!=n&&(d=Math.ceil(Number(s)*Number(h)));var f=d,y=1;y=0==u?p:m,f=Math.ceil(Number(d)*Number(y)),l.setFieldsValue({trans_discount:f||"",trans_amount:d||""})},a.onTransTypeSelect=function(){a.computeTransDiscount()},a.onTransOriginalBlur=function(e){a.computeTransDiscount()},a.onTransBlur=function(e){a.computeTransDiscount({changeType:"transAmount"})},a.onOrderAmountBlur=function(e){var t=a.props.form,n=a.state.currentSendCustomer,r=e.target.value;+r>0?t.setFieldsValue({bank_account:n.bank_account||""}):t.setFieldsValue({bank_account:""})},a.onOrderNumBlur=function(e){var t=a.props.form,n=e.target.value;t.setFieldsValue({order_label_num:n})},a.onOrderPrint=function(){a.okHandle({type:"print"})},a.onGetCustomerFilter=function(e,t){console.log(e,t)},a.getCustomerTag=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return 1==e.customer_type?t=re.a.createElement(N["a"],{color:"orange",style:{marginTop:10}},"VIP"):9==e.customer_type&&(t=re.a.createElement(N["a"],{color:"orange",style:{marginTop:10}},"\u9ed1")),t},a.renderCustomerOption=function(e){var t=I["a"].Option;return re.a.createElement(t,{value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),text:e.customer_name},e.customer_name)},a.state={selectedGetCustomerMobile:"",selectedSendCustomerMobile:"",currentSendCustomerName:"",currentSendCustomer:{},currentGetCustomerName:"",currentGetCustomer:{},currentCompany:{},getCustomerNameChangeTimer:0,sendCustomerNameChangeTimer:0,initSendCustomerValue:"",initGetCustomerValue:""},a.formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},a.formItemSmallLayout={labelCol:{xs:{span:25},sm:{span:9}},wrapperCol:{xs:{span:23},sm:{span:15}}},a.colLayout={md:8,sm:24},a.colSmallLayout={md:4,sm:20},a.col2Layout={md:10,sm:26},a.colLargeLayout={md:16,sm:32},a.formItemMiniLayout={labelCol:{xs:{span:22},sm:{span:6}},wrapperCol:{xs:{span:26},sm:{span:18}}},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a}return ee()(t,e),q()(t,[{key:"componentDidMount",value:function(){var e=K()(P.a.mark(function e(){var t,a,n,r,o,i,c,l,s,d,u=this;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.props,a=t.form,n=t.selectedOrder,r=void 0===n?{}:n,t.dispatch,o=t.currentCompany,i=void 0===o?{}:o,c=t.branchCompanyList,t.customer.getCustomerList,l=a.getFieldsValue(),s=Object.keys(l),d=i,i.company_id||(d=c[0]),this.setState({currentCompany:d}),this.fetchGetCustomerList({company_id:d.company_id}),this.fetchSendCustomerList(),s.length>0&&Object.keys(l).forEach(function(e){if(r[e]&&!["getcustomer_id","sendcustomer_id"].includes(e)){var t={};t[e]=r[e],"transfer_type"==e&&(t[e]="".concat(t[e])),a.setFieldsValue(t)}"getcustomer_id"==e&&u.setState({initGetCustomerValue:r[e]}),"sendcustomer_id"==e&&u.setState({initSendCustomerValue:r[e]})});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.form,n=t.modalVisible,r=t.handleModalVisible,o=t.branchCompanyList,i=t.customer,c=i.getCustomerList,l=i.sendCustomerList,s=t.siteList,d=t.selectedOrder,u=t.selectedGetCustomer,p=t.selectedSendCustomer,m=(t.currentSite,this.state),h=m.selectedGetCustomerMobile,f=m.selectedSendCustomerMobile,y=m.currentGetCustomer,b=m.currentSendCustomer,g=m.currentCompany,w=m.initSendCustomerValue,v=void 0===w?"":w,x=m.initGetCustomerValue,_=void 0===x?"":x,S={rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u516c\u53f8"}]};S.initialValue=g.company_id||"";var C=[ue["c"]];if((3==ue["c"].site_type||d&&d.getcustomer_id)&&(C=s),d&&d.getcustomer_id){var E=!1;c.forEach(function(e){e.customer_id==u.customer_id&&(E=!0)}),!E&&u.customer_id&&c.unshift(u);var k=!1;l.forEach(function(e){e.customer_id==p.customer_id&&(k=!0)}),!k&&p.customer_id&&l.unshift(p)}var O={0:"\u63d0",1:"\u73b0",2:"\u56de"},D=[re.a.createElement(R["a"],{key:"btn-cancel",onClick:function(){return r()},tabIndex:-1},"\u53d6 \u6d88"),re.a.createElement(R["a"],{key:"btn-print",onClick:this.onOrderPrint},"\u6253 \u5370"),re.a.createElement(R["a"],{key:"btn-save",type:"primary",onClick:function(){e.okHandle()},tabIndex:-1},"\u4fdd \u5b58")];2==ue["a"].company_type&&(D=[re.a.createElement(R["a"],{key:"btn-cancel",onClick:function(){return r()},tabIndex:-1},"\u53d6 \u6d88")]);var N=re.a.createElement(fe["a"],{title:"\u65b0\u5efa\u6258\u8fd0\u5355"});return re.a.createElement(A["a"],{destroyOnClose:!0,title:N,okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:n,className:de.a.modalForm,onCancel:function(){return r()},footer:D,width:800},re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u5206\u516c\u53f8"}),a.getFieldDecorator("company_id",S)(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100%"}},o.map(function(e){return re.a.createElement(ge,{key:e.company_id,value:e.company_id},e.company_name)}))))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u7ad9\u70b9"}),a.getFieldDecorator("site_id",{initialValue:ue["c"].site_id})(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"100%"},tabIndex:-1},C.map(function(e){return re.a.createElement(ge,{key:e.site_id,value:e.site_id},e.site_name)})))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u6536\u8d27\u4eba\u7535\u8bdd"}),a.getFieldDecorator("getcustomer_mobile",{initialValue:h,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u8d27\u4eba\u7535\u8bdd"}]})(re.a.createElement(M["a"],{onBlur:this.onGetCustomerMobileBlur,placeholder:"\u8bf7\u8f93\u5165",maxLength:15})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u6536\u8d27\u4eba\u59d3\u540d"}),a.getFieldDecorator("getcustomer_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u8d27\u4eba\u59d3\u540d"}],initialValue:"".concat(_)})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:c.map(this.renderCustomerOption),onSelect:this.onGetCustomerSelect,onChange:this.onGetCustomerChange,allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," ")))),re.a.createElement(V["a"],this.colSmallLayout,this.getCustomerTag(y))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"}),a.getFieldDecorator("sendcustomer_mobile",{initialValue:f,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u8d27\u4eba\u7535\u8bdd"}]})(re.a.createElement(M["a"],{onBlur:this.onSendCustomerMobileBlur,placeholder:"\u8bf7\u8f93\u5165",maxLength:15})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"}),a.getFieldDecorator("sendcustomer_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u8d27\u4eba\u59d3\u540d"}],initialValue:"".concat(v)})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:l.map(this.renderCustomerOption),onSelect:this.onSendCustomerSelect,onChange:this.onSendCustomerChange,placeholder:"\u8bf7\u8f93\u5165",allowClear:!0,filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," ")))),re.a.createElement(V["a"],this.colSmallLayout,this.getCustomerTag(b))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{span:38,className:de.a.formItemFloat},re.a.createElement(be,{labelCol:{span:10},wrapperCol:{span:10},label:"\u5c0f\u7968\u8fd0\u8d39"},a.getFieldDecorator("trans_originalamount",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u5c0f\u7968\u8fd0\u8d39",onBlur:this.onTransOriginalBlur,style:{width:"100px"},maxLength:10}))),re.a.createElement(be,{style:{width:"180px"},labelCol:{span:10},wrapperCol:{span:12},label:"\u8fd0\u8d39"},a.getFieldDecorator("trans_amount",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8fd0\u8d39",onBlur:this.onTransBlur,style:{width:"100px"},tabIndex:-1,maxLength:10}))),re.a.createElement(be,{label:"",labelCol:{span:0},wrapperCol:{span:4}},a.getFieldDecorator("trans_type",{initialValue:0})(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"70px"},tabIndex:-1,onSelect:this.onTransTypeSelect},re.a.createElement(ge,{value:0},"\u63d0\u4ed8"),re.a.createElement(ge,{value:1},"\u73b0\u4ed8"),re.a.createElement(ge,{value:2},"\u56de\u4ed8"))))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u6298\u540e\u8fd0\u8d39"}),a.getFieldDecorator("trans_discount",{})(re.a.createElement(M["a"],{placeholder:"",tabIndex:-1,style:{width:"80px"},disabled:!0}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u8d27\u6b3e"}),a.getFieldDecorator("order_amount",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d27\u6b3e",onBlur:this.onOrderAmountBlur,tabIndex:-1,maxLength:10})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u94f6\u884c\u8d26\u53f7"}),a.getFieldDecorator("bank_account")(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u94f6\u884c\u8d26\u53f7",tabIndex:-1,maxLength:25}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4fdd\u4ef7\u91d1\u989d"}),a.getFieldDecorator("insurance_amount",{})(re.a.createElement(M["a"],{placeholder:"",tabIndex:-1,onBlur:this.computeInsuranceFee,maxLength:10})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4fdd\u4ef7\u8d39[".concat(O[a.getFieldValue("trans_type")],"]")}),a.getFieldDecorator("insurance_fee",{})(re.a.createElement(M["a"],{readOnly:!0,placeholder:"",tabIndex:-1,maxLength:10}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u9001\u8d27\u8d39"}),a.getFieldDecorator("deliver_amount",{})(re.a.createElement(M["a"],{placeholder:"",tabIndex:-1,maxLength:10})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u57ab\u4ed8\u91d1\u989d"}),a.getFieldDecorator("order_advancepay_amount",{})(re.a.createElement(M["a"],{placeholder:"",tabIndex:-1,maxLength:10}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{span:"13"},re.a.createElement(be,{labelCol:{span:5},wrapperCol:{span:12},label:"\u8d27\u7269\u540d\u79f0"},a.getFieldDecorator("order_name",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"340px"},maxLength:100})))),re.a.createElement(V["a"],{span:"4"},re.a.createElement(be,{labelCol:{span:12},wrapperCol:{span:12},label:"\u4ef6\u6570"},a.getFieldDecorator("order_num",{initialValue:1})(re.a.createElement(L["a"],{placeholder:"\u4ef6\u6570",onBlur:this.onOrderNumBlur,style:{width:"60px"}})))),re.a.createElement(V["a"],{span:"4"},re.a.createElement(be,{labelCol:{span:12},wrapperCol:{span:12},label:"\u6807\u7b7e\u6570"},a.getFieldDecorator("order_label_num",{initialValue:1})(re.a.createElement(L["a"],{placeholder:"",style:{width:"60px"}}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u8f6c\u8fdb/\u8f6c\u51fa"}),a.getFieldDecorator("transfer_type")(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"100%"},tabIndex:-1},re.a.createElement(ge,{value:"1"},"\u8f6c\u51fa"),re.a.createElement(ge,{value:"2"},"\u8f6c\u8fdb"))))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u8d39"}),a.getFieldDecorator("transfer_amount",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:10}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u5730\u5740"}),a.getFieldDecorator("transfer_address",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:100})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u7269\u6d41"}),a.getFieldDecorator("transfer_company_name")(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:100}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u5355\u53f7"}),a.getFieldDecorator("transfer_order_code",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:20})))),re.a.createElement(V["a"],this.col2Layout,re.a.createElement(be,F()({},this.formItemLayout,{label:"\u4e2d\u8f6c\u7535\u8bdd"}),a.getFieldDecorator("transfer_company_mobile",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:15}))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],this.colLargeLayout,re.a.createElement(be,F()({},this.formItemMiniLayout,{label:"\u5907\u6ce8"}),a.getFieldDecorator("remark",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",tabIndex:-1,maxLength:100}))))))}}]),t}(ne["PureComponent"]),o=i))||o)||o),ve=(c=Object(oe["connect"])(function(e){var t=e.untrunkorder;return{untrunkorder:t}}),l=ae["a"].create(),c(s=l((d=function(e){function t(e){var a;return Y()(this,t),a=X()(this,W()(t).call(this,e)),a.onCarChange=function(e){for(var t,n=a.props,r=n.driverList,o=n.form,i=0;i<r.length;i++){var c=r[i];if(c.driver_plate==e){t=c;break}}t||o.setFieldsValue({driver_id:"",driver_name:"",driver_mobile:""})},a.onCarSelect=function(e,t){for(var n,r=t.props,o=a.props,i=o.driverList,c=o.form,l=0;l<i.length;l++){var s=i[l];if(s.driver_id==r.driverid){n=s;break}}n&&c.setFieldsValue({driver_name:n.driver_name,driver_mobile:n.driver_mobile})},a.renderCustomerOption=function(e){var t=I["a"].Option;return re.a.createElement(t,{key:e.driver_id,driverid:e.driver_id,value:"".concat(e.driver_id),text:e.driver_plate},e.driver_plate)},a.getModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=(e.branchCompanyList,e.currentCompany,e.driverList),r=e.lastCar,o=void 0===r?{}:r,i={};return n.forEach(function(e){e.driver_id==o.driver_id&&Number(o.car_status)<3&&(i=e)}),Number(o.car_status)>=3&&(o={car_code:Number(o.car_code)+1}),re.a.createElement(ae["a"],{layout:"inline",className:de.a.entrunkForm},re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u8f66\u724c\u53f7"},t("driver_id",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6536\u8f66\u724c\u53f7"}],initialValue:"".concat(o.driver_id||"")})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:n.map(a.renderCustomerOption),onSelect:a.onCarSelect,onChange:a.onCarChange,placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," ")))),re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u8f66\u4e3b\u59d3\u540d"},t("driver_name",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8f66\u4e3b\u59d3\u540d"}],initialValue:i.driver_name})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))),re.a.createElement(T["a"],null,re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u8054\u7cfb\u7535\u8bdd"},t("driver_mobile",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8054\u7cfb\u7535\u8bdd"}],initialValue:i.driver_mobile})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u8d27\u8f66\u7f16\u53f7"},t("car_code",{initialValue:o.car_code,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d27\u8f66\u7f16\u53f7"}]})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",disabled:!0}))))),re.a.createElement(T["a"],null,re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u62c9\u8d27\u65e5\u671f"},t("car_date",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u62c9\u8d27\u65e5\u671f"}],initialValue:ce()((new Date).getTime())})(re.a.createElement(O["a"],{placeholder:"\u5168\u90e8",locale:me["b"],format:"YYYY-MM-DD",style:{width:"100%"}})))),re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u8d27\u8f66\u8d39\u7528"},t("car_fee",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d27\u8f66\u8d39\u7528"}],initialValue:o.car_fee||""})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165"}))))))},a.btnClicked=!1,a.onOkHandler=function(e){if(e.preventDefault(),!a.btnClicked){a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3);var t=a.props,n=t.dispatch,r=t.form,o=t.selectedRows,i=t.onEntrunkModalCancel,c=t.driverList,l=void 0===c?[]:c,s=t.onSearch,d=(t.currentShipSite,t.currentCompany),u=void 0===d?{}:d;r.validateFields(function(){var e=K()(P.a.mark(function e(t,a){var r,c,d,p,m,h;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return r=a,c=0,d="",p=o.map(function(e){return c=e.shipsite_id,d=e.shipsite_name,e.order_id}),r.car_date&&r.car_date.valueOf&&(r.car_date="".concat(r.car_date.valueOf())),m=l.filter(function(e){if(e.driver_id==r.driver_id)return e}),m.length<=0?(r.driver_plate=r.driver_id,r.driver_id=0):(r.driver_plate=m[0].driver_plate,r.driver_id=Number(r.driver_id)),r.car_fee=Number(r.car_fee||0),r.shipsite_id=c,r.shipsite_name=d,r.car_code=r.car_code+"",r.company_id=u.company_id,Object(me["c"])(n),e.next=17,n({type:"untrunkorder/entrunkOrderAction",payload:{order_id:p,car:r}});case 17:h=e.sent,Object(me["a"])(n),0==h.code?(H["a"].success("\u88c5\u8f66\u6210\u529f"),s(),i()):H["a"].error(h.msg||"\u88c5\u8f66\u5931\u8d25");case 20:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())}},a}return ee()(t,e),q()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onEntrunkModalCancel;return re.a.createElement(A["a"],{title:"\u8d27\u7269\u88c5\u8f66",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",className:de.a.standardListForm,width:700,destroyOnClose:!0,visible:t,onOk:this.onOkHandler,onCancel:a},this.getModalContent())}}]),t}(ne["PureComponent"]),s=d))||s)||s),xe=(u=Object(oe["connect"])(function(e){var t=e.untrunkorder;return{untrunkorder:t}}),p=ae["a"].create(),u(m=p((h=function(e){function t(e){var a;return Y()(this,t),a=X()(this,W()(t).call(this,e)),a.getModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=e.receiverList;return re.a.createElement(ae["a"],{layout:"inline"},re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u63a5\u8d27\u4eba"},t("receiver_id",{})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:n.map(function(e){var t=I["a"].Option;return re.a.createElement(t,{key:"".concat(e.courier_id),value:"".concat(e.courier_id),customerid:"".concat(e.courier_id),label:e.courier_name},e.courier_name)}),allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))))))},a.onOkHandler=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form,o=t.receiverList,i=t.selectedRows,c=t.onReceiverModalCancel;r.validateFields(function(){var e=K()(P.a.mark(function e(t,a){var r,l,s;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(r=i.map(function(e){return e.order_id}),l=o.filter(function(e){if(e.courier_id==a.receiver_id)return e}),!(l.length<=0)){e.next=7;break}return H["a"].error("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u63a5\u8d27\u4eba"),e.abrupt("return");case 7:return a.order_id=r,a.receiver_name=l[0]&&l[0].courier_name,a.receiver_id=l[0]&&l[0].courier_id,e.next=12,n({type:"untrunkorder/changeOrderReceiverAction",payload:a});case 12:s=e.sent,0==s.code&&c();case 14:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},a.state={},a}return ee()(t,e),q()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onReceiverModalCancel;return re.a.createElement(A["a"],{title:"\u66f4\u6539\u63a5\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",className:de.a.standardListForm,width:640,destroyOnClose:!0,visible:t,onOk:this.onOkHandler,onCancel:a},this.getModalContent())}}]),t}(ne["PureComponent"]),m=h))||m)||m),_e=(f=Object(oe["connect"])(function(e){var t=e.site,a=e.order;return{site:t,order:a}}),y=ae["a"].create(),f(b=y((g=function(e){function t(e){var a;return Y()(this,t),a=X()(this,W()(t).call(this,e)),a.getEntrunkModalContent=function(){var e=a.props,t=e.form.getFieldDecorator,n=e.receiverList,r=e.entrunkSiteList,o=void 0===r?[]:r,i=e.selectedRows,c=e.currentShipSite,l=void 0===c?{}:c,s=function(){var e=0;return i.forEach(function(t){e+=t.order_num}),"\u5408\u8ba1 ".concat(i.length," \u7968\uff0c\u5171\u8ba1 ").concat(e," \u4ef6")},d={rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u914d\u8f7d\u7ad9"}]};return d.initialValue=l.site_id||o.length>0&&o[0].site_id,re.a.createElement(ae["a"],{layout:"inline"},re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u914d\u8f7d\u7ad9"},t("shipsite_id",d)(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},o.map(function(e){return re.a.createElement(ge,{key:e.site_id,value:e.site_id},e.site_name)}))))),re.a.createElement(V["a"],{md:12,sm:24},re.a.createElement(be,{label:"\u63a5\u8d27\u4eba"},t("receiver_id",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u63a5\u8d27\u4eba"}]})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:n.map(function(e){var t=I["a"].Option;return re.a.createElement(t,{key:"".concat(e.courier_id),value:"".concat(e.courier_id),customerid:"".concat(e.courier_id),label:e.courier_name},e.courier_name)}),allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))))),re.a.createElement(T["a"],{gutter:{md:8,lg:24,xl:48}},re.a.createElement(V["a"],{md:24,sm:24},re.a.createElement(k["a"],{message:s(),type:"info"}))))},a.btnClicked=!1,a.onEntruck=function(e){if(e.preventDefault(),!a.btnClicked){a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3);var t=a.props,n=t.dispatch,r=t.form,o=t.selectedRows,i=t.receiverList,c=t.entrunkSiteList,l=t.onShipModalCancel,s=t.handleSearch;r.validateFields(function(){var e=K()(P.a.mark(function e(t,a,r){var d,u,p,m;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(d=o.map(function(e){return e.order_id}),u=i.filter(function(e){if(e.courier_id==a.receiver_id)return e}),p=c.filter(function(e){if(e.site_id==a.shipsite_id)return e}),a.order_id=d,a.shipsite_name=p[0]&&p[0].site_name,a.receiver_id=u[0]&&u[0].courier_id,a.receiver_name=u[0]&&u[0].courier_name,!(u.length<=0)){e.next=12;break}return H["a"].error("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u63a5\u8d27\u4eba"),e.abrupt("return");case 12:return e.next=14,n({type:"order/shipOrderAction",payload:a});case 14:m=e.sent,m&&0==m.code&&(H["a"].success("\u64cd\u4f5c\u6210\u529f"),l(),setTimeout(function(){s()},1e3));case 16:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}())}},a.state={},a}return ee()(t,e),q()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onShipModalCancel;return re.a.createElement(A["a"],{title:"\u88c5\u56de\u914d\u8f7d\u7ad9",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",className:de.a.standardListForm,width:640,destroyOnClose:!0,visible:t,onOk:this.onEntruck,onCancel:a},this.getEntrunkModalContent())}}]),t}(ne["PureComponent"]),b=g))||b)||b),Se=(w=Object(oe["connect"])(function(e){var t=e.customer,a=e.company,n=e.order,r=e.site,o=e.car,i=e.driver,c=e.receiver,l=e.ajaxLoading;return{customer:t,company:a,site:r,order:n,receiver:c,car:o,driver:i,ajaxLoading:l}}),v=ae["a"].create(),w(x=v((_=function(e){function t(){var e,a;Y()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=X()(this,(e=W()(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,selectedRows:[],formValues:{},current:1,pageSize:20,shipModalVisible:!1,receiverModalVisible:!1,cancelShipModalVisible:!1,currentSite:{},currentCompany:{},currentShipSite:{},labelPrinterName:"TSC_TTP_244CE",selectedGetCustomer:{},selectedSendCustomer:{}},a.columns=[{title:"\u5206\u516c\u53f8",width:"60px",sorter:!0,dataIndex:"company_name"},{title:"\u63a5\u8d27\u4eba",width:"80px",dataIndex:"receiver_name",sorter:!0},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",sorter:!0,dataIndex:"create_date",render:function(e){return re.a.createElement("span",null,ce()(e).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u8d27\u5355\u53f7",width:"70px",sorter:!0,dataIndex:"order_code",align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"sendcustomer_name"},{title:"\u6536\u83b7\u5ba2\u6237",width:"80px",sorter:!0,dataIndex:"getcustomer_name"},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",sorter:!0,dataIndex:"order_amount"},{title:"\u8fd0\u8d39",width:"80px",sorter:!0,dataIndex:"trans_amount"},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",sorter:!0,dataIndex:"trans_discount"},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"60px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",sorter:!0,dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",sorter:!0,dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",sorter:!0,dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u7ecf\u529e\u4eba",width:"80px",sorter:!0,dataIndex:"operator_name"},{title:"\u7ad9\u70b9",width:"80px",sorter:!0,dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.getReceiverList=K()(P.a.mark(function e(){var t,n;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.props.dispatch,n=a.state.currentCompany,void 0===n?{}:n,t({type:"receiver/getReceiverListAction",payload:{pageNo:1,pageSize:100,type:"receiver",filter:{}}});case 3:case"end":return e.stop()}},e)})),a.setCurrentCompany=K()(P.a.mark(function e(){var t,n=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:[],2!=ue["a"].company_type){e.next=7;break}return e.next=4,a.setState({currentCompany:ue["a"]});case 4:return e.abrupt("return",ue["a"]);case 7:if(!(t&&t.length>0)){e.next=11;break}return e.next=10,a.setState({currentCompany:t[0]});case 10:return e.abrupt("return",t[0]);case 11:return e.abrupt("return",{});case 12:case"end":return e.stop()}},e)})),a.handleStandardTableChange=function(){var e=K()(P.a.mark(function e(t,n,r){var o,i,c,l;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({sorter:"order_status|ascend,create_date|desc"})},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=n.receiver.receiverList,c=a.state,l=c.current,s=c.pageSize;o.validateFields(function(){var n=K()(P.a.mark(function n(o,c){var d,u;return P.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:if(Object(me["c"])(r),c.order_status=[0,1],!c.receiver_id){n.next=12;break}if(d=i.filter(function(e){if(e.courier_id==c.receiver_id)return e}),!(d.length<=0)){n.next=9;break}return H["a"].error("\u8bf7\u9009\u62e9\u6b63\u786e\u7684\u63a5\u8d27\u4eba"),n.abrupt("return");case 9:c.receiver_id=d[0]&&d[0].courier_id,n.next=13;break;case 12:delete c.receiver_id;case 13:u=Object.assign({filter:c},e),r({type:"order/getOrderListAction",payload:E()({pageNo:t||l,pageSize:s},u)}),r({type:"order/getOrderStatisticAction",payload:E()({},u)}),a.getLastCarInfo(),a.standardTable.cleanSelectedKeys(),Object(me["a"])(r);case 19:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.onRefTable=function(e){a.standardTable=e},a.handleModalVisible=function(e){var t=a.state;t.currentCompany,t.currentSite;a.setState({selectedOrder:{},modalVisible:!!e}),e||a.getOrderList()},a.handleAdd=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c,l,s,d=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},r=d.length>2?d[2]:void 0,o=a.props.dispatch,i=n.order_code,c=(new Date).getTime(),Object(me["c"])(o),!n.order_id){e.next=16;break}return e.next=9,o({type:"order/updateOrderAction",payload:{order:Object.assign(t,{order_id:n.order_id}),order_id:n.order_id}});case 9:l=e.sent,Object(me["a"])(o),l&&0==l.code?H["a"].success("\u7f16\u8f91\u6210\u529f"):H["a"].error("\u7f16\u8f91\u5931\u8d25"),c=n.create_date,a.handleModalVisible(!1),e.next=23;break;case 16:return e.next=18,o({type:"order/createOrderAction",payload:t});case 18:s=e.sent,Object(me["a"])(o),i=s&&s.data&&s.data.order_code||"",console.log(s.data),s&&0==s.code?H["a"].success("\u6dfb\u52a0\u6210\u529f"):H["a"].error("\u6dfb\u52a0\u5931\u8d25");case 23:"print"==r.type&&a.printOrder(Object.assign({order_code:i},Object.assign(t,{create_date:c}),r));case 24:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.printOrder=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c,l,s,d,u,p,m;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props,r=n.company.branchCompanyList,o=n.site.siteList,i=a.props.dispatch,e.next=4,i({type:"customer/queryCustomerAction",payload:{getcustomer_id:t.getcustomer_id,sendcustomer_id:t.sendcustomer_id}});case 4:c=e.sent,l=c.getCustomer,s=void 0===l?{}:l,d=c.sendCustomer,u=void 0===d?{}:d,p={},r.forEach(function(e){e.company_id==t.company_id&&(p=e)}),m=Object(he["a"])({getCustomer:s,sendCustomer:u,data:t,printCompany:p,siteList:o,footer:!0}),Object(he["d"])(m),Object(he["c"])(t,t.order_label_num,localStorage.getItem("LabelPrinterName"),p,s);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDelete=K()(P.a.mark(function e(){var t,n,r,o;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=a.props.dispatch,r=[],t.forEach(function(e){r.push(e.order_id)}),o=J()(a),A["a"].confirm({title:"\u786e\u8ba4",content:"\u4f60\u786e\u8ba4\u5220\u9664\u6240\u52fe\u9009\u8ba2\u5355\u4fe1\u606f\u4e48\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var e=K()(P.a.mark(function e(){var t;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n({type:"order/deleteOrderAction",payload:{order_id:r,is_delete:1}});case 2:t=e.sent,t&&0==t.code?H["a"].success("\u5220\u9664\u6210\u529f"):H["a"].error("\u5220\u9664\u5931\u8d25"),setTimeout(function(){o.getOrderList()},1e3);case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()});case 6:case"end":return e.stop()}},e)})),a.onRowDoubleClick=function(){var e=K()(P.a.mark(function e(t,n,r){var o,i,c,l;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return o=a.props.dispatch,e.next=3,o({type:"customer/queryCustomerAction",payload:{sendcustomer_id:t.sendcustomer_id,getcustomer_id:t.getcustomer_id}});case 3:return i=e.sent,c=i.getCustomer,l=i.sendCustomer,c&&c.customer_id||(c={customer_id:t.getcustomer_id,customer_name:t.getcustomer_name,customer_mobile:t.getcustomer_mobile}),l&&l.customer_id||(l={customer_id:t.sendcustomer_id,customer_name:t.sendcustomer_name,customer_mobile:t.sendcustomer_mobile}),e.next=10,a.setState({selectedGetCustomer:c,selectedSendCustomer:l,selectedOrder:t,modalVisible:!0});case 10:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onCancelShipOk=K()(P.a.mark(function e(){var t,n,r,o;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=a.props.dispatch,r=[],t.forEach(function(e){1==e.order_status&&r.push(e.order_id)}),!(r.length<t.length)){e.next=7;break}return H["a"].info("\u53ea\u80fd\u53d6\u6d88\u5df2\u7ecf\u88c5\u8f66\u7684\u8ba2\u5355"),e.abrupt("return",!1);case 7:return e.next=9,n({type:"untrunkorder/cancelShipAction",payload:{order_id:r}});case 9:o=e.sent,0==o.code&&(setTimeout(function(){a.getOrderList()},500),H["a"].success("\u53d6\u6d88\u88c5\u56de\u6210\u529f"),a.onCancelShipCancel());case 11:case"end":return e.stop()}},e)})),a.onCancelShipCancel=function(){a.setState({cancelShipModalVisible:!1})},a.onCancelShip=function(){var e=a.state.selectedRows,t=[];if(e.forEach(function(e){1==e.order_status&&t.push(e.order_id)}),t.length<e.length)return H["a"].info("\u5f53\u524d\u9009\u62e9\u7684\u90e8\u5206\u8ba2\u5355\u672a\u88c5\u56de\u914d\u8f7d\u7ad9\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),!1;a.setState({cancelShipModalVisible:!0})},a.onShipModalShow=function(){a.props.form;var e=a.state,t=(e.currentShipSite,e.currentCompany,e.selectedRows),n=[];if(t.forEach(function(e){0==e.order_status&&n.push(e.order_id)}),n.length<t.length)return H["a"].info("\u5f53\u524d\u9009\u62e9\u7684\u90e8\u5206\u8ba2\u5355\u5df2\u7ecf\u88c5\u56de\u914d\u8f7d\u7ad9\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),!1;a.setState({shipModalVisible:!0})},a.onShipModalCancel=function(){a.setState({shipModalVisible:!1})},a.onReceiverModalCancel=function(){a.setState({receiverModalVisible:!1})},a.onReceiverModalShow=function(){a.setState({receiverModalVisible:!0})},a.onPrintOrder=function(){var e=a.state.selectedRows;Object(he["f"])({selectedRows:e})},a.onDownloadOrder=function(){var e=a.state.selectedRows;Object(he["b"])({selectedRows:e,type:"pdf"})},a.resetCustomerPage=K()(P.a.mark(function e(){var t,n,r=arguments;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:"Get",n=a.props.dispatch,n({type:"customer/resetCustomerPageNoAction",payload:{type:t}});case 3:case"end":return e.stop()}},e)})),a.onCompanySelect=function(){var e=K()(P.a.mark(function e(t,n){var r,o,i,c,l;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.company.branchCompanyList,o=void 0===r?[]:r,i={},c=0;case 3:if(!(c<o.length)){e.next=11;break}if(l=o[c],l.company_id!=t){e.next=8;break}return i=l,e.abrupt("break",11);case 8:c++,e.next=3;break;case 11:return e.next=13,a.setState({currentCompany:i});case 13:return e.next=15,a.resetCustomerPage();case 15:a.getLastCarInfo(),a.handleSearch();case 17:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getLastCarInfo=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c,l,s,d,u,p,m,h;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t&&t.isUseCarCode||!1,r=a.props,o=r.dispatch,i=r.form,c=a.state,l=c.currentCompany,s=void 0===l?{}:l,d=c.currentShipSite,u=void 0===d?{}:d,p=i.getFieldValue("car_code"),m={company_id:s.company_id,shipsite_id:u.site_id},p&&n&&(m.car_code=p),e.next=8,o({type:"car/getLastCarCodeAction",payload:m});case 8:return h=e.sent,a.getDriverList(),e.abrupt("return",h);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getDriverList=function(){var e=a.props,t=e.dispatch,n=(e.form,a.state.currentCompany);n&&n.company_id&&t({type:"driver/getDriverListAction",payload:{pageNo:1,pageSize:500,company_id:n.company_id}})},a.onShipSiteSelect=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.site.entrunkSiteList,r=void 0===n?[]:n,o={},i=0;case 3:if(!(i<r.length)){e.next=11;break}if(c=r[i],c.site_id!=t){e.next=8;break}return o=c,e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:return e.next=13,a.setState({currentShipSite:o});case 13:a.getLastCarInfo(),a.handleSearch();case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=K()(P.a.mark(function e(t){var n,r,o,i,c;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.site.siteList,r=void 0===n?[]:n,o={},i=0;case 3:if(!(i<r.length)){e.next=11;break}if(c=r[i],c.site_id!=t){e.next=8;break}return o=c,e.abrupt("break",11);case 8:i++,e.next=3;break;case 11:a.setState({currentSite:o}),a.handleSearch();case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onEntrunkModalShow=function(){var e=a.props,t=e.form,n=(e.car.lastCar,a.state),r=n.currentShipSite,o=void 0===r?{}:r,i=n.currentCompany,c=void 0===i?{}:i,l=n.selectedRows,s=[],d="",u="",p=!0,m=!0;l.forEach(function(e){1==e.order_status&&s.push(e.order_id),d||(d=e.company_id),u||(u=e.shipsite_id),d&&d!=e.company_id&&(p=!1),u&&u!=e.shipsite_id&&(m=!1)}),s.length<l.length?H["a"].error("\u53ea\u80fd\u5bf9\u88c5\u56de\u914d\u8f7d\u7ad9\u7684\u8ba2\u5355\u8fdb\u884c\u88c5\u8f66"):p?c.company_id?o.site_id&&t.getFieldValue("shipsite_id")?c.company_id==d?m?a.setState({entrunkModalVisible:!0}):H["a"].error("\u8bf7\u9009\u62e9\u76f8\u540c\u914d\u8f7d\u7ad9\u7684\u8ba2\u5355\u8fdb\u884c\u88c5\u8f66"):A["a"].info({content:"\u9009\u62e9\u7684\u8ba2\u5355\u6240\u5c5e\u5206\u516c\u53f8\u548c\u5f53\u524d\u9009\u62e9\u7684\u5206\u516c\u53f8\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u52fe\u9009\u8ba2\u5355\u8fdb\u884c\u88c5\u8f66",onOk:function(){a.getOrderList()}}):H["a"].error("\u8bf7\u5148\u9009\u62e9\u914d\u8f7d\u7ad9"):H["a"].error("\u8bf7\u5148\u9009\u62e9\u516c\u53f8"):H["a"].error("\u53ea\u80fd\u5bf9\u76f8\u540c\u5206\u516c\u53f8\u8ba2\u5355\u8fdb\u884c\u88c5\u8f66")},a.onEntrunkModalCancel=function(){a.setState({entrunkModalVisible:!1})},a.tableFooter=function(){var e=a.props.order,t=e.total,n=e.totalOrderAmount,r=e.totalTransAmount,o=(e.totalInsurancefee,e.totalRealTransAmount,e.totalRealOrderAmount),i=e.totalAdvancepayAmount,c=e.totalDeliverAmount,l=e.totalTifuTransAmount,s=e.totalXianTransAmount,d=e.totalLatefee,u=e.totalBonusfee,p=e.totalCarFeeConfirm,m=e.totalCarFee,h=e.totalTifuInsurance,f=e.totalXianInsurence;return re.a.createElement("div",{className:de.a.tableFooter},re.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",o||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",r||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u63d0\u4ed8\u8fd0\u8d39\uff1a",l||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u897f\u5b89\u8fd0\u8d39\uff1a",s||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u57ab\u4ed8\u8fd0\u8d39\uff1a",i||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u9001\u8d27\u8d39\uff1a",c||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u897f\u5b89\u4fdd\u8d39\uff1a",f||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u63d0\u4ed8\u4fdd\u8d39\uff1a",h||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",d||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u5956\u91d1\uff1a",u||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u672a\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",m||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u5df2\u7ed3\u7b97\u8d27\u8f66\u8fd0\u8d39\uff1a",p||"0"),re.a.createElement("span",{className:de.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return ee()(t,e),q()(t,[{key:"componentDidMount",value:function(){var e=K()(P.a.mark(function e(){var t,a,n,r;return P.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getCompanyList",payload:{}});case 3:return a=e.sent,e.next=6,this.setCurrentCompany(a);case 6:return e.sent,e.next=9,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 9:return n=e.sent,this.getReceiverList(),t({type:"customer/resetCustomerPageNoAction",payload:{}}),n&&n.length>0&&(r=n.filter(function(e){return 3==e.site_type||2==e.site_type}),r.length>0&&this.setState({currentShipSite:r[0]})),e.next=15,this.getLastCarInfo();case 15:this.handleSearch(),this.getDriverList();case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.company.branchCompanyList,n=e.site,r=n.entrunkSiteList,o=n.siteList,i=e.receiver.receiverList,c=this.state,l=(c.currentShipSite,c.currentCompany),s=void 0===l?{}:l,d={initialValue:s.company_id},u=!1,p={initialValue:ue["c"].site_id},m=[ue["c"]];return 3!=ue["c"].site_type&&2!=ue["c"].site_type&&2!=ue["a"].company_type||(m=o,u=!0,p={}),re.a.createElement(ae["a"],{onSubmit:this.handleSearch,layout:"inline"},re.a.createElement(be,{label:"\u5206\u516c\u53f8"},t("company_id",d)(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",onChange:this.onCompanySelect,allowClear:1==ue["a"].company_type,style:{width:"100px"}},(1==ue["a"].company_type?a:[ue["a"]]).map(function(e){return re.a.createElement(ge,{key:e.company_id,value:e.company_id},e.company_name)})))),re.a.createElement(be,{label:"\u7ad9\u70b9"},t("site_id",p)(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,style:{width:"100px"},allowClear:u},m.map(function(e){return re.a.createElement(ge,{value:e.site_id},e.site_name)})))),re.a.createElement(be,{label:"\u7ecf\u529e\u4eba"},t("operator_id",{})(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},re.a.createElement(ge,{value:ue["d"].user_id,selected:!0},ue["d"].user_name)))),re.a.createElement(be,{label:"\u914d\u8f7d\u7ad9"},t("shipsite_id",{})(re.a.createElement(te["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},onChange:this.onShipSiteSelect,allowClear:!0},r.map(function(e){return re.a.createElement(ge,{key:e.site_id,value:e.site_id},e.site_name)})))),re.a.createElement(be,{label:"\u63a5\u8d27\u4eba"},t("receiver_id",{})(re.a.createElement(I["a"],{size:"large",style:{width:"100%"},dataSource:i.map(function(e){var t=I["a"].Option;return re.a.createElement(t,{key:"".concat(e.courier_id),value:"".concat(e.courier_id),customerid:"".concat(e.courier_id),label:e.courier_name},e.courier_name)}),allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),re.a.createElement(be,{label:"\u8fd0\u5355\u53f7"},t("order_code",{})(re.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"250px"},allowClear:!0}))),re.a.createElement(be,null,re.a.createElement(R["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.company.branchCompanyList),i=t.customer,c=(i.getCustomerList,i.sendCustomerList,i.getCustomerPageNo,i.sendCustomerPageNo,t.receiver.receiverList),l=t.site,s=l.entrunkSiteList,d=l.siteList,u=t.driver.driverList,p=t.car.lastCar,m=t.loading,h=this.state,f=h.selectedRows,y=h.selectedOrder,b=h.selectedGetCustomer,g=h.selectedSendCustomer,w=h.modalVisible,v=h.current,x=void 0===v?1:v,_=h.pageSize,C=void 0===_?2:_,E=h.shipModalVisible,k=h.receiverModalVisible,O=h.entrunkModalVisible,L=h.currentCompany,M=h.currentSite,T=h.currentShipSite,V=h.cancelShipModalVisible,D={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},I=!0,N=!0,z=!0,P=!0,H=!0;1!=ue["a"].company_type&&(I=!1,N=!1,z=!1,P=!1,H=!1),["site_searchuser","site_orderuser","site_pay","site_receipt"].indexOf(ue["b"].role_value)>=0&&(I=!1,P=!1),["site_searchuser","site_pay","site_receipt"].indexOf(ue["b"].role_value)>=0&&(N=!1,z=!1,P=!1,H=!1),["site_orderuser"].indexOf(ue["b"].role_value)>=0&&(P=!0),["site_pay","site_receipt"].indexOf(ue["b"].role_value)>=0&&(N=!0);var B=[],K=[];return f.forEach(function(e){0==e.order_status&&B.push(e),1==e.order_status&&K.push(e)}),re.a.createElement("div",null,re.a.createElement(S["a"],{bordered:!1},re.a.createElement("div",{className:de.a.tableList},re.a.createElement("div",{className:de.a.tableListForm},this.renderForm()),re.a.createElement("div",{className:de.a.tableListOperator},z&&re.a.createElement(R["a"],{icon:"plus",type:"primary",onClick:function(){return e.handleModalVisible(!0)}},"\u5f55\u5165\u6258\u8fd0\u5355"),f.length>0&&H&&B.length==f.length&&re.a.createElement("span",null,re.a.createElement(R["a"],{onClick:this.onDelete},"\u5220\u9664\u6258\u8fd0\u5355")),f.length>0&&P&&B.length==f.length&&re.a.createElement("span",null,re.a.createElement(R["a"],{onClick:this.onShipModalShow},"\u88c5\u56de\u914d\u8f7d\u7ad9")),f.length>0&&P&&K.length==f.length&&re.a.createElement("span",null,re.a.createElement(R["a"],{onClick:this.onCancelShip},"\u53d6\u6d88\u88c5\u56de\u914d\u8f7d\u7ad9")),f.length>0&&I&&K.length==f.length&&re.a.createElement("span",null,re.a.createElement(R["a"],{onClick:this.onReceiverModalShow},"\u66f4\u6539\u63a5\u8d27\u4eba"),re.a.createElement(R["a"],{onClick:this.onEntrunkModalShow},"\u88c5\u8f66")),f.length>0&&N&&re.a.createElement("span",null,re.a.createElement(R["a"],{onClick:this.onPrintOrder},"\u6253\u5370\u6e05\u5355"),re.a.createElement(R["a"],{onClick:this.onDownloadOrder},"\u4e0b\u8f7d\u6e05\u5355"))),re.a.createElement(le["a"],{onRef:this.onRefTable,selectedRows:f,className:de.a.dataTable,loading:m,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:C,current:x,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,rowClassNameHandler:function(e,t){return 1===e.order_status?de.a.shipColor:""}})),this.tableFooter()),w&&re.a.createElement(we,F()({},D,{branchCompanyList:o,modalVisible:w,selectedOrder:y,selectedGetCustomer:b,selectedSendCustomer:g,siteList:d,currentSite:M,currentCompany:L})),re.a.createElement(ve,{modalVisible:O,selectedRows:f,branchCompanyList:o,currentCompany:L,onEntrunkModalCancel:this.onEntrunkModalCancel,driverList:u,lastCar:p,onSearch:this.handleSearch,currentShipSite:T}),re.a.createElement(xe,{receiverList:c,entrunkSiteList:s,modalVisible:k,selectedRows:f,currentCompany:L,onReceiverModalCancel:this.onReceiverModalCancel}),re.a.createElement(_e,{receiverList:c,entrunkSiteList:s,modalVisible:E,selectedRows:f,handleSearch:this.handleSearch,onShipModalCancel:this.onShipModalCancel,currentShipSite:T}),re.a.createElement(A["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:V,onOk:this.onCancelShipOk,onCancel:this.onCancelShipCancel},re.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u53d6\u6d88\u88c5\u56de\u4e48\uff1f")))}}]),t}(ne["PureComponent"]),x=_))||x)||x);t["default"]=Se},oFg3:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return V});var n=a("jehZ"),r=a.n(n),o=a("gWZ8"),i=a.n(o),c=a("2Taf"),l=a.n(c),s=a("vZ4D"),d=a.n(s),u=a("l4Ni"),p=a.n(u),m=a("ujKo"),h=a.n(m),f=a("MhPg"),y=a.n(f),b=(a("Pwec"),a("CtXQ")),g=(a("lUTK"),a("BvKs")),w=a("q1tI"),v=a.n(w),x=a("TSYQ"),_=a.n(x),S=a("wY1l"),C=a.n(S),E=a("S/9j"),k=a("pMM0"),O=a("+n12"),A=a("mR0u"),L=a.n(A),M=g["a"].SubMenu,T=function(e){return"string"===typeof e&&Object(O["c"])(e)?v.a.createElement("img",{src:e,alt:"icon",className:L.a.icon}):"string"===typeof e?v.a.createElement(b["a"],{type:e}):e},V=function(e){function t(){var e,a;l()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=p()(this,(e=h()(t)).call.apply(e,[this].concat(r))),a.getNavMenuItems=function(e,t){return e?e.filter(function(e){return e.name&&!e.hideInMenu}).map(function(e){return a.getSubMenuOrItem(e,t)}).filter(function(e){return e}):[]},a.getSelectedMenuKeys=function(e){var t=a.props.flatMenuKeys;return Object(E["a"])(e).map(function(e){return Object(k["c"])(t,e).pop()})},a.getSubMenuOrItem=function(e){if(e.children&&!e.hideChildrenInMenu&&e.children.some(function(e){return e.name})){var t=e.name;return v.a.createElement(M,{title:e.icon?v.a.createElement("span",null,v.a.createElement("span",{className:"sidemenu-icon"},e.icon),v.a.createElement("span",{className:"sidemenu-text"},t)):t,key:e.path},a.getNavMenuItems(e.children))}return v.a.createElement(g["a"].Item,{key:e.path},a.getMenuItemPath(e))},a.getMenuItemPath=function(e){var t=e.name,n=a.conversionPath(e.path),r=T(e.icon),o=e.target;if(/^https?:\/\//.test(n))return v.a.createElement("a",{href:n,target:o},r,v.a.createElement("span",null,t));var i=a.props,c=i.location,l=i.isMobile,s=i.onCollapse;return v.a.createElement(C.a,{to:n,target:o,replace:n===c.pathname,onClick:l?function(){s(!0)}:void 0},r,v.a.createElement("span",null,t))},a.conversionPath=function(e){return e&&0===e.indexOf("http")?e:"/".concat(e||"").replace(/\/+/g,"/")},a}return y()(t,e),d()(t,[{key:"render",value:function(){var e=this.props,t=e.openKeys,a=e.theme,n=e.mode,o=e.location.pathname,c=e.className,l=e.collapsed,s=this.getSelectedMenuKeys(o);!s.length&&t&&(s=[t[t.length-1]]);var d={};t&&!l&&(d={openKeys:0===t.length?i()(s):t});var u=this.props,p=u.handleOpenChange,m=u.style,h=u.menuData,f=_()(c,{"top-nav-menu":"horizontal"===n});return v.a.createElement(g["a"],r()({key:"Menu",mode:n,theme:a,onOpenChange:p,selectedKeys:s,style:m,className:f},d),this.getNavMenuItems(h))}}]),t}(w["PureComponent"])},pMM0:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return c}),a.d(t,"a",function(){return l});var n=a("bALw"),r=a.n(n),o=a("S/9j"),i=function e(t){var a=[];return t.forEach(function(t){a.push(t.path),t.children&&(a=a.concat(e(t.children)))}),a},c=function(e,t){return e.filter(function(e){return!!e&&r()(e).test(t)})},l=function(e){var t=e.location.pathname,a=e.flatMenuKeys;return Object(o["a"])(t).map(function(e){return c(a,e)[0]}).filter(function(e){return e})}},qcUQ:function(e,t,a){"use strict";a.r(t);a("2qtc");var n,r,o,i,c=a("kLXV"),l=(a("IzEo"),a("bx4M")),s=(a("+L6B"),a("2/Rp")),d=(a("O3gP"),a("lrIw")),u=(a("5NDa"),a("5rEg")),p=a("jehZ"),m=a.n(p),h=(a("miYZ"),a("tsqr")),f=a("d6i3"),y=a.n(f),b=a("1l/V"),g=a.n(b),w=a("p0pE"),v=a.n(w),x=a("2Taf"),_=a.n(x),S=a("vZ4D"),C=a.n(S),E=a("l4Ni"),k=a.n(E),O=a("ujKo"),A=a.n(O),L=a("rlhR"),M=a.n(L),T=a("MhPg"),V=a.n(T),D=(a("OaEy"),a("2fM7")),F=(a("y8nQ"),a("Vl3Y")),R=a("q1tI"),I=a.n(R),N=a("MuoO"),z=a("wd/R"),P=a.n(z),H=a("B797"),B=a("CkN6"),K=a("82qg"),j=a("SLv7"),Y=a.n(j),U=a("/mOS"),q=a("XS0u"),Q=a("80Er"),X=F["a"].Item,G=D["a"].Option,W=(n=Object(N["connect"])(function(e){var t=e.common,a=e.customer,n=e.company,r=e.unsettlegoods,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{common:t,customer:a,company:n,unsettlegoods:r,site:o,car:i,receiver:c,loading:l.models.rule}}),r=F["a"].create(),n(o=r((i=function(e){function t(){var e,a;_()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=k()(this,(e=A()(t)).call.apply(e,[this].concat(r))),a.state=v()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{},currentShipSite:{}},Q["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",width:"80px",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0},{title:"\u53d1\u8d27\u5ba2\u6237",width:"80px",dataIndex:"sendcustomer_name",sorter:!0},{title:"\u6536\u83b7\u5ba2\u6237",width:"80px",dataIndex:"getcustomer_name",sorter:!0},{title:"\u5e94\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_amount",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",width:"80px",dataIndex:"order_real"},{title:"\u6298\u540e\u8fd0\u8d39",width:"80px",dataIndex:"trans_discount",sorter:!0},{title:"\u8fd0\u8d39\u65b9\u5f0f",width:"80px",dataIndex:"trans_type",sorter:!0,render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",width:"80px",sorter:!0,dataIndex:"order_advancepay_amount"},{title:"\u9001\u8d27\u8d39",width:"80px",sorter:!0,dataIndex:"deliver_amount"},{title:"\u4fdd\u4ef7\u8d39",width:"80px",sorter:!0,dataIndex:"insurance_fee"},{title:"\u8d27\u7269\u540d\u79f0",width:"150px",dataIndex:"order_name"},{title:"\u5f55\u7968\u65f6\u95f4",width:"170px",dataIndex:"create_date",render:function(e){return I.a.createElement("span",null,e&&P()(e).format("YYYY-MM-DD HH:mm:ss")||"")}},{title:"\u6ede\u7eb3\u91d1",width:"80px",sorter:!0,dataIndex:"late_fee"},{title:"\u8d27\u8f66\u7f16\u53f7",width:"80px",dataIndex:"car_code"},{title:"\u7ad9\u70b9",width:"80px",dataIndex:"site_name"},{title:"\u4e2d\u8f6c",width:"80px",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t}},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=g()(y.a.mark(function e(t,n){var r,o,i;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]}),Object(Q["b"])(M()(a),{company_id:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({sorter:"create_date|ascend"},1)},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;i.sendCustomerSearch,i.getCustomerSearch;o.validateFields(function(){var n=g()(y.a.mark(function n(o,i){var s;return y.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(Q["k"])(M()(a),i);case 4:i=n.sent,i.order_amount=-1,i.order_amount=-1,s=Object.assign({filter:i},e),r({type:"unsettlegoods/getOrderListAction",payload:v()({pageNo:t||c,pageSize:l},s)}),r({type:"unsettlegoods/getOrderStatisticAction",payload:v()({},s)}),a.standardTable.cleanSelectedKeys();case 11:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=g()(y.a.mark(function e(t,n,r){var o,i,c,l;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onSignOk=g()(y.a.mark(function e(){var t,n,r,o;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/signAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(h["a"].success("\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onSignCancel()):h["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onSign=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onSignCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({signModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=g()(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=a.state.selectedRows,n=Object(H["c"])(t),a.setState({accountStatistic:n,settleModalVisible:!0});case 3:case"end":return e.stop()}},e)})),a.onSettleCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.btnClicked=!1,a.onSettleOk=g()(y.a.mark(function e(){var t,n,r,o;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=9,t({type:"unsettle/settleOrderAction",payload:{order_id:r}});case 9:o=e.sent,0==o.code?(h["a"].success("\u6838\u5bf9\u6210\u529f\uff01"),a.onSettleCancel(),a.handleSearch()):h["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onCancelSign=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelSignCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelSignModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelSignOk=g()(y.a.mark(function e(){var t,n,r,o;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"unsettle/cancelSignAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(h["a"].success("\u53d6\u6d88\u7b7e\u5b57\u6210\u529f\uff01"),a.handleSearch(),a.onCancelSignCancel()):h["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=g()(y.a.mark(function e(){var t,n,r;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettlegoods/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(h["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):h["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=g()(y.a.mark(function e(){var t;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,!(t.length<=0)){e.next=4;break}return h["a"].info("\u8bf7\u9009\u62e9\u9700\u8981\u4e0b\u8f7d\u7684\u8ba2\u5355\u4fe1\u606f"),e.abrupt("return");case 4:Object(U["b"])({selectedRows:t,type:"pdf"});case 5:case"end":return e.stop()}},e)})),a.onDownloadCancel=g()(y.a.mark(function e(){return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=g()(y.a.mark(function e(){var t,n,r;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"unsettle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(h["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):h["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){["site_receipt"].includes(q["b"].role_value)||(a.setState({record:e}),a.onUpdateOrderModalShow())},a.onRowClick=function(e,t,a){},a.onRefTable=function(e){a.standardTable=e},a.tableFooter=function(){var e=a.props.unsettlegoods,t=e.total,n=e.totalOrderAmount,r=e.totalRealOrderAmount,o=e.totalTransAmount,i=e.totalInsurancefee,c=e.totalAdvancepayAmount,l=e.totalDeliverAmount,s=e.totalLatefee,d=e.totalBonusfee;return I.a.createElement("div",{className:Y.a.tableFooter},I.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",r||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",o||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",c||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",l||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",i||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u7968\u6570\uff1a",t||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",s||"0"),I.a.createElement("span",{className:Y.a.footerSplit},"\u5956\u91d1\uff1a",d||"0"))},a}return V()(t,e),C()(t,[{key:"componentDidMount",value:function(){var e=g()(y.a.mark(function e(){var t,a,n;return y.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,t({type:"company/getBranchCompanyList",payload:v()({},q["a"])});case 3:return e.sent,e.next=6,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 6:a=e.sent,Object(Q["c"])(this,{}),2==q["a"].company_type&&(Object(Q["b"])(this,{company_id:q["a"].company_id}),this.setState({currentCompany:q["a"]})),a&&a.length>0&&(n=a.filter(function(e){return 3==e.site_type||2==e.site_type}),n.length>0&&this.setState({currentShipSite:n[0]})),t({type:"common/initOrderListAction"});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=n.getCustomerList,o=n.sendCustomerList,i=t.company.branchCompanyList,c=t.site.entrunkSiteList,l=(this.state.currentShipSite,{}),p={};1!=q["a"].company_type&&(p.initialValue=q["a"].company_id||"");var h=1==q["a"].company_type;return I.a.createElement(F["a"],{onSubmit:this.handleSearch,layout:"inline"},I.a.createElement(X,m()({label:"\u5206\u516c\u53f8"},l),a("company_id",p)(I.a.createElement(D["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:h},(1==q["a"].company_type?i:[q["a"]]).map(function(e){return I.a.createElement(G,{key:e.company_id,value:e.company_id},e.company_name)})))),I.a.createElement(X,m()({label:"\u8d27\u8f66\u7f16\u53f7"},l),a("shipsite_id",{})(I.a.createElement(D["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(c||[]).map(function(e){return I.a.createElement(G,{key:e.site_id,value:e.site_id},e.site_name)}))),a("car_code",{})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"80px"}}))),I.a.createElement(X,m()({label:"\u6536\u8d27\u4eba\u59d3\u540d"},l),a("getcustomer_id")(I.a.createElement(d["a"],{size:"large",style:{width:"100%"},dataSource:r.map(function(e){var t=d["a"].Option;return I.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Q["g"])(e,t)},onChange:function(t){Object(Q["f"])(e,t)},allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),I.a.createElement(X,m()({label:"\u6536\u8d27\u4eba\u7535\u8bdd"},l),a("getcustomer_mobile",{})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),I.a.createElement(X,m()({label:"\u53d1\u8d27\u4eba\u59d3\u540d"},l),a("sendcustomer_id")(I.a.createElement(d["a"],{size:"large",style:{width:"100%"},dataSource:o.map(function(e){var t=d["a"].Option;return I.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Q["i"])(e,t)},onChange:function(t){Object(Q["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),I.a.createElement(X,m()({label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},l),a("sendcustomer_mobile",{})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),I.a.createElement(X,m()({label:"\u8fd0\u5355\u53f7"},l),a("order_code",{})(I.a.createElement(u["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"220px"}}))),I.a.createElement(F["a"].Item,m()({},l,{className:Y.a.tableListOperator}),I.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),I.a.createElement(s["a"],{onClick:this.onDownload},"\u4e0b\u8f7d")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.unsettlegoods,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.company.branchCompanyList,t.car),i=(o.carList,o.lastCar,t.loading),s=this.state,d=s.selectedRows,u=s.accountStatistic,p=s.current,m=s.pageSize,h=s.updateOrderModalVisible,f=s.settleModalVisible,y=s.signModalVisible,b=s.cancelSignModalVisible,g=s.downloadModalVisible,w=s.printModalVisible,v=s.record;return I.a.createElement("div",null,I.a.createElement(l["a"],{bordered:!1},I.a.createElement("div",{className:Y.a.tableList},I.a.createElement("div",{className:Y.a.tableListForm},this.renderForm()),I.a.createElement(B["a"],{onRef:this.onRefTable,selectedRows:d,loading:i,className:Y.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:m,current:p,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 1==e.sign_status?Y.a.signColor:""}})),this.tableFooter()),I.a.createElement(K["a"],{modalVisible:h,record:v,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.handleSearch}),I.a.createElement(c["a"],{title:"\u786e\u8ba4\u7ed3\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSettleOk,onCancel:this.onSettleCancel},I.a.createElement("p",null,"\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(d.length,"\uff0c\u7ed3\u7b97\u603b\u989d ").concat(u.totalAccount," ")),I.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u4e48\uff1f")),I.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onSignOk,onCancel:this.onSignCancel},I.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),I.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onCancelSignOk,onCancel:this.onCancelSignCancel},I.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u7b7e\u5b57\u4e48\uff1f")),I.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:w,onOk:this.onPrintOk,onCancel:this.onPrintCancel},I.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),I.a.createElement(c["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},I.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(R["PureComponent"]),o=i))||o)||o);t["default"]=W},rDVw:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c=a("bx4M"),l=(a("+L6B"),a("2/Rp")),s=(a("iQDF"),a("+eQT")),d=a("p0pE"),u=a.n(d),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=a("2Taf"),b=a.n(y),g=a("vZ4D"),w=a.n(g),v=a("l4Ni"),x=a.n(v),_=a("ujKo"),S=a.n(_),C=a("MhPg"),E=a.n(C),k=(a("OaEy"),a("2fM7")),O=(a("y8nQ"),a("Vl3Y")),A=a("q1tI"),L=a.n(A),M=a("MuoO"),T=a("wd/R"),V=a.n(T),D=(a("B797"),a("CkN6")),F=(a("82qg"),a("LTkr")),R=a.n(F),I=(a("S+eF"),a("7Qib")),N=a("XS0u"),z=O["a"].Item,P=k["a"].Option,H=(n=Object(M["connect"])(function(e){var t=e.customer,a=e.company,n=e.courier,r=e.site,o=e.search,i=e.receiver,c=e.loading;return{customer:t,company:a,courier:n,site:r,search:o,receiver:i,loading:c.models.rule}}),r=O["a"].create(),n(o=r((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=x()(this,(e=S()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{}},a.columns=[{title:"\u6536\u652f",dataIndex:"account_type",width:"80px",sorter:!0,render:function(e){return 0==e?"\u652f\u51fa":"\u6536\u5165"}},{title:"\u7c7b\u578b\u9879\u76ee",sorter:!0,dataIndex:"account_name",width:"150px"},{title:"\u539f\u56e0",sorter:!0,dataIndex:"account_reason",width:"100px"},{title:"\u91d1\u989d",sorter:!0,dataIndex:"account_amount",width:"80px",render:function(e,t){return 0==t.account_type?L.a.createElement("span",null,L.a.createElement("span",{className:R.a.minusType},"\u2014")," ",t.account_amount):L.a.createElement("span",null,L.a.createElement("span",{className:R.a.minusType})," ",t.account_amount)}},{title:"\u7528\u6237\u540d",dataIndex:"operator_name",width:"80px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"100px"},{title:"\u5206\u516c\u53f8",dataIndex:"company_name",width:"80px"},{title:"\u65e5\u671f",dataIndex:"account_date",width:"170px",render:function(e){return L.a.createElement("span",null,e&&V()(Number(e)).format("YYYY-MM-DD HH:mm:ss")||"")}}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=f()(m.a.mark(function e(){var t;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,e.next=3,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:N["a"].company_id}}});case 3:case"end":return e.stop()}},e)})),a.fetchOperatorList=function(){var e=f()(m.a.mark(function e(t){var n,r,o;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=a.state.currentSite,o={},o.company_id=N["a"].company_id,r&&r.site_id&&(o.site_id=r.site_id),e.next=7,n({type:"courier/getOperatorListAction",payload:{pageNo:1,pageSize:100,filter:o}});case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,a){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.account_date&&o.account_date.valueOf&&(o.account_date=["".concat(o.account_date.valueOf())]),o.company_id=N["a"].company_id,1==N["a"].company_type&&(o.site_id=N["c"].site_id);var i=Object.assign({filter:o},e);r({type:"search/getTodayAccountListAction",payload:u()({pageNo:t||c,pageSize:l},i)}),r({type:"search/getTodayAccountStatisticAction",payload:u()({},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.onRowDoubleClick=function(e,t,n){a.setState({record:e})},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.search,t=e.accountTotal,n=e.totalAccount,r=e.totalIncomeAccount,o=e.totalExpenseAccount;return L.a.createElement("div",{className:R.a.tableFooter},L.a.createElement("span",null,"\u603b\u989d\uff1a",n||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u6536\u5165\u603b\u989d\uff1a",r||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u652f\u51fa\u603b\u989d\uff1a",o||"0"),L.a.createElement("span",{className:R.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return E()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.props.dispatch,e.next=3,this.fetchCompanySiteList();case 3:return e.next=5,this.fetchOperatorList();case 5:this.getOrderList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.siteList,a.normalSiteList,e.courier.operatorList),r=void 0===n?[]:n,o={initialValue:N["a"].company_id||""};return L.a.createElement(O["a"],{onSubmit:this.handleSearch,layout:"inline"},2==N["a"].company_type&&L.a.createElement(z,{label:"\u5206\u516c\u53f8"},t("company_id",o)(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"200px"}},[N["a"]].map(function(e){return L.a.createElement(P,{key:e.company_id,value:e.company_id},e.company_name)})))),1==N["a"].company_type&&L.a.createElement(z,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:N["c"].site_id})(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"}},[N["c"]].map(function(e){return L.a.createElement(P,{key:e.site_id,value:e.site_id},e.site_name)})))),L.a.createElement(z,{label:"\u7ecf\u529e\u4eba"},t("operator_id",{})(L.a.createElement(k["a"],{placeholder:"\u5168\u90e8",style:{width:"150px"},allowClear:!0},r.map(function(e){return L.a.createElement(P,{key:e.user_id,value:e.user_id},e.user_name)})))),L.a.createElement(z,{label:"\u65e5\u671f"},t("account_date",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u65e5\u671f"}],initialValue:V()((new Date).getTime())})(L.a.createElement(s["a"],{placeholder:"\u5168\u90e8",locale:I["b"],format:"YYYY-MM-DD",style:{width:"100%"}}))),L.a.createElement(z,null,L.a.createElement(l["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.search,n=a.accounts,r=a.accountTotal,o=t.loading,i=this.state,l=i.selectedRows,s=i.current,d=i.pageSize;return L.a.createElement("div",null,L.a.createElement(c["a"],{bordered:!1},L.a.createElement("div",{className:R.a.tableList},L.a.createElement("div",{className:R.a.tableListForm},this.renderForm()),L.a.createElement(D["a"],{onRef:this.onRefTable,selectedRows:l,loading:o,className:R.a.dataTable,rowKey:"account_id",data:{list:n,pagination:{total:r,pageSize:d,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()))}}]),t}(A["PureComponent"]),o=i))||o)||o);t["default"]=H},rRaJ:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("d6i3"),m=a.n(p),h=a("1l/V"),f=a.n(h),y=(a("2qtc"),a("kLXV")),b=(a("14J3"),a("BMrR")),g=(a("jCWc"),a("kPKH")),w=a("jehZ"),v=a.n(w),x=(a("5NDa"),a("5rEg")),_=(a("+L6B"),a("2/Rp")),S=(a("O3gP"),a("lrIw")),C=a("2Taf"),E=a.n(C),k=a("vZ4D"),O=a.n(k),A=a("l4Ni"),L=a.n(A),M=a("ujKo"),T=a.n(M),V=a("MhPg"),D=a.n(V),F=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),I=(a("iQDF"),a("+eQT")),N=a("q1tI"),z=a.n(N),P=a("MuoO"),H=(a("wd/R"),a("CkN6")),B=a("9yR7"),K=a.n(B),j=a("XS0u"),Y=(I["a"].RangePicker,R["a"].Item),U=F["a"].Option,q=(n=R["a"].create(),n((o=function(e){function t(e){var a;return E()(this,t),a=L()(this,T()(t).call(this,e)),a.onAbnormalSelect=function(e,t){},a.onAddHandler=function(){var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.record,o=void 0===r?{}:r;n.validateFields(function(e,a){if(!e){var n={courier:a};o.courier_id&&(n.ids=[o.courier_id],a.courier_id=o.courier_id),t(n)}})},a.renderCustomerOption=function(e){var t=S["a"].Option;return z.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,text:e.expensetype},e.expensetype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return D()(t,e),O()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form;e.roleList;return z.a.createElement(y["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u63a5\u8d27\u4eba",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[z.a.createElement(_["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),z.a.createElement(_["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:K.a.modalForm},z.a.createElement(R["a"],null,z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(Y,v()({},this.formItemLayout,{label:"\u59d3\u540d"}),r.getFieldDecorator("courier_name",{initialValue:n.courier_name,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u59d3\u540d"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),z.a.createElement(b["a"],{gutter:{md:8,lg:24,xl:48}},z.a.createElement(g["a"],null,z.a.createElement(Y,v()({},this.formItemLayout,{label:"\u7535\u8bdd"}),r.getFieldDecorator("courier_mobile",{initialValue:n.courier_mobile,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7535\u8bdd"}]})(z.a.createElement(x["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(N["PureComponent"]),r=o))||r),Q=(i=Object(P["connect"])(function(e){var t=e.customer,a=e.courier,n=e.site,r=e.company,o=e.loading;return{customer:t,courier:a,site:n,company:r,loading:o.models.rule}}),c=R["a"].create(),i(l=c((s=function(e){function t(){var e,a;E()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=L()(this,(e=T()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},addModalVisible:!1},a.columns=[{title:"\u59d3\u540d",dataIndex:"courier_name",width:"100px"},{title:"\u7528\u6237\u7535\u8bdd",dataIndex:"courier_mobile",width:"150px"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchCompanySiteList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:j["a"].company_id}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=f()(m.a.mark(function e(t){var n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.companyList,r.form,a.fetchCompanySiteList(t),i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=f()(m.a.mark(function e(t,n){var r,o,i;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.siteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]});case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList()},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=a.props,n=t.dispatch,r=t.form,o=a.state,i=o.current,c=o.pageSize,l=o.currentSite;r.validateFields(function(t,r){if(!t){var o={company_id:j["a"].company_id};l&&l.site_id&&(o.site_id=l.site_id),n({type:"courier/getCourierListAction",payload:{pageNo:e||i,pageSize:c,type:"receiver",filter:o}}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=f()(m.a.mark(function e(t,n,r){var o,i,c,l;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=f()(m.a.mark(function e(t){var n,r,o,i,c,l,s;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.courier,r=void 0===n?{}:n,o=t.ids,i=a.props.dispatch,c=a.state.currentSite,l=void 0===c?{}:c,r.company_id||(r.company_id=j["a"].company_id),!r.site_id&&l.site_id&&(r.site_id=l.site_id,r.site_name=l.site_name),e.next=7,i({type:"courier/updateCourierAction",payload:{courier:r,ids:o,type:"receiver"}});case 7:s=e.sent,s&&0==s.code?(u["a"].success("\u6dfb\u52a0\u6210\u529f\uff01"),a.handleSearch(),a.onCancelModalClick()):u["a"].error(s&&s.msg||"\u6dfb\u52a0\u5931\u8d25");case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddClick=f()(m.a.mark(function e(){var t,n;return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.currentSite,n=void 0===t?{}:t,n.site_id){e.next=4;break}return u["a"].info("\u8bf7\u9009\u62e9\u7ad9\u70b9"),e.abrupt("return");case 4:a.setState({addModalVisible:!0,record:{}});case 5:case"end":return e.stop()}},e)})),a.onCancelModalClick=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onModalShow=function(){a.setState({addModalVisible:!0})},a.onModalCancel=function(){a.setState({addModalVisible:!1})},a.onSiteChange=function(e){e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onModalShow()},a}return D()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=f()(m.a.mark(function e(){return m.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.fetchCompanySiteList();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"render",value:function(){var e=this,t=this.props,a=t.site.siteList,n=t.courier,r=n.receiverList,o=n.receiverTotal,i=t.loading,c=this.state,l=c.selectedRows,s=c.current,u=c.pageSize,p=c.addModalVisible,m=c.record,h=(c.currentCompany,!0);return["site_searchuser"].indexOf(j["b"].role_value)>=0&&(h=!1),z.a.createElement("div",null,z.a.createElement(d["a"],{bordered:!1},z.a.createElement("div",{className:K.a.tableList},z.a.createElement("div",{className:K.a.tableListOperator},z.a.createElement(R["a"],{onSubmit:this.handleSearch,layout:"inline"},z.a.createElement(Y,{label:"\u7ad9\u70b9"},z.a.createElement(F["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,onChange:this.onSiteChange,style:{width:"150px"},allowClear:!0},a.map(function(e){return z.a.createElement(U,{key:e.site_id,value:e.site_id},e.site_name)}))),z.a.createElement(Y,null,z.a.createElement(_["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")),z.a.createElement(Y,null,h&&z.a.createElement(_["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddClick(!0)}},"\u6dfb\u52a0")))),z.a.createElement(H["a"],{onRef:this.onRefTable,selectedRows:l,loading:i,className:K.a.dataTable,rowKey:"courier_id",data:{list:r,pagination:{total:o,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick}))),z.a.createElement(q,{modalVisible:p,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelModalClick,record:m,selectedRows:l}))}}]),t}(N["PureComponent"]),l=s))||l)||l);t["default"]=Q},rZM1:function(e,t,a){e.exports={standardTable:"antd-pro-components-standard-table-index-standardTable",tableAlert:"antd-pro-components-standard-table-index-tableAlert"}},s4P5:function(e,t,a){e.exports={modalForm:"antd-pro-components-edit-order-form-index-modalForm"}},sOv7:function(e,t,a){e.exports={"antd-pro-components-global-header-index-header":"antd-pro-pages-customer-customer-antd-pro-components-global-header-index-header",minusType:"antd-pro-pages-customer-customer-minusType",tableList:"antd-pro-pages-customer-customer-tableList",tableListOperator:"antd-pro-pages-customer-customer-tableListOperator",tableFooter:"antd-pro-pages-customer-customer-tableFooter",footerSplit:"antd-pro-pages-customer-customer-footerSplit",signColor:"antd-pro-pages-customer-customer-signColor",shipColor:"antd-pro-pages-customer-customer-shipColor",editOrderColor:"antd-pro-pages-customer-customer-editOrderColor",settleColor:"antd-pro-pages-customer-customer-settleColor",payColor:"antd-pro-pages-customer-customer-payColor",selectedColor:"antd-pro-pages-customer-customer-selectedColor",tableDetail:"antd-pro-pages-customer-customer-tableDetail",modalForm:"antd-pro-pages-customer-customer-modalForm",entrunkForm:"antd-pro-pages-customer-customer-entrunkForm",formItemFloat:"antd-pro-pages-customer-customer-formItemFloat",tableListForm:"antd-pro-pages-customer-customer-tableListForm",submitButtons:"antd-pro-pages-customer-customer-submitButtons",dataTable:"antd-pro-pages-customer-customer-dataTable","ant-form-item":"antd-pro-pages-customer-customer-ant-form-item","ant-select":"antd-pro-pages-customer-customer-ant-select",formItemNoBreak:"antd-pro-pages-customer-customer-formItemNoBreak"}},tbSg:function(e,t,a){e.exports={pageHeader:"antd-pro-components-page-header-index-pageHeader",wide:"antd-pro-components-page-header-index-wide",detail:"antd-pro-components-page-header-index-detail",row:"antd-pro-components-page-header-index-row",breadcrumb:"antd-pro-components-page-header-index-breadcrumb",tabs:"antd-pro-components-page-header-index-tabs",logo:"antd-pro-components-page-header-index-logo",title:"antd-pro-components-page-header-index-title",action:"antd-pro-components-page-header-index-action",content:"antd-pro-components-page-header-index-content",extraContent:"antd-pro-components-page-header-index-extraContent",main:"antd-pro-components-page-header-index-main"}},y2NC:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("miYZ"),a("tsqr")),p=a("p0pE"),m=a.n(p),h=(a("2qtc"),a("kLXV")),f=(a("14J3"),a("BMrR")),y=(a("jCWc"),a("kPKH")),b=a("jehZ"),g=a.n(b),w=(a("5NDa"),a("5rEg")),v=(a("+L6B"),a("2/Rp")),x=(a("O3gP"),a("lrIw")),_=a("d6i3"),S=a.n(_),C=a("1l/V"),E=a.n(C),k=a("2Taf"),O=a.n(k),A=a("vZ4D"),L=a.n(A),M=a("l4Ni"),T=a.n(M),V=a("ujKo"),D=a.n(V),F=a("MhPg"),R=a.n(F),I=(a("OaEy"),a("2fM7")),N=(a("y8nQ"),a("Vl3Y")),z=(a("iQDF"),a("+eQT")),P=a("q1tI"),H=a.n(P),B=a("MuoO"),K=a("wd/R"),j=a.n(K),Y=a("CkN6"),U=a("KbBV"),q=a.n(U),Q=a("7Qib"),X=a("XS0u"),G=z["a"].RangePicker,W=N["a"].Item,Z=I["a"].Option,J=(n=N["a"].create(),n((o=function(e){function t(e){var a;return O()(this,t),a=T()(this,D()(t).call(this,e)),a.onAbnormalSelect=function(e,t){a.setState({abnormal_type_id:t.props.abnormal_type_id,abnormal_type:t.props.text})},a.ButtonClicked=!1,a.onAddHandler=function(){if(!a.ButtonClicked){a.ButtonClicked=!0,setTimeout(function(){a.ButtonClicked=!1},2e3);var e=a.props,t=e.addFormDataHandle,n=e.form,r=e.expenseTypes,o=void 0===r?[]:r,i=e.record;n.validateFields(function(){var e=E()(S.a.mark(function e(a,r){var c,l;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=2;break}return e.abrupt("return");case 2:return c=!0,l="",o.forEach(function(e){e.expensetype_id==r["expensetype_id"]&&(c=!1,l=e.expensetype)}),e.next=7,t({expense_id:i.expense_id||0,expense_money:Number(r.expense_money),expensetype_id:c?"":r.expensetype_id,expensetype:c?r.expensetype_id:l,expense_reason:r.expense_reason,remark:r.remark});case 7:i.expense_id||n.setFieldsValue({expense_money:"",expense_reason:"",remark:""});case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())}},a.renderCustomerOption=function(e){var t=x["a"].Option;return H.a.createElement(t,{key:e.expensetype_id,expensetype_id:e.expensetype_id,value:"".concat(e.expensetype_id),text:e.expensetype},e.expensetype)},a.state={abnormal_type_id:"",abnormal_type:""},a.formItemLayout={labelCol:{xs:{span:18},sm:{span:5}},wrapperCol:{xs:{span:18},sm:{span:8}}},a}return R()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.onCancelHandler,n=e.record,r=e.form,o=e.expenseTypes,i=void 0===o?[]:o;return H.a.createElement(h["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u652f\u51fa",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[H.a.createElement(v["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),H.a.createElement(v["a"],{key:"btn-save",type:"primary",onClick:this.onAddHandler},"\u4fdd \u5b58")],width:800,className:q.a.modalForm},H.a.createElement(N["a"],null,H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u652f\u51fa\u91d1\u989d"}),r.getFieldDecorator("expense_money",{initialValue:n.expense_money,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u652f\u51fa\u91d1\u989d"}]})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u652f\u51fa\u7c7b\u578b"}),r.getFieldDecorator("expensetype_id",{initialValue:"".concat(n.expensetype_id||""),rules:[{required:!0,message:"\u8bf7\u586b\u5199\u652f\u51fa\u7c7b\u578b"}]})(H.a.createElement(x["a"],{size:"large",style:{width:"280px"},dataSource:i.map(this.renderCustomerOption),placeholder:"\u8bf7\u8f93\u5165",optionLabelProp:"text",allowClear:!0}," "))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,g()({},this.formItemLayout,{label:"\u652f\u51fa\u539f\u56e0"}),r.getFieldDecorator("expense_reason",{initialValue:n.expense_reason})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),H.a.createElement(f["a"],{gutter:{md:8,lg:24,xl:48}},H.a.createElement(y["a"],null,H.a.createElement(W,{labelCol:{span:3,offset:2},label:"\u5907\u6ce8"},r.getFieldDecorator("remark",{initialValue:n.remark})(H.a.createElement(w["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}})))))))}}]),t}(P["PureComponent"]),r=o))||r),$=(i=Object(B["connect"])(function(e){var t=e.customer,a=e.company,n=e.expense,r=e.site,o=e.car,i=e.receiver,c=e.loading;return{customer:t,company:a,expense:n,site:r,car:o,receiver:i,loading:c.models.rule}}),c=N["a"].create(),i(l=c((s=function(e){function t(){var e,a;O()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=T()(this,(e=D()(t)).call.apply(e,[this].concat(r))),a.state={selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},currentCompany:{},currentSite:{},settleModalVisible:!1,addExpenseModalVisible:!1,signModalVisible:!1,cancelSignModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1},a.columns=[{title:"\u652f\u51fa\u65e5\u671f",dataIndex:"expense_date",width:"170px",sorter:!0,render:function(e){return H.a.createElement("span",null,e&&j()(Number(e)).format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u652f\u51fa\u91d1\u989d",dataIndex:"expense_money",sorter:!0,width:"80px"},{title:"\u652f\u51fa\u7c7b\u578b",dataIndex:"expensetype",width:"140px",sorter:!0},{title:"\u652f\u51fa\u539f\u56e0",dataIndex:"expense_reason",width:"120px",sorter:!0},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u5206\u516c\u53f8",dataIndex:"company_name",width:"80px",sorter:!0},{title:"\u64cd\u4f5c\u7528\u6237",dataIndex:"operator_name",width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.fetchExpenseTypeList=E()(S.a.mark(function e(){var t,n,r;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n={},n.company_id=X["a"].company_id||-1,1==X["a"].company_type&&(n.site_id=X["c"].site_id),e.next=6,t({type:"expense/getExpenseTypesAction",payload:n});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e)})),a.fetchCompanySiteList=function(){var e=E()(S.a.mark(function e(t){var n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.fetchGetCustomerList=function(){var e=E()(S.a.mark(function e(t){var n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.props.dispatch,n({type:"customer/getCustomerListAction",payload:{pageNo:1,pageSize:100,filter:{company_id:t}}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onCompanySelect=function(){var e=E()(S.a.mark(function e(t,n){var r,o,i,c;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,o=r.company.branchCompanyList,i=r.form,a.fetchCompanySiteList(t),a.fetchExpenseTypeList({companyId:t}),i.setFieldsValue({expense_type_id:""}),c=o.filter(function(e){if(e.company_id==t)return e}),c.length>0&&a.setState({currentCompany:c[0]});case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.onSiteSelect=function(){var e=E()(S.a.mark(function e(t,n){var r,o,i;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props.site.normalSiteList,o=void 0===r?[]:r,i=o.filter(function(e){if(e.site_id==t)return e}),i.length>0&&a.setState({currentSite:i[0]}),a.fetchExpenseTypeList({siteId:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.getOrderList({},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;o.validateFields(function(n,o){if(!n){o.expense_date&&o.expense_date.length>0&&(o.expense_date=o.expense_date.map(function(e){return"".concat(e.valueOf())})),o.company_id=X["a"].company_id,o.expensetype_id||delete o.expensetype_id,e.sorter||(e.sorter="expense_date|desc");var i=Object.assign({filter:o},e);r({type:"expense/getExpensesAction",payload:m()({pageNo:t||c,pageSize:l},i)}),a.standardTable.cleanSelectedKeys()}})},a.handleStandardTableChange=function(){var e=E()(S.a.mark(function e(t,n,r){var o,i,c,l;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.addFormDataHandle=function(){var e=E()(S.a.mark(function e(t){var n,r,o;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=a.props.dispatch,r=m()({},t,{company_id:X["a"].company_id,company_name:X["a"].company_name}),X["c"].site_id&&Object.assign(r,{site_id:X["c"].site_id,site_name:X["c"].site_name}),e.next=5,n({type:"expense/addExpenseAction",payload:r});case 5:o=e.sent,o&&0==o.code?(u["a"].success(r.expense_id?"\u7f16\u8f91\u6210\u529f\uff01":"\u6dfb\u52a0\u6210\u529f\uff01"),r.expense_id&&a.onCancelExpenseClick(),a.handleSearch(),a.fetchExpenseTypeList()):u["a"].error(o&&o.msg||"\u6dfb\u52a0\u5931\u8d25");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onAddExpenseClick=E()(S.a.mark(function e(){var t,n;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.currentSite,n=void 0===t?{}:t,1!=X["a"].company_id||n.site_id){e.next=4;break}return h["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u7ad9\u70b9"}),e.abrupt("return");case 4:if(X["a"].company_id){e.next=7;break}return h["a"].info({content:"\u8bf7\u5148\u9009\u62e9\u516c\u53f8"}),e.abrupt("return");case 7:a.setState({addExpenseModalVisible:!0,record:{}});case 8:case"end":return e.stop()}},e)})),a.onCancelExpenseClick=E()(S.a.mark(function e(){return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({addExpenseModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onExpenseModalShow=function(){a.setState({addExpenseModalVisible:!0})},a.onExpenseModalCancel=function(){a.setState({addExpenseModalVisible:!1})},a.onSiteChange=function(e){console.log("site",e),e||a.setState({currentSite:{}})},a.onCompanyChange=function(e){console.log("company",e),e||a.setState({currentCompany:{}})},a.onRowClick=function(e,t,a){},a.onRowDoubleClick=function(e,t,n){var r=j()(Number(e.expense_date)),o=j()(Number((new Date).getTime())),i=o.diff(r,"hours");["site_pay","company_account"].includes(X["b"].role_value)&&(i>=24?u["a"].error("\u8d85\u8fc724\u5c0f\u65f6\u8bb0\u5f55\u4e0d\u53ef\u7f16\u8f91"):(a.setState({record:e}),a.onExpenseModalShow()))},a.tableFooter=function(){var e=a.props.expense,t=e.total,n=e.totalExpense;return H.a.createElement("div",{className:q.a.tableFooter},H.a.createElement("span",null,"\u652f\u51fa\u603b\u989d\uff1a",n||"0"),H.a.createElement("span",{className:q.a.footerSplit},"\u7968\u6570\uff1a",t||"0"))},a}return R()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=E()(S.a.mark(function e(){var t;return S.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,this.fetchCompanySiteList(X["a"].company_id);case 3:return e.next=5,this.fetchExpenseTypeList({});case 5:return e.next=7,t({type:"expense/getExpenseDetailsAction",payload:{}});case 7:this.getOrderList();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.site,n=(a.entrunkSiteList,a.normalSiteList,e.company.branchCompanyList),r=void 0===n?[]:n,o=e.expense.expenseTypes,i=void 0===o?[]:o,c={};return r.length>0&&(c.initialValue=r[0].company_id||""),H.a.createElement(N["a"],{onSubmit:this.handleSearch,layout:"inline"},1==X["a"].company_type&&H.a.createElement(W,{label:"\u7ad9\u70b9"},t("site_id",{initialValue:X["c"].site_id})(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",onSelect:this.onSiteSelect,onChange:this.onSiteChange,style:{width:"100px"}},[X["c"]].map(function(e){return H.a.createElement(Z,{key:e.site_id,value:e.site_id},e.site_name)})))),H.a.createElement(W,{label:"\u652f\u51fa\u65e5\u671f"},t("expense_date",{initialValue:[j()(new Date,"YYYY-MM-DD"),j()(new Date,"YYYY-MM-DD")]})(H.a.createElement(G,{locale:Q["b"],style:{width:"250px"}}))),H.a.createElement(W,{label:"\u652f\u51fa\u7c7b\u578b"},t("expensetype_id")(H.a.createElement(I["a"],{placeholder:"\u5168\u90e8",style:{width:"100px"},allowClear:!0},i.map(function(e){return H.a.createElement(Z,{key:e.expensetype_id,value:e.expensetype_id},e.expensetype)})))),H.a.createElement(W,null,H.a.createElement(v["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.expense,n=a.expenseList,r=a.total,o=a.expenseTypes,i=(a.totalExpense,t.loading),c=this.state,l=c.selectedRows,s=c.current,u=void 0===s?1:s,p=c.pageSize,m=c.addExpenseModalVisible,f=c.downloadModalVisible,y=c.printModalVisible,b=c.record,g=!0;return["site_searchuser","site_admin"].indexOf(X["b"].role_value)>=0&&(g=!1),H.a.createElement("div",null,H.a.createElement(d["a"],{bordered:!1},H.a.createElement("div",{className:q.a.tableList},H.a.createElement("div",{className:q.a.tableListForm},this.renderForm()),H.a.createElement("div",{className:q.a.tableListOperator},g&&H.a.createElement(v["a"],{icon:"plus",type:"primary",onClick:function(){return e.onAddExpenseClick(!0)}},"\u6dfb\u52a0")),H.a.createElement(Y["a"],{onRef:this.onRefTable,selectedRows:l,loading:i,className:q.a.dataTable,rowKey:"expense_id",data:{list:n,pagination:{total:r,pageSize:p,current:u,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick})),this.tableFooter()),H.a.createElement(J,{modalVisible:m,addFormDataHandle:this.addFormDataHandle,onCancelHandler:this.onCancelExpenseClick,expenseTypes:o,record:b,selectedRows:l}),H.a.createElement(h["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onPrintOk,onCancel:this.onPrintCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),H.a.createElement(h["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},H.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(P["PureComponent"]),l=s))||l)||l);t["default"]=$},zHco:function(e,t,a){"use strict";var n=a("jehZ"),r=a.n(n),o=a("Y/ft"),i=a.n(o),c=a("q1tI"),l=a.n(c),s=a("LLXN"),d=a("wY1l"),u=a.n(d),p=(a("cWXX"),a("/ezw")),m=a("2Taf"),h=a.n(m),f=a("vZ4D"),y=a.n(f),b=a("l4Ni"),g=a.n(b),w=a("ujKo"),v=a.n(w),x=a("MhPg"),_=a.n(x),S=(a("Znn+"),a("ZTPi")),C=a("TSYQ"),E=a.n(C),k=a("tbSg"),O=a.n(k),A=(a("sPJy"),a("bE4q")),L=a("eHn4"),M=a.n(L),T=a("bALw"),V=a.n(T),D=a("S/9j"),F=function(e,t){var a=e[t];return a||Object.keys(e).forEach(function(n){V()(n).test(t)&&(a=e[n])}),a||{}},R=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(r))),a.state={breadcrumb:null},a.getBreadcrumbDom=function(){var e=a.conversionBreadcrumbList();a.setState({breadcrumb:e})},a.getBreadcrumbProps=function(){var e=a.props,t=e.routes,n=e.params,r=e.location,o=e.breadcrumbNameMap;return{routes:t,params:n,routerLocation:r,breadcrumbNameMap:o}},a.conversionFromProps=function(){var e=a.props,t=e.breadcrumbList,n=e.breadcrumbSeparator,r=e.itemRender,o=e.linkElement,i=void 0===o?"a":o;return l.a.createElement(A["a"],{className:O.a.breadcrumb,separator:n},t.map(function(e){var t=r?r(e):e.title;return l.a.createElement(A["a"].Item,{key:e.title},e.href?Object(c["createElement"])(i,M()({},"a"===i?"href":"to",e.href),t):t)}))},a.conversionFromLocation=function(e,t){var n=a.props,r=n.breadcrumbSeparator,o=n.home,i=n.itemRender,s=n.linkElement,d=void 0===s?"a":s,u=Object(D["a"])(e.pathname),p=u.map(function(e,a){var n=F(t,e);if(n.inherited)return null;var r=a!==u.length-1&&n.component,o=i?i(n):n.name;return n.name&&!n.hideInBreadcrumb?l.a.createElement(A["a"].Item,{key:e},Object(c["createElement"])(r?d:"span",M()({},"a"===d?"href":"to",e),o)):null});return p.unshift(l.a.createElement(A["a"].Item,{key:"home"},Object(c["createElement"])(d,M()({},"a"===d?"href":"to","/"),o||"Home"))),l.a.createElement(A["a"],{className:O.a.breadcrumb,separator:r},p)},a.conversionBreadcrumbList=function(){var e=a.props,t=e.breadcrumbList,n=e.breadcrumbSeparator,r=a.getBreadcrumbProps(),o=r.routes,i=r.params,c=r.routerLocation,s=r.breadcrumbNameMap;return t&&t.length?a.conversionFromProps():o&&i?l.a.createElement(A["a"],{className:O.a.breadcrumb,routes:o.filter(function(e){return e.breadcrumbName}),params:i,itemRender:a.itemRender,separator:n}):c&&c.pathname?a.conversionFromLocation(c,s):null},a.itemRender=function(e,t,n,r){var o=a.props.linkElement,i=void 0===o?"a":o,s=n.indexOf(e)===n.length-1;return s||!e.component?l.a.createElement("span",null,e.breadcrumbName):Object(c["createElement"])(i,{href:r.join("/")||"/",to:r.join("/")||"/"},e.breadcrumbName)},a}return _()(t,e),y()(t,[{key:"componentDidMount",value:function(){this.getBreadcrumbDom()}},{key:"componentDidUpdate",value:function(e){var t=this.props.location;if(t&&e.location){var a=e.location.pathname;a!==t.pathname&&this.getBreadcrumbDom()}}},{key:"render",value:function(){var e=this.state.breadcrumb;return e}}]),t}(c["PureComponent"]),I=S["a"].TabPane,N=function(e){function t(){var e,a;h()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=g()(this,(e=v()(t)).call.apply(e,[this].concat(r))),a.onChange=function(e){var t=a.props.onTabChange;t&&t(e)},a}return _()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.logo,n=e.action,o=e.content,i=e.extraContent,c=e.tabList,s=e.className,d=e.tabActiveKey,u=e.tabDefaultActiveKey,m=e.tabBarExtraContent,h=e.loading,f=void 0!==h&&h,y=e.wide,b=void 0!==y&&y,g=e.hiddenBreadcrumb,w=void 0!==g&&g,v=E()(O.a.pageHeader,s),x={};return void 0!==u&&(x.defaultActiveKey=u),void 0!==d&&(x.activeKey=d),l.a.createElement("div",{className:v},l.a.createElement("div",{className:b?O.a.wide:""},l.a.createElement(p["a"],{loading:f,title:!1,active:!0,paragraph:{rows:3},avatar:{size:"large",shape:"circle"}},w?null:l.a.createElement(R,this.props),l.a.createElement("div",{className:O.a.detail},a&&l.a.createElement("div",{className:O.a.logo},a),l.a.createElement("div",{className:O.a.main},l.a.createElement("div",{className:O.a.row},t&&l.a.createElement("h1",{className:O.a.title},t),n&&l.a.createElement("div",{className:O.a.action},n)),l.a.createElement("div",{className:O.a.row},o&&l.a.createElement("div",{className:O.a.content},o),i&&l.a.createElement("div",{className:O.a.extraContent},i)))),c&&c.length?l.a.createElement(S["a"],r()({className:O.a.tabs},x,{onChange:this.onChange,tabBarExtraContent:m}),c.map(function(e){return l.a.createElement(I,{tab:e.tab,key:e.key})})):null)))}}]),t}(c["PureComponent"]),z=a("MuoO"),P=a("lh+i"),H=a.n(P),B=function(e){function t(){return h()(this,t),g()(this,v()(t).apply(this,arguments))}return _()(t,e),y()(t,[{key:"render",value:function(){var e=this.props,t=e.contentWidth,a=e.children,n="".concat(H.a.main);return"Fixed"===t&&(n="".concat(H.a.main," ").concat(H.a.wide)),l.a.createElement("div",{className:n},a)}}]),t}(c["PureComponent"]),K=Object(z["connect"])(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(B),j=a("Dnn4"),Y=a.n(j),U=a("R1Dz"),q=function(e){var t=e.children,a=e.contentWidth,n=e.wrapperClassName,o=e.top,c=i()(e,["children","contentWidth","wrapperClassName","top"]);return l.a.createElement("div",{style:{margin:"-24px -24px 0"},className:n},o,l.a.createElement(U["a"].Consumer,null,function(e){return l.a.createElement(N,r()({wide:"Fixed"===a,home:l.a.createElement(s["FormattedMessage"],{id:"menu.home",defaultMessage:"Home"})},e,{key:"pageheader"},c,{linkElement:u.a,itemRender:function(e){return e.locale?l.a.createElement(s["FormattedMessage"],{id:e.locale,defaultMessage:e.title}):e.title}}))}),t?l.a.createElement("div",{className:Y.a.content},l.a.createElement(K,null,t)):null)};Object(z["connect"])(function(e){var t=e.setting;return{contentWidth:t.contentWidth}})(q)},zzGq:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,o,i,c,l,s,d=a("bx4M"),u=(a("O3gP"),a("lrIw")),p=(a("miYZ"),a("tsqr")),m=a("d6i3"),h=a.n(m),f=a("1l/V"),y=a.n(f),b=a("eHn4"),g=a.n(b),w=a("p0pE"),v=a.n(w),x=a("rlhR"),_=a.n(x),S=(a("2qtc"),a("kLXV")),C=(a("5NDa"),a("5rEg")),E=(a("14J3"),a("BMrR")),k=(a("jCWc"),a("kPKH")),O=(a("+L6B"),a("2/Rp")),A=a("2Taf"),L=a.n(A),M=a("vZ4D"),T=a.n(M),V=a("l4Ni"),D=a.n(V),F=a("ujKo"),R=a.n(F),I=a("MhPg"),N=a.n(I),z=(a("OaEy"),a("2fM7")),P=(a("y8nQ"),a("Vl3Y")),H=a("q1tI"),B=a.n(H),K=a("MuoO"),j=a("wd/R"),Y=a.n(j),U=a("B797"),q=a("CkN6"),Q=a("82qg"),X=a("SLv7"),G=a.n(X),W=(a("S+eF"),a("XS0u")),Z=a("80Er"),J=P["a"].Item,$=z["a"].Option,ee=(n=P["a"].create(),n((o=function(e){function t(e){var a;return L()(this,t),a=D()(this,R()(t).call(this,e)),a.onAgencyFeeSelect=function(e,t){a.setState({agencyFee:parseFloat(e)}),console.log(e),console.log(a.state)},a.onDownAccountHandler=function(){var e=a.props,t=e.downAccountHandle,n=e.form,r=a.state.agencyFee;n.validateFields(function(e,a){console.log(a),e||t({rate:r,bank_account:a.bank_account})})},a.state={agencyFee:0},a}return N()(t,e),T()(t,[{key:"render",value:function(){var e=this.props,t=e.modalVisible,a=e.downCancel,n=e.selectedRows,r=e.form,o=Object(U["d"])(n),i=n.length>0?n[0]:{},c=this.state.agencyFee;return B.a.createElement(S["a"],{destroyOnClose:!0,title:"\u4e0b\u8d26",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:t,onCancel:function(){return a()},footer:[B.a.createElement(O["a"],{key:"btn-cancel",onClick:function(){return a()}},"\u53d6 \u6d88"),B.a.createElement(O["a"],{key:"btn-save",type:"primary",onClick:this.onDownAccountHandler},"\u4fdd \u5b58")],width:800,className:G.a.modalForm},B.a.createElement(P["a"],null,B.a.createElement(E["a"],{gutter:{md:8,lg:24,xl:48}},B.a.createElement(k["a"],null,B.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u6761\u6570"},n.length))),B.a.createElement(E["a"],{gutter:{md:8,lg:24,xl:48}},B.a.createElement(k["a"],null,B.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u4e0b\u8d26\u603b\u91d1\u989d"},o.totalActualGoodsFund||"0"," - \u4ee3\u529e\u8d39 *",B.a.createElement(z["a"],{placeholder:"\u5168\u90e8",defaultValue:"0",onSelect:this.onAgencyFeeSelect,style:{width:"80px"}},B.a.createElement($,{value:"0"},"0\u2030"),B.a.createElement($,{value:"1"},"1\u2030"),B.a.createElement($,{value:"2"},"2\u2030"),B.a.createElement($,{value:"3"},"3\u2030"),B.a.createElement($,{value:"4"},"4\u2030"),B.a.createElement($,{value:"5"},"5\u2030")),o.totalTransFunds?B.a.createElement("span",null," `- (\u8fd0\u8d39) $",o.totalTransFunds,"`"):B.a.createElement("span",null),"="," ",o.totalActualGoodsFund-Math.ceil(o.totalActualGoodsFund*c/1e3)-o.totalTransFunds||0))),B.a.createElement(E["a"],{gutter:{md:8,lg:24,xl:48}},B.a.createElement(k["a"],null,B.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u6237\u4e3b"},i.getcustomer_name||"")),B.a.createElement(k["a"],null,B.a.createElement(J,{labelCol:{span:3,offset:2},label:"\u8d26\u6237"},r.getFieldDecorator("bank_account",{initialValue:i.bank_account})(B.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"280px"}}))))),B.a.createElement(E["a"],{gutter:{md:8,lg:24,xl:48}},B.a.createElement(k["a"],null,B.a.createElement(J,{labelCol:{span:3,offset:2},className:G.a.tableDetail,label:"\u660e\u7ec6"},B.a.createElement("table",null,B.a.createElement("thead",null,B.a.createElement("tr",null,B.a.createElement("th",null,"\u8fd0\u5355\u53f7"),B.a.createElement("th",null,"\u5b9e\u6536\u8d27\u6b3e"),B.a.createElement("th",null,"\u5e94\u6536\u8d27\u6b3e"))),B.a.createElement("tbody",null,n.map(function(e){return B.a.createElement("tr",null,B.a.createElement("td",null,e.order_code),B.a.createElement("td",null,e.order_real),B.a.createElement("td",null,e.order_amount))}))))))))}}]),t}(H["PureComponent"]),r=o))||r),te=(i=Object(K["connect"])(function(e){var t=e.common,a=e.customer,n=e.company,r=e.settle,o=e.site,i=e.car,c=e.receiver,l=e.loading;return{common:t,customer:a,company:n,settle:r,site:o,car:i,receiver:c,loading:l.models.rule}}),c=P["a"].create(),i(l=c((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return a=D()(this,(e=R()(t)).call.apply(e,[this].concat(r))),a.state=v()({selectedRows:[],accountStatistic:{},formValues:{},current:1,pageSize:20,record:{},updateOrderModalVisible:!1,settleModalVisible:!1,downModalVisible:!1,signModalVisible:!1,cancelDownAccountModalVisible:!1,downloadModalVisible:!1,printModalVisible:!1,currentCompany:{},currentShipSite:{}},Z["a"]),a.columns=[{title:"\u8d27\u5355\u53f7",dataIndex:"order_code",sorter:!0,align:"right",render:function(e){return"".concat(e)},needTotal:!0,width:"60px"},{title:"\u53d1\u8d27\u5ba2\u6237",dataIndex:"sendcustomer_name",width:"80px",sorter:!0},g()({title:"\u6536\u83b7\u5ba2\u6237",dataIndex:"getcustomer_name",sorter:!0,width:"80px"},"sorter",!0),{title:"\u5e94\u6536\u8d27\u6b3e",dataIndex:"order_amount",width:"80px",sorter:!0},{title:"\u5b9e\u6536\u8d27\u6b3e",dataIndex:"order_real",width:"80px",sorter:!0},{title:"\u6298\u540e\u8fd0\u8d39",dataIndex:"trans_discount",width:"80px"},{title:"\u8fd0\u8d39\u65b9\u5f0f",dataIndex:"trans_type",sorter:!0,width:"80px",render:function(e){var t="";return t=1===e?"\u73b0\u4ed8":2===e?"\u56de\u4ed8":"\u63d0\u4ed8",t}},{title:"\u57ab\u4ed8",dataIndex:"order_advancepay_amount",width:"80px"},{title:"\u9001\u8d27\u8d39",dataIndex:"deliver_amount",width:"80px",sorter:!0},{title:"\u4fdd\u4ef7\u8d39",dataIndex:"insurance_fee",width:"80px",sorter:!0},{title:"\u8d27\u7269\u540d\u79f0",dataIndex:"order_name",width:"150px"},{title:"\u5f55\u7968\u65f6\u95f4",dataIndex:"create_date",render:function(e){return B.a.createElement("span",null,e&&Y()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ed3\u7b97\u65f6\u95f4",dataIndex:"settle_date",render:function(e){return B.a.createElement("span",null,e&&Y()(e).format("YYYY-MM-DD HH:mm:ss")||"")},width:"170px"},{title:"\u7ed3\u7b97\u4eba",dataIndex:"settle_user_name",width:"80px"},{title:"\u7ad9\u70b9",dataIndex:"site_name",width:"80px"},{title:"\u4e2d\u8f6c",dataIndex:"transfer_type",render:function(e){var t="";return 1==e?t="\u8f6c\u51fa":2==e&&(t="\u8f6c\u5165"),t},width:"80px"},{title:"\u5907\u6ce8",width:"150px",dataIndex:"remark"}],a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"rule/fetch",payload:{}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.onCompanySelect=function(){var e=y()(h.a.mark(function e(t,n){var r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=a.props,r.dispatch,o=r.company.branchCompanyList,r.car.lastCar,i=o.filter(function(e){if(e.company_id==t)return e}),i.length>0&&a.setState({currentCompany:i[0]}),Object(Z["b"])(_()(a),{company_id:t});case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleSearch=function(e){e&&e.preventDefault(),a.setState({current:1}),a.getOrderList({sorter:"create_date|desc"},1)},a.onRefTable=function(e){a.standardTable=e},a.getOrderList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,r=n.dispatch,o=n.form,i=a.state,c=i.current,l=i.pageSize;i.sendCustomerSearch,i.getCustomerSearch;o.validateFields(function(){var n=y()(h.a.mark(function n(o,i){var s;return h.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(Z["k"])(_()(a),i);case 4:i=n.sent,s=Object.assign({filter:i},e),r({type:"settle/getOrderListAction",payload:v()({pageNo:t||c,pageSize:l},s)}),r({type:"settle/getOrderStatisticAction",payload:v()({},s)}),a.standardTable.cleanSelectedKeys();case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},a.handleStandardTableChange=function(){var e=y()(h.a.mark(function e(t,n,r){var o,i,c,l;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a.props.dispatch,o=a.state,o.formValues,i=o.pageSize,c={},l=1,r.field&&(c={sorter:"".concat(r.field,"|").concat(r.order)}),!t||t.pageSize==i){e.next=11;break}return l=1,e.next=9,a.setState({pageSize:t.pageSize});case 9:e.next=12;break;case 11:t&&t.current&&(l=t.current);case 12:return e.next=14,a.setState({current:l});case 14:a.getOrderList(c,l);case 15:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.downAccountHandle=function(){var e=y()(h.a.mark(function e(t){var n,r,o,i;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),n=a.props.dispatch,r=a.state.selectedRows,o=r.map(function(e){return e.order_id}),e.next=6,n({type:"settle/downAccountAction",payload:{order_id:o,rate:t.rate,bank_account:t.bank_account}});case 6:i=e.sent,0==i.code?(p["a"].success("\u4e0b\u8d26\u6210\u529f\uff01"),a.onDownCancel(),setTimeout(function(){a.getOrderList()},800)):p["a"].error(i.msg);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onDownAccount=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onSettle=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.state.selectedRows,n=!0,r=!1,t.forEach(function(e){e.order_status>=7&&(n=!1),1==e.trans_status&&(r=!0)}),n){e.next=7;break}return p["a"].error("\u5df2\u4e0b\u8d26\u8ba2\u5355\u4e0d\u80fd\u53d6\u6d88\u7ed3\u7b97"),e.abrupt("return");case 7:if(!r){e.next=10;break}return p["a"].error("\u5df2\u786e\u8ba4\u8fd0\u8d39\u4e0d\u80fd\u53d6\u6d88\u7ed3\u7b97"),e.abrupt("return");case 10:o=Object(U["c"])(t),a.setState({accountStatistic:o,settleModalVisible:!0});case 12:case"end":return e.stop()}},e)})),a.onSettleCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({settleModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.btnClicked=!1,a.onSettleOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.btnClicked){e.next=2;break}return e.abrupt("return");case 2:return a.btnClicked=!0,setTimeout(function(){a.btnClicked=!1},2e3),t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=9,t({type:"settle/cancelSettleOrderAction",payload:{order_id:r}});case 9:o=e.sent,0==o.code?(p["a"].success("\u53d6\u6d88\u7ed3\u7b97\u6210\u529f\uff01"),a.onSettleCancel(),setTimeout(function(){a.handleSearch()},300)):p["a"].error(o.msg);case 11:case"end":return e.stop()}},e)})),a.onCancelSign=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({cancelDownAccountModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onCancelDownAccountOk=y()(h.a.mark(function e(){var t,n,r,o;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.selectedRows,r=n.map(function(e){return e.order_id}),e.next=5,t({type:"settle/cancelDownAccountAction",payload:{order_id:r}});case 5:o=e.sent,0==o.code?(p["a"].success("\u53d6\u6d88\u4e0b\u8d26\u6210\u529f\uff01"),a.handleSearch(),a.onCancelDownAccountCancel()):p["a"].error(o.msg);case 7:case"end":return e.stop()}},e)})),a.onPrint=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onPrintCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({printModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onPrintOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/printAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u6253\u5370\u6210\u529f\uff01"),a.onPrintCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onDownload=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!0});case 1:case"end":return e.stop()}},e)})),a.onDownloadCancel=y()(h.a.mark(function e(){return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a.setState({downloadModalVisible:!1});case 1:case"end":return e.stop()}},e)})),a.onDownloadOk=y()(h.a.mark(function e(){var t,n,r;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=a.state.selectedRows,n=t.map(function(e){return e.order_id}),e.next=4,dispatch({type:"settle/downloadAction",payload:{order_id:n}});case 4:r=e.sent,0==r.code?(p["a"].success("\u4e0b\u8f7d\u6210\u529f\uff01"),a.onDownloadCancel()):p["a"].error(r.msg);case 6:case"end":return e.stop()}},e)})),a.onUpdateOrderModalShow=function(){a.setState({updateOrderModalVisible:!0})},a.onUpdateOrderModalCancel=function(){a.setState({updateOrderModalVisible:!1})},a.onRowDoubleClick=function(e,t,n){a.setState({record:e}),a.onUpdateOrderModalShow()},a.onRowClick=function(e,t,a){},a.tableFooter=function(){var e=a.props.settle,t=e.total,n=e.totalOrderAmount,r=e.totalRealOrderAmount,o=e.totalTransAmount,i=e.totalInsurancefee,c=e.totalAdvancepayAmount,l=e.totalDeliverAmount,s=e.totalLatefee,d=e.totalBonusfee;return B.a.createElement("div",{className:G.a.tableFooter},B.a.createElement("span",null,"\u8d27\u6b3e\u603b\u989d\uff1a",n||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u5b9e\u6536\u8d27\u6b3e\uff1a",r||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u8fd0\u8d39\u603b\u989d\uff1a",o||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u57ab\u4ed8\u603b\u989d\uff1a",c||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u9001\u8d27\u8d39\u603b\u989d\uff1a",l||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u4fdd\u4ef7\u8d39\u603b\u989d\uff1a",i||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u7968\u6570\uff1a",t||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u6ede\u7eb3\u91d1\uff1a",s||"0"),B.a.createElement("span",{className:G.a.footerSplit},"\u5956\u91d1\uff1a",d||"0"))},a}return N()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=y()(h.a.mark(function e(){var t,a,n;return h.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.props.dispatch,[W["a"]],2==W["a"].company_type){e.next=6;break}return e.next=5,t({type:"company/getCompanyList",payload:{}});case 5:e.sent;case 6:return 2==W["a"].company_type&&(Object(Z["b"])(this,{company_id:W["a"].company_id}),this.setState({currentCompany:W["a"]})),e.next=9,t({type:"site/getSiteListAction",payload:{pageNo:1,pageSize:100}});case 9:a=e.sent,Object(Z["c"])(this,{}),a&&a.length>0&&(n=a.filter(function(e){return 3==e.site_type||2==e.site_type}),n.length>0&&this.setState({currentShipSite:n[0]})),t({type:"common/initOrderListAction"});case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"renderSimpleForm",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,n=t.customer,r=n.getCustomerList,o=n.sendCustomerList,i=t.company.branchCompanyList,c=t.site.entrunkSiteList,l=(this.state.currentShipSite,{});1!=W["a"].company_type&&(l.initialValue=W["a"].company_id||"");var s=1==W["a"].company_type;return B.a.createElement(P["a"],{onSubmit:this.handleSearch,layout:"inline"},B.a.createElement(J,{label:"\u5206\u516c\u53f8"},a("company_id",l)(B.a.createElement(z["a"],{placeholder:"\u5168\u90e8",onSelect:this.onCompanySelect,style:{width:"100px"},allowClear:s},(1==W["a"].company_type?i:[W["a"]]).map(function(e){return B.a.createElement($,{key:e.company_id,value:e.company_id},e.company_name)})))),B.a.createElement(J,{label:"\u8d27\u8f66\u7f16\u53f7"},a("shipsite_id",{})(B.a.createElement(z["a"],{placeholder:"\u5168\u90e8",onSelect:this.onShipSiteSelect,style:{width:"100px"},allowClear:!0},(c||[]).map(function(e){return B.a.createElement($,{key:e.site_id,value:e.site_id},e.site_name)}))),a("car_code",{})(B.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"80px"}}))),B.a.createElement(J,{label:"\u6536\u8d27\u4eba\u59d3\u540d"},a("getcustomer_id")(B.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:r.map(function(e){var t=u["a"].Option;return B.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Z["g"])(e,t)},onChange:function(t){Object(Z["f"])(e,t)},allowClear:!0,optionLabelProp:"label",placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),B.a.createElement(J,{label:"\u6536\u8d27\u4eba\u7535\u8bdd"},a("getcustomer_mobile",{})(B.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),B.a.createElement(J,{label:"\u53d1\u8d27\u4eba\u59d3\u540d"},a("sendcustomer_id")(B.a.createElement(u["a"],{size:"large",style:{width:"100%"},dataSource:o.map(function(e){var t=u["a"].Option;return B.a.createElement(t,{key:"".concat(e.customer_id),value:"".concat(e.customer_id),customerid:"".concat(e.customer_id),label:e.customer_name},e.customer_name)}),onSelect:function(t){Object(Z["i"])(e,t)},onChange:function(t){Object(Z["h"])(e,t)},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165",filterOption:function(e,t){return-1!==t.props.children.indexOf(e)}}," "))),B.a.createElement(J,{label:"\u53d1\u8d27\u4eba\u7535\u8bdd"},a("sendcustomer_mobile",{})(B.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"130px"}}))),B.a.createElement(J,{label:"\u8fd0\u5355\u53f7"},a("order_code",{})(B.a.createElement(C["a"],{placeholder:"\u8bf7\u8f93\u5165",style:{width:"220px"}}))),B.a.createElement(J,null,B.a.createElement(O["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2")))}},{key:"renderForm",value:function(){return this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.settle,n=a.orderList,r=a.total,o=(a.totalOrderAmount,a.totalTransAmount,t.loading),i=this.state,c=i.selectedRows,l=i.accountStatistic,s=i.current,u=i.pageSize,p=i.updateOrderModalVisible,m=i.settleModalVisible,h=i.downModalVisible,f=i.signModalVisible,y=i.cancelDownAccountModalVisible,b=i.downloadModalVisible,g=i.printModalVisible,w=i.record,v=!0;"site_admin"==W["b"].role_value&&(v=!1);var x=!0;return["site_orderuser","site_pay","site_receipt","site_searchuser"].indexOf(W["b"].role_value)>=0&&(x=!1),B.a.createElement("div",null,B.a.createElement(d["a"],{bordered:!1},B.a.createElement("div",{className:G.a.tableList},B.a.createElement("div",{className:G.a.tableListForm},this.renderForm()),B.a.createElement("div",{className:G.a.tableListOperator},c.length>0&&v&&B.a.createElement("span",null,x&&B.a.createElement(O["a"],{onClick:this.onSettle},"\u53d6\u6d88\u7ed3\u7b97"),B.a.createElement(O["a"],{onClick:this.onPrint},"\u6253\u5370"))),B.a.createElement(q["a"],{onRef:this.onRefTable,selectedRows:c,loading:o,className:G.a.dataTable,rowKey:"order_id",data:{list:n,pagination:{total:r,pageSize:u,current:s,onShowSizeChange:function(t,a){e.setState({pageSize:a})}}},columns:this.columns,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange,onClickHander:this.onRowClick,onDoubleClickHander:this.onRowDoubleClick,rowClassNameHandler:function(e,t){return 6===e.order_status?G.a.settleColor:7===e.order_status?G.a.payColor:""}})),this.tableFooter()),B.a.createElement(Q["a"],{modalVisible:p,record:w,onCancelModal:this.onUpdateOrderModalCancel,handleSearch:this.getOrderList}),B.a.createElement(ee,{modalVisible:h,downAccountHandle:this.downAccountHandle,downCancel:this.onDownCancel,selectedRows:c}),B.a.createElement(S["a"],{title:"\u53d6\u6d88\u7ed3\u7b97",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:m,onOk:this.onSettleOk,onCancel:this.onSettleCancel},B.a.createElement("p",null,"\u53d6\u6d88\u7ed3\u7b97\u8d27\u6b3e\u6761\u6570".concat(c.length,"\uff0c\u53d6\u6d88\u7ed3\u7b97\u603b\u989d ").concat(l.totalAccount," ")),B.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u7b97\u4e48\uff1f")),B.a.createElement(S["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:f,onOk:this.onSignOk,onCancel:this.onSignCancel},B.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7b7e\u5b57\u4e48\uff1f")),B.a.createElement(S["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:y,onOk:this.onCancelDownAccountOk,onCancel:this.onCancelDownAccountCancel},B.a.createElement("p",null,"\u60a8\u786e\u8ba4\u53d6\u6d88\u4e0b\u8d26\u4e48\uff1f")),B.a.createElement(S["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:g,onOk:this.onPrintOk,onCancel:this.onPrintCancel},B.a.createElement("p",null,"\u60a8\u786e\u8ba4\u7ed3\u8d26\u6253\u5370\u4e48\uff1f")),B.a.createElement(S["a"],{title:"\u786e\u8ba4",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",visible:b,onOk:this.onDownloadOk,onCancel:this.onDownloadCancel},B.a.createElement("p",null,"\u60a8\u786e\u8ba4\u8981\u4e0b\u8f7d\u4e48\uff1f")))}}]),t}(H["PureComponent"]),l=s))||l)||l);t["default"]=te}}]);